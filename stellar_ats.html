<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stellar</title>
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />
    <style>
        :root {
            --primary-color: #007bff; --primary-hover: #0069d9;
            --secondary-color: #6c757d; --secondary-hover: #5a6268;
            --success-color: #28a745; --success-hover: #218838;
            --danger-color: #dc3545; --danger-hover: #a71e2a;
            --warning-color: #ffc107; --warning-hover: #e0a800;
            --info-color: #17a2b8; --info-hover: #138496;
            --light-gray: #f8f9fa; --border-color: #dee2e6;
            --text-color: #212529; --text-light: #6c757d;
            --border-radius: 0.3rem; --box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        html, body {
            height: 100%;
            overflow: hidden; /* Prevent body scroll */
        }
        body { font-family: "Pretendard", sans-serif; display: flex; margin: 0; height: 100vh; font-size: 14px; background-color: var(--light-gray); color: var(--text-color); -webkit-font-smoothing: antialiased; }
        #sidebar { width: 220px; background-color: #fff; padding: 20px; border-right: 1px solid var(--border-color); flex-shrink: 0; box-shadow: var(--box-shadow); }
        #sidebar h2 { margin-top: 0; font-size: 1.3rem; color: var(--primary-color); }
        #sidebar ul { list-style: none; padding: 0; margin-top: 30px; }
        #sidebar ul li a { text-decoration: none; color: #343a40; cursor: pointer; display: block; padding: 12px 15px; border-radius: var(--border-radius); margin-bottom: 5px; transition: background-color 0.2s, color 0.2s; }
        #sidebar ul li a:hover { background-color: var(--light-gray); }
        #sidebar ul li a.active { background-color: var(--primary-color); color: white; font-weight: 500; }
        
        #content {
            flex-grow: 1;
            padding: 30px;
            display: flex;
            flex-direction: column;
            overflow-y: auto;
        }
        .page { display: none; }

        .page.active {
            display: flex;
            flex-direction: column;
            flex-grow: 1;
            animation: fadeIn 0.5s;
        }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .page-header { margin-bottom: 25px; display: flex; justify-content: space-between; align-items: center; flex-shrink: 0; }
        .page-header h2 { margin: 0; font-size: 1.8rem; }
        .card { background-color: #fff; border: 1px solid var(--border-color); border-radius: var(--border-radius); box-shadow: var(--box-shadow); margin-bottom: 20px; display: flex; flex-direction: column; }
        .card-header { padding: 12px 20px; background-color: var(--light-gray); border-bottom: 1px solid var(--border-color); font-weight: 500; display:flex; justify-content: space-between; align-items: center; min-height: 24px; }
        .card-body { padding: 20px; }
        table { width: 100%; border-collapse: collapse; background-color: #fff; }
        th, td { border-bottom: 1px solid var(--border-color); padding: 12px 15px; text-align: left; vertical-align: middle; }
        thead th { border-top: 1px solid var(--border-color); }
        th { background-color: var(--light-gray); cursor: pointer; user-select: none; font-weight: 500; }
        tbody tr:nth-child(even) { background-color: var(--light-gray); }
        tbody tr:hover { background-color: #e9ecef; }
        th .sort-arrow { display: inline-block; margin-left: 5px; opacity: 0.4; width: 1em; }
        th.sorted .sort-arrow { opacity: 1; }
        a.view-details { color: var(--primary-color); text-decoration: none; font-weight: 500; }
        a.view-details:hover { text-decoration: underline; }
        .btn { padding: 8px 15px; cursor: pointer; border: 1px solid transparent; background-color: var(--secondary-color); color: white; border-radius: var(--border-radius); font-size: 14px; font-weight: 500; display: inline-flex; align-items: center; justify-content: center; transition: background-color 0.2s; text-decoration: none; }
        .btn:hover { background-color: var(--secondary-hover); }
        .btn-primary { background-color: var(--primary-color); } .btn-primary:hover { background-color: var(--primary-hover); }
        .btn-success { background-color: var(--success-color); } .btn-success:hover { background-color: var(--success-hover); }
        .btn-danger { background-color: var(--danger-color); } .btn-danger:hover { background-color: var(--danger-hover); color: white; }
        .btn-warning { background-color: var(--warning-color); color: #212529; } .btn-warning:hover { background-color: var(--warning-hover); }
        .btn-info { background-color: var(--info-color); } .btn-info:hover { background-color: var(--info-hover); }
        .btn-outline { background-color: transparent; color: var(--secondary-color); border-color: var(--border-color); }
        .btn-outline:hover { background-color: var(--secondary-color); color: white; }
        .btn-sm { padding: 5px 10px; font-size: 12px; }
        .controls-row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; flex-wrap: wrap; gap: 15px; }
        .button-group { display: flex; gap: 10px; align-items: center; }
        input, select, textarea, button { font-family: inherit; }
        input, select, textarea { width: 100%; box-sizing: border-box; padding: 8px 12px; border: 1px solid var(--border-color); border-radius: var(--border-radius); transition: border-color 0.2s, box-shadow 0.2s; }
        input:focus, select:focus, textarea:focus { border-color: var(--primary-color); box-shadow: 0 0 0 2px rgba(0,123,255,0.25); outline: none; }
        
        /* 체크박스 클릭 시 박스 제거 및 커스텀 스타일 */
        input[type="checkbox"] {
            width: 16px !important;
            height: 16px !important;
            background: white;
            border: 2px solid #d1d5db !important;
            border-radius: 3px;
            position: relative;
            cursor: pointer;
            transition: all 0.2s ease;
            outline: none !important;
            box-shadow: none !important;
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            padding: 0 !important;
        }
        
        input[type="checkbox"]:focus,
        input[type="checkbox"]:active {
            outline: none !important;
            box-shadow: none !important;
            border-color: var(--primary-color) !important;
        }
        
        input[type="checkbox"]:checked {
            background: var(--primary-color);
            border-color: var(--primary-color) !important;
        }
        
        input[type="checkbox"]:checked::after {
            content: '✓';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-size: 11px;
            font-weight: bold;
            line-height: 1;
        }
        
        input[type="checkbox"]:hover {
            border-color: var(--primary-color);
        }
        .modal { display: none; position: fixed; z-index: 100; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.5); }
        .modal-content { background-color: #fff; margin: 5% auto; padding: 25px; border: 0; width: 90%; max-width: 500px; border-radius: 8px; box-shadow: 0 4px 15px rgba(0,0,0,0.2); }
        .modal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px; padding-bottom: 15px; border-bottom: 1px solid var(--border-color); }
        .modal-header h3 { margin: 0; font-size: 1.25rem; }
        .form-group { margin-bottom: 1.2rem; }
        .form-group label { display: block; margin-bottom: 0.5rem; font-weight: 500; }
        .form-actions { display: flex; justify-content: flex-end; gap: 8px; margin-top: 2rem; }
        .close { color: #aaa; font-size: 28px; font-weight: bold; cursor: pointer; }
        .history-list { list-style: none; padding: 0; margin: 0; }
        .history-list li { padding: 8px 0; border-bottom: 1px solid var(--light-gray); }
        .history-list li:last-child { border-bottom: none; }
        
        /* 최근 활동 개선 스타일 */
        .recent-activities-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        @media (max-width: 768px) {
            .recent-activities-container {
                grid-template-columns: 1fr;
            }
            
            .quick-stats {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        @media (max-width: 480px) {
            .stats-grid {
                grid-template-columns: 1fr;
            }
        }
        
        .activity-section {
            background: white;
            border-radius: var(--border-radius);
            padding: 20px;
            box-shadow: var(--box-shadow);
            border: 1px solid var(--border-color);
        }
        
        .activity-section h4 {
            margin: 0 0 15px 0;
            font-size: 1.1rem;
            color: var(--text-color);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .activity-item {
            display: flex;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid #f0f0f0;
            transition: background-color 0.2s;
        }
        
        .activity-item:last-child {
            border-bottom: none;
        }
        
        .activity-item:hover {
            background-color: var(--light-gray);
            margin: 0 -10px;
            padding: 12px 10px;
            border-radius: 4px;
            transform: translateX(5px);
        }
        
        .activity-item.clickable {
            cursor: pointer;
        }
        
        .activity-item.clickable:active {
            transform: translateX(2px) scale(0.98);
        }
        
        .activity-icon {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 12px;
            font-size: 14px;
            flex-shrink: 0;
        }
        
        .activity-icon.new-applicant {
            background: linear-gradient(135deg, var(--primary-color), var(--info-color));
            color: white;
        }
        
        .activity-icon.evaluation {
            background: linear-gradient(135deg, var(--success-color), var(--warning-color));
            color: white;
        }
        
        .activity-icon.interview {
            background: linear-gradient(135deg, var(--warning-color), var(--info-color));
            color: #333;
        }
        
        .activity-content {
            flex: 1;
            min-width: 0;
        }
        
        .activity-title {
            font-weight: 500;
            color: var(--text-color);
            margin-bottom: 2px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .activity-subtitle {
            font-size: 12px;
            color: var(--text-light);
            display: flex;
            align-items: center;
            gap: 4px;
        }
        
        .activity-time {
            font-size: 11px;
            color: var(--text-light);
            white-space: nowrap;
        }
        
        .no-activities {
            text-align: center;
            color: var(--text-light);
            padding: 20px;
            font-style: italic;
        }
        
        .quick-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .quick-stat {
            background: white;
            padding: 15px 10px;
            border-radius: var(--border-radius);
            text-align: center;
            border: 1px solid var(--border-color);
            box-shadow: var(--box-shadow);
        }
        
        .quick-stat-number {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 5px;
        }
        
        .quick-stat-label {
            font-size: 11px;
            color: var(--text-light);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        /* 로딩 애니메이션 */
        .loading-placeholder {
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: loading 1.5s infinite;
            border-radius: 4px;
            height: 20px;
            margin-bottom: 10px;
        }
        
        @keyframes loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }
        
        .refresh-indicator {
            display: inline-block;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        .detail-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; align-items: stretch; }

        /* 인라인 상태 편집 스타일 */
        .status-badge {
            cursor: pointer;
            transition: background-color 0.2s, transform 0.1s;
            position: relative;
            user-select: none;
        }

        .status-badge:hover {
            opacity: 0.8;
            transform: scale(1.05);
        }

        .status-badge:active {
            transform: scale(0.98);
        }

        .inline-status-dropdown {
            position: fixed;
            z-index: 99999;
            background: white;
            border: 2px solid var(--primary-color);
            border-radius: 8px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.3);
            min-width: 140px;
            overflow: hidden;
            animation: dropdownAppear 0.2s ease;
        }

        @keyframes dropdownAppear {
            from {
                opacity: 0;
                transform: translateY(-10px) scale(0.9);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .inline-status-option {
            padding: 12px 16px;
            cursor: pointer;
            transition: background-color 0.2s;
            font-size: 13px;
            font-weight: 500;
            border: none;
            background: none;
            width: 100%;
            text-align: left;
            color: var(--text-color);
        }

        .inline-status-option:hover {
            background-color: #f8f9fa;
        }

        .inline-status-option.current {
            background-color: var(--primary-color);
            color: white;
        }

        .status-cell {
            position: relative;
        }
        .detail-grid .card { height: 100%; }
        /* 대시보드 메인 통계 그리드 */
        .stats-grid { 
            display: grid; 
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); 
            gap: 20px; 
            margin-bottom: 30px; 
        }
        
        .stat-card { 
            background: white;
            border: 1px solid #e8ecf4;
            border-radius: 12px;
            padding: 24px;
            text-align: left;
            transition: all 0.2s ease;
            box-shadow: 0 2px 8px rgba(0,0,0,0.04);
            position: relative;
        }
        
        .stat-card:hover {
            border-color: var(--primary-color);
            box-shadow: 0 4px 20px rgba(0,123,255,0.1);
            transform: translateY(-2px);
        }
        
        .stat-card-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 16px;
        }
        
        .stat-card-icon {
            width: 48px;
            height: 48px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            font-weight: 600;
        }
        
        .stat-card-title {
            font-size: 14px;
            font-weight: 500;
            color: #64748b;
            margin: 0;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .stat-card-value {
            font-size: 32px;
            font-weight: 700;
            color: #1e293b;
            margin: 8px 0 4px 0;
            line-height: 1;
        }
        
        .stat-card-change {
            font-size: 13px;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 4px;
        }
        
        .change-positive { color: #059669; }
        .change-negative { color: #dc2626; }
        .change-neutral { color: #64748b; }
        
        /* 통계 섹션 스타일 */
        .dashboard-section {
            margin-bottom: 32px;
        }
        
        .dashboard-section-title {
            font-size: 18px;
            font-weight: 600;
            color: #1e293b;
            margin: 0 0 16px 0;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .analytics-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .chart-card {
            background: white;
            border: 1px solid #e8ecf4;
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.04);
        }
        
        .metrics-list {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }
        
        .metric-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px;
            background: #f8fafc;
            border-radius: 8px;
            border-left: 4px solid var(--primary-color);
        }
        
        .metric-label {
            font-size: 14px;
            font-weight: 500;
            color: #475569;
        }
        
        .metric-value {
            font-size: 16px;
            font-weight: 600;
            color: #1e293b;
        }
        
        /* 대시보드 반응형 디자인 */
        @media (max-width: 768px) {
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .analytics-grid {
                grid-template-columns: 1fr;
            }
        }
        
        /* 간단한 리스트 스타일 */
        .simple-list {
            background: white;
            border: 1px solid #e8ecf4;
            border-radius: 12px;
            overflow: hidden;
        }
        
        .simple-list-header {
            padding: 16px 20px;
            border-bottom: 1px solid #e8ecf4;
            background: #f8fafc;
            font-weight: 600;
            font-size: 14px;
            color: #374151;
        }
        
        .simple-list-item {
            padding: 12px 20px;
            border-bottom: 1px solid #f1f5f9;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: background-color 0.2s;
        }
        
        .simple-list-item:last-child {
            border-bottom: none;
        }
        
        .simple-list-item:hover {
            background-color: #f8fafc;
        }
        
        .simple-list-name {
            font-weight: 500;
            color: #1e293b;
            font-size: 14px;
        }
        
        .simple-list-meta {
            font-size: 12px;
            color: #64748b;
        }
        
        .simple-list-empty {
            padding: 40px 20px;
            text-align: center;
            color: #64748b;
            font-style: italic;
        }
        
        /* 상태별 프로그레스 바 */
        .status-progress {
            margin: 12px 0;
        }
        
        .status-progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }
        
        .status-progress-label {
            font-size: 14px;
            font-weight: 500;
            color: #374151;
        }
        
        .status-progress-value {
            font-size: 14px;
            font-weight: 600;
            color: #1e293b;
        }
        
        .status-progress-bar {
            width: 100%;
            height: 8px;
            background: #f1f5f9;
            border-radius: 4px;
            overflow: hidden;
        }
        
        .status-progress-fill {
            height: 100%;
            background: var(--primary-color);
            transition: width 0.3s ease;
        }
        
        /* 포지션 통계 테이블 */
        .position-table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .position-table th,
        .position-table td {
            padding: 12px 16px;
            text-align: left;
            border-bottom: 1px solid #f1f5f9;
        }
        
        .position-table th {
            background: #f8fafc;
            font-weight: 600;
            font-size: 13px;
            color: #374151;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .position-table td {
            font-size: 14px;
            color: #1e293b;
        }
        
        .position-table tr:hover {
            background: #f8fafc;
        }
        
        /* 지원자 관리 페이지 개선 스타일 */
        .action-buttons-grid {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 24px;
            margin-bottom: 0;
        }
        
        .action-group {
            background: #f8fafc;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid var(--primary-color);
        }
        
        .action-group h5 {
            margin: 0 0 12px 0;
            font-size: 14px;
            font-weight: 600;
            color: #374151;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .action-group.bulk-actions {
            border-left-color: var(--warning-color);
            background: #fef3c7;
        }
        
        .search-filters-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
        }
        
        .filter-item {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }
        
        .filter-item label {
            font-size: 13px;
            font-weight: 500;
            color: #374151;
            margin: 0;
        }
        
        .form-control {
            padding: 8px 12px;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            font-size: 14px;
            transition: border-color 0.2s, box-shadow 0.2s;
        }
        
        .form-control:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
            outline: none;
        }
        
        /* 개선된 테이블 스타일 */
        .table-container {
            position: relative;
            overflow-x: auto;
            overflow-y: visible;
        }
        
        .enhanced-table {
            width: 100%;
            border-collapse: collapse;
            background-color: #fff;
            table-layout: fixed;
        }
        
        .enhanced-table th {
            background-color: #f8fafc;
            border-bottom: 2px solid #e5e7eb;
            padding: 16px 12px;
            text-align: left;
            font-weight: 600;
            color: #374151;
            font-size: 13px;
            white-space: nowrap;
            overflow: hidden;
            position: sticky;
            top: 0;
            z-index: 10;
        }
        
        .enhanced-table .checkbox-column {
            text-align: center;
            padding: 16px 8px;
        }
        
        .enhanced-table th.checkbox-column {
            padding: 16px 8px 16px 16px;
        }
        
        .enhanced-table td.checkbox-column {
            padding: 16px 8px;
        }
        
        .enhanced-table .sortable {
            cursor: pointer;
            user-select: none;
            transition: background-color 0.2s;
        }
        
        .enhanced-table .sortable:hover {
            background-color: #f1f5f9;
        }
        
        .enhanced-table .sortable.sorted {
            background-color: #e0f2fe;
        }
        
        .th-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 8px;
        }
        
        .sort-arrow {
            color: #9ca3af;
            font-size: 14px;
            opacity: 0.6;
            transition: all 0.2s;
            min-width: 16px;
            text-align: center;
        }
        
        .enhanced-table .sortable.sorted .sort-arrow {
            opacity: 1;
            color: var(--primary-color);
            font-weight: bold;
        }
        
        .enhanced-table td {
            padding: 14px 12px;
            border-bottom: 1px solid #f1f5f9;
            vertical-align: middle;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            font-size: 14px;
            color: #1f2937;
        }
        
        .enhanced-table td:last-child {
            white-space: normal;
            overflow: visible;
        }
        
        .enhanced-table tbody tr {
            transition: background-color 0.2s;
            position: relative;
        }
        
        .enhanced-table tbody tr:hover {
            background-color: #f8fafc;
        }
        
        .enhanced-table tbody tr.selected {
            background-color: #dbeafe;
        }
        
        /* 빈 상태 스타일 */
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #6b7280;
        }
        
        .empty-state-icon {
            font-size: 48px;
            margin-bottom: 16px;
            opacity: 0.5;
        }
        
        .empty-state-title {
            font-size: 18px;
            font-weight: 600;
            color: #374151;
            margin-bottom: 8px;
        }
        
        .empty-state-description {
            font-size: 14px;
            margin-bottom: 24px;
            line-height: 1.5;
            max-width: 400px;
            margin-left: auto;
            margin-right: auto;
        }
        
        /* 페이지네이션 스타일 */
        .pagination-container {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 16px;
            padding: 20px;
            background: white;
            border-radius: 8px;
            margin-top: 16px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        
        .pagination-info {
            font-size: 14px;
            color: #6b7280;
            margin: 0 16px;
        }
        
        .pagination-buttons {
            display: flex;
            gap: 8px;
        }
        
        .pagination-btn {
            padding: 8px 12px;
            border: 1px solid #d1d5db;
            background: white;
            color: #374151;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.2s;
        }
        
        .pagination-btn:hover:not(:disabled) {
            background: #f3f4f6;
            border-color: #9ca3af;
        }
        
        .pagination-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .pagination-btn.active {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }
        
        /* 반응형 디자인 */
        @media (max-width: 1024px) {
            .action-buttons-grid {
                grid-template-columns: 1fr 1fr;
            }
        }
        
        @media (max-width: 768px) {
            .action-buttons-grid {
                grid-template-columns: 1fr;
            }
            
            .search-filters-grid {
                grid-template-columns: 1fr;
            }
            
            .enhanced-table {
                font-size: 12px;
            }
            
            .enhanced-table th,
            .enhanced-table td {
                padding: 10px 8px;
            }
        }
        .badge { padding: 2px 6px; border-radius: 3px; font-size: 11px; font-weight: 500; }
        .badge-primary { background-color: var(--primary-color); color: white; }
        .badge-success { background-color: var(--success-color); color: white; }
        .badge-warning { background-color: var(--warning-color); color: #212529; }
        .badge-danger { background-color: var(--danger-color); color: white; }
        .badge-info { background-color: var(--info-color); color: white; }
        .status-badge { display: inline-block; padding: 4px 8px; border-radius: 12px; font-size: 12px; font-weight: 500; }
        .notification { position: fixed; top: 20px; right: 20px; padding: 15px 20px; border-radius: var(--border-radius); color: white; z-index: 1000; display: none; }
        .notification.success { background-color: var(--success-color); }
        .notification.error { background-color: var(--danger-color); }
        .notification.info { background-color: var(--info-color); }
        .drag-over { background-color: rgba(0, 123, 255, 0.1); border: 2px dashed var(--primary-color); }
        .calendar-day { background: white; border: 1px solid var(--border-color); padding: 8px; min-height: 80px; display: flex; flex-direction: column; position: relative; }
        .calendar-day-number { font-weight: 500; font-size: 12px; margin-bottom: 5px; }
        .calendar-day.other-month { background: var(--light-gray); color: var(--text-light); }
        .calendar-day.today { background: rgba(0, 123, 255, 0.1); border-color: var(--primary-color); }
        .calendar-event { background: var(--primary-color); color: white; padding: 2px 4px; border-radius: 3px; font-size: 10px; margin-bottom: 2px; cursor: pointer; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; }
        .calendar-event:hover { background: var(--primary-hover); }
        .calendar-header { background: var(--light-gray); padding: 10px; text-align: center; font-weight: 500; border: 1px solid var(--border-color); }
        
        /* 개선된 칸반보드 스타일 */
        .kanban-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 20px;
            margin-left: auto;
        }
        
        .kanban-search-group {
            display: flex;
            gap: 12px;
            align-items: center;
        }
        
        .kanban-search-input {
            padding: 8px 12px;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            font-size: 14px;
            min-width: 200px;
        }
        
        .kanban-filter-select {
            padding: 8px 12px;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            font-size: 14px;
            min-width: 150px;
        }
        
        .kanban-action-group {
            display: flex;
            gap: 8px;
        }
        
        /* 칸반 통계 */
        .kanban-stats-container {
            display: flex;
            gap: 16px;
            margin-bottom: 24px;
            padding: 0 4px;
        }
        
        .kanban-stat-card {
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            padding: 16px;
            text-align: center;
            flex: 1;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            transition: transform 0.2s, box-shadow 0.2s;
        }
        
        .kanban-stat-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }
        
        .kanban-stat-number {
            font-size: 24px;
            font-weight: 700;
            color: #1f2937;
            margin-bottom: 4px;
        }
        
        .kanban-stat-label {
            font-size: 12px;
            color: #6b7280;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-weight: 500;
        }
        
        /* 칸반보드 컨테이너 */
        .kanban-board-container {
            display: flex;
            gap: 20px;
            overflow-x: auto;
            padding: 4px;
            min-height: 600px;
        }
        
        .kanban-column {
            background: #f8fafc;
            border-radius: 12px;
            min-width: 280px;
            max-width: 320px;
            flex-shrink: 0;
            display: flex;
            flex-direction: column;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }
        
        .kanban-column-header {
            padding: 16px 16px 12px 16px;
            border-bottom: 1px solid #e5e7eb;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: white;
            border-radius: 12px 12px 0 0;
        }
        
        .kanban-column-title {
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 600;
            color: #374151;
            font-size: 14px;
        }
        
        .kanban-column-icon {
            font-size: 16px;
        }
        
        .kanban-column-count {
            background: #e5e7eb;
            color: #6b7280;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
            min-width: 20px;
            text-align: center;
        }
        
        .kanban-column-actions {
            display: flex;
            gap: 4px;
        }
        
        .kanban-add-btn {
            background: none;
            border: none;
            padding: 4px 8px;
            border-radius: 6px;
            cursor: pointer;
            transition: background-color 0.2s;
            font-size: 14px;
        }
        
        .kanban-add-btn:hover {
            background: #f3f4f6;
        }
        
        .kanban-column-body {
            flex: 1;
            padding: 12px;
            overflow-y: auto;
            min-height: 0;
        }

        /* 칸반 카드 */
        .kanban-card { 
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 8px;
            cursor: pointer; 
            transition: all 0.2s ease;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        
        .kanban-card:hover { 
            transform: translateY(-2px); 
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            border-color: var(--primary-color);
        }
        
        .kanban-card:active {
            transform: scale(0.98);
        }
        
        .kanban-card-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 8px;
        }
        
        .kanban-card-name {
            font-weight: 600;
            font-size: 14px;
            color: #1f2937;
            line-height: 1.3;
        }
        
        .kanban-card-position {
            font-size: 12px;
            color: #6b7280;
            margin-bottom: 8px;
            line-height: 1.3;
        }
        
        .kanban-card-meta {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }
        
        .kanban-card-info {
            display: flex;
            align-items: center;
            gap: 4px;
            font-size: 11px;
            color: #6b7280;
        }
        
        .kanban-card-info.schedule {
            color: #d97706;
        }
        
        .kanban-card-info.evaluation {
            color: #059669;
        }
        
        .kanban-card-info.note {
            color: #7c3aed;
        }
        
        .kanban-card-date {
            font-size: 10px;
            color: #9ca3af;
            margin-top: 4px;
        }
        
        /* 빈 상태 */
        .kanban-empty-state {
            text-align: center;
            padding: 40px 20px;
            color: #9ca3af;
        }
        
        .kanban-empty-icon {
            font-size: 32px;
            margin-bottom: 8px;
            opacity: 0.5;
        }
        
        .kanban-empty-text {
            font-size: 13px;
            line-height: 1.4;
        }
        
        /* 드래그 앤 드롭 */
        .kanban-card.dragging {
            opacity: 0.5;
            transform: rotate(5deg);
        }
        
        .kanban-column.drag-over {
            background: #eff6ff;
            border: 2px dashed var(--primary-color);
        }
        
        /* 반응형 디자인 */
        @media (max-width: 768px) {
            .kanban-controls {
                flex-direction: column;
                align-items: stretch;
                gap: 12px;
            }
            
            .kanban-search-group {
                flex-direction: column;
                gap: 8px;
            }
            
            .kanban-stats-container {
                flex-wrap: wrap;
                gap: 8px;
            }
            
            .kanban-stat-card {
                min-width: calc(50% - 4px);
            }
            
            .kanban-column {
                min-width: 260px;
            }
        }
        
        /* 인터뷰 일정 페이지 스타일 */
        .schedule-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 20px;
            margin-left: auto;
        }
        
        .schedule-view-toggle {
            display: flex;
            gap: 0;
            border-radius: 6px;
            overflow: hidden;
            border: 1px solid #d1d5db;
        }
        
        .view-btn {
            border-radius: 0 !important;
            border: none !important;
            transition: all 0.2s ease;
        }
        
        .view-btn.active {
            background: var(--primary-color) !important;
            color: white !important;
        }
        
        .schedule-actions {
            display: flex;
            gap: 8px;
        }
        
        /* 인터뷰 일정 통계 */
        .schedule-stats-container {
            display: flex;
            gap: 16px;
            margin-bottom: 24px;
            padding: 0 4px;
        }
        
        .schedule-stat-card {
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            padding: 16px;
            text-align: center;
            flex: 1;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            transition: transform 0.2s, box-shadow 0.2s;
        }
        
        .schedule-stat-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }
        
        .schedule-stat-number {
            font-size: 24px;
            font-weight: 700;
            color: #1f2937;
            margin-bottom: 4px;
        }
        
        .schedule-stat-label {
            font-size: 12px;
            color: #6b7280;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-weight: 500;
        }
        
        /* 인터뷰 일정 필터 */
        .schedule-filters-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
        }
        
        /* 캘린더 네비게이션 */
        .calendar-navigation {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-left: auto;
        }
        
        /* 캘린더 범례 */
        .calendar-legend {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
            padding: 12px;
            background: #f8fafc;
            border-radius: 8px;
            justify-content: center;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 12px;
            color: #6b7280;
        }
        
        .legend-color {
            width: 16px;
            height: 16px;
            border-radius: 4px;
            border: 1px solid #e5e7eb;
        }
        
        .legend-color.today {
            background: #fef3c7;
            border-color: #f59e0b;
        }
        
        .legend-color.scheduled {
            background: #dbeafe;
            border-color: #3b82f6;
        }
        
        .legend-color.completed {
            background: #dcfce7;
            border-color: #16a34a;
        }
        
        /* 개선된 캘린더 그리드 */
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 1px;
            background: #e5e7eb;
            border-radius: 8px;
            overflow: hidden;
        }
        
        .calendar-day {
            background: white;
            padding: 12px 8px;
            min-height: 100px;
            max-height: 160px;
            display: flex;
            flex-direction: column;
            position: relative;
            transition: background-color 0.2s;
            overflow-y: auto;
        }
        
        .calendar-day:hover {
            background: #f8fafc;
        }
        
        .calendar-day-number {
            font-weight: 600;
            font-size: 14px;
            margin-bottom: 8px;
            color: #374151;
        }
        
        .calendar-day.other-month {
            background: #f9fafb;
            color: #9ca3af;
        }
        
        .calendar-day.today {
            background: #fef3c7;
            border: 2px solid #f59e0b;
        }
        
        .calendar-day.today .calendar-day-number {
            color: #d97706;
            font-weight: 700;
        }
        
        .calendar-event {
            background: #3b82f6;
            color: white;
            padding: 4px 6px;
            border-radius: 4px;
            font-size: 9px;
            margin-bottom: 2px;
            cursor: pointer;
            transition: all 0.2s;
            line-height: 1.1;
            display: flex;
            flex-direction: column;
            gap: 1px;
            min-height: 30px;
        }
        
        .calendar-event:hover {
            background: #2563eb;
            transform: scale(1.02);
            z-index: 10;
            position: relative;
        }
        
        .calendar-event.completed {
            background: #16a34a;
        }
        
        .calendar-event.completed:hover {
            background: #15803d;
        }
        
        .event-time {
            font-weight: 700;
            font-size: 9px;
            opacity: 0.9;
            white-space: nowrap;
        }
        
        .event-position {
            font-size: 8px;
            opacity: 0.8;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            font-weight: 500;
        }
        
        .event-name {
            font-size: 9px;
            font-weight: 600;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
        
        .calendar-more-events {
            background: #f3f4f6;
            color: #6b7280;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 8px;
            margin-top: 2px;
            cursor: pointer;
            text-align: center;
            border: 1px dashed #d1d5db;
            transition: all 0.2s;
            font-weight: 500;
        }
        
        .calendar-more-events:hover {
            background: #e5e7eb;
            color: #374151;
            border-color: #9ca3af;
        }
        
        /* 날짜별 일정 모달 스타일 */
        .day-schedules-list {
            max-height: 400px;
            overflow-y: auto;
        }
        
        .day-schedule-item {
            display: flex;
            gap: 16px;
            padding: 12px;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            margin-bottom: 8px;
            cursor: pointer;
            transition: all 0.2s;
            background: white;
        }
        
        .day-schedule-item:hover {
            background: #f8fafc;
            border-color: #3b82f6;
            transform: translateY(-1px);
            box-shadow: 0 2px 8px rgba(59, 130, 246, 0.15);
        }
        
        .schedule-time {
            font-size: 18px;
            font-weight: 700;
            color: #3b82f6;
            min-width: 60px;
            display: flex;
            align-items: center;
        }
        
        .schedule-info {
            flex: 1;
        }
        
        .schedule-name {
            font-size: 16px;
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 4px;
        }
        
        .schedule-position {
            font-size: 14px;
            color: #6b7280;
            margin-bottom: 6px;
        }
        
        .schedule-details {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
            align-items: center;
        }
        
        .schedule-details span:not(.badge) {
            font-size: 12px;
            color: #6b7280;
        }
        
        /* 평가 기록 페이지 스타일 */
        .evaluation-stats-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 0;
        }
        
        .evaluation-stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .evaluation-stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255, 255, 255, 0.1);
            transform: skewY(-11deg);
            transform-origin: top left;
        }
        
        .evaluation-stat-card.total {
            background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
        }
        
        .evaluation-stat-card.excellent {
            background: linear-gradient(135deg, #059669 0%, #10b981 100%);
        }
        
        .evaluation-stat-card.good {
            background: linear-gradient(135deg, #0284c7 0%, #0ea5e9 100%);
        }
        
        .evaluation-stat-card.average {
            background: linear-gradient(135deg, #d97706 0%, #f59e0b 100%);
        }
        
        .evaluation-stat-card.poor {
            background: linear-gradient(135deg, #dc2626 0%, #ef4444 100%);
        }
        
        .evaluation-stat-number {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 8px;
            position: relative;
            z-index: 1;
        }
        
        .evaluation-stat-label {
            font-size: 14px;
            font-weight: 500;
            opacity: 0.9;
            position: relative;
            z-index: 1;
        }
        
        .evaluation-stat-percentage {
            font-size: 12px;
            opacity: 0.8;
            margin-top: 4px;
            position: relative;
            z-index: 1;
        }
        
        .evaluation-filters-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
        }
        
        /* 평가 점수 배지 스타일 개선 */
        .score-badge {
            padding: 6px 12px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 12px;
            text-align: center;
            min-width: 60px;
            display: inline-block;
        }
        
        .score-badge.score-5 {
            background: #dcfce7;
            color: #166534;
            border: 1px solid #16a34a;
        }
        
        .score-badge.score-4 {
            background: #dbeafe;
            color: #1e40af;
            border: 1px solid #3b82f6;
        }
        
        .score-badge.score-3 {
            background: #fef3c7;
            color: #92400e;
            border: 1px solid #f59e0b;
        }
        
        .score-badge.score-2 {
            background: #fed7aa;
            color: #c2410c;
            border: 1px solid #ea580c;
        }
        
        .score-badge.score-1 {
            background: #fee2e2;
            color: #dc2626;
            border: 1px solid #ef4444;
        }
        
        /* 세부 점수 표시 */
        .detail-scores {
            display: flex;
            gap: 4px;
            flex-wrap: wrap;
        }
        
        .detail-score {
            background: #f3f4f6;
            color: #374151;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 10px;
            font-weight: 500;
            white-space: nowrap;
        }
        
        /* 평가 내용 미리보기 */
        .evaluation-comment-preview {
            max-width: 200px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            color: #6b7280;
            font-size: 13px;
            cursor: help;
        }
        
        /* 평가 관리 버튼 */
        .evaluation-actions {
            display: flex;
            gap: 4px;
        }
        
        .evaluation-actions .btn {
            padding: 4px 8px;
            font-size: 11px;
            min-width: auto;
        }
        
        /* 평가 기록 반응형 */
        @media (max-width: 768px) {
            .evaluation-stats-container {
                grid-template-columns: repeat(2, 1fr);
                gap: 12px;
            }
            
            .evaluation-filters-grid {
                grid-template-columns: 1fr;
            }
            
            .evaluation-stat-card {
                padding: 16px;
            }
            
            .evaluation-stat-number {
                font-size: 24px;
            }
            
            .evaluation-stat-label {
                font-size: 12px;
            }
            
            .detail-scores {
                flex-direction: column;
            }
            
            .evaluation-comment-preview {
                max-width: 120px;
            }
        }
        
        /* 평가 상세보기 모달 스타일 */
        .evaluation-detail-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 24px;
            padding-bottom: 16px;
            border-bottom: 2px solid #f3f4f6;
        }
        
        .evaluation-applicant-info {
            flex: 1;
        }
        
        .evaluation-applicant-name {
            font-size: 24px;
            font-weight: 700;
            color: #1f2937;
            margin-bottom: 4px;
        }
        
        .evaluation-applicant-position {
            font-size: 16px;
            color: #6b7280;
            font-weight: 500;
        }
        
        .evaluation-overall-score {
            display: flex;
            align-items: center;
        }
        
        .score-badge.large {
            font-size: 16px;
            padding: 12px 20px;
            min-width: 120px;
        }
        
        .evaluation-meta {
            margin-bottom: 24px;
        }
        
        .evaluation-date {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .meta-label {
            font-weight: 600;
            color: #374151;
            font-size: 14px;
        }
        
        .meta-value {
            color: #6b7280;
            font-size: 14px;
        }
        
        .detail-scores-section {
            margin-bottom: 24px;
        }
        
        .detail-scores-section h4 {
            font-size: 16px;
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 12px;
        }
        
        .detail-scores-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 12px;
        }
        
        .detail-score-item {
            background: #f8fafc;
            padding: 12px 16px;
            border-radius: 8px;
            border-left: 4px solid #3b82f6;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .detail-score-label {
            font-weight: 500;
            color: #374151;
        }
        
        .detail-score-value {
            font-weight: 700;
            color: #1f2937;
            font-size: 16px;
        }
        
        .evaluation-comment-section {
            margin-bottom: 24px;
        }
        
        .evaluation-comment-section h4 {
            font-size: 16px;
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 12px;
        }
        
        .evaluation-comment-full {
            background: #f9fafb;
            padding: 16px;
            border-radius: 8px;
            border: 1px solid #e5e7eb;
            line-height: 1.6;
            color: #374151;
            white-space: pre-wrap;
        }
        
        .evaluation-detail-actions {
            display: flex;
            gap: 12px;
            justify-content: flex-end;
            padding-top: 16px;
            border-top: 1px solid #e5e7eb;
        }
        
        /* 평가 폼 스타일 개선 */
        .form-section {
            margin-bottom: 20px;
        }
        
        .applicant-summary {
            background: #f0f9ff;
            border: 1px solid #bae6fd;
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 20px;
        }
        
        .applicant-summary-content {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }
        
        .applicant-name {
            font-size: 18px;
            font-weight: 600;
            color: #1e40af;
        }
        
        .applicant-position {
            font-size: 14px;
            color: #3b82f6;
        }
        
        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
        }
        
        .form-help {
            font-size: 12px;
            color: #6b7280;
            margin-top: 4px;
            font-style: italic;
        }
        
        @media (max-width: 768px) {
            .evaluation-detail-header {
                flex-direction: column;
                gap: 16px;
            }
            
            .evaluation-overall-score {
                align-self: flex-start;
            }
            
            .detail-scores-grid {
                grid-template-columns: 1fr;
            }
            
            .evaluation-detail-actions {
                flex-direction: column;
            }
            
            .form-row {
                grid-template-columns: 1fr;
            }
        }
        
        .calendar-header {
            background: #f8fafc;
            padding: 12px;
            text-align: center;
            font-weight: 600;
            color: #374151;
            font-size: 14px;
            border-bottom: 1px solid #e5e7eb;
        }
        
        /* 인터뷰 일정 테이블 개선 */
        .schedule-status-badge {
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .schedule-status-badge.scheduled {
            background: #dbeafe;
            color: #1e40af;
        }
        
        .schedule-status-badge.completed {
            background: #dcfce7;
            color: #166534;
        }
        
        .schedule-status-badge.cancelled {
            background: #fee2e2;
            color: #dc2626;
        }
        
        /* 인터뷰 일정 반응형 */
        @media (max-width: 768px) {
            .schedule-controls {
                flex-direction: column;
                align-items: stretch;
                gap: 12px;
            }
            
            .schedule-filters-grid {
                grid-template-columns: 1fr;
            }
            
            .schedule-stats-container {
                flex-wrap: wrap;
                gap: 8px;
            }
            
            .schedule-stat-card {
                min-width: calc(50% - 4px);
            }
            
            .calendar-navigation {
                margin-left: 0;
                justify-content: center;
            }
            
            .calendar-legend {
                flex-wrap: wrap;
                justify-content: center;
                gap: 12px;
            }
            
            .calendar-day {
                min-height: 100px;
                padding: 8px 4px;
            }
            
            .calendar-event {
                min-height: 35px;
                padding: 3px 4px;
                font-size: 8px;
            }
            
            .event-time {
                font-size: 8px;
            }
            
            .event-position {
                font-size: 7px;
            }
            
            .event-name {
                font-size: 8px;
            }
        }
        
        /* 인터뷰 일정 모달 개선 */
        #schedule-modal .modal-content {
            max-width: 600px;
        }
        
        #schedule-form .form-group {
            margin-bottom: 20px;
        }
        
        #schedule-form label {
            display: block;
            margin-bottom: 6px;
            font-weight: 600;
            color: #374151;
        }
        
        #schedule-form input,
        #schedule-form select,
        #schedule-form textarea {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            font-size: 14px;
            transition: border-color 0.2s, box-shadow 0.2s;
        }
        
        #schedule-form input:focus,
        #schedule-form select:focus,
        #schedule-form textarea:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }
        
        #schedule-form textarea {
            resize: vertical;
            min-height: 80px;
        }
        
        .form-actions {
            display: flex;
            gap: 12px;
            justify-content: flex-end;
            margin-top: 24px;
            padding-top: 20px;
            border-top: 1px solid #e5e7eb;
        }
        
        .form-actions .btn {
            min-width: 100px;
        }
        
        /* 지원자 상세 모달의 인터뷰 일정 스타일 */
        .schedule-item {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            padding: 12px;
            border: 1px solid #e5e7eb;
            border-radius: 6px;
            margin-bottom: 8px;
            background: #f8fafc;
            transition: background-color 0.2s;
        }
        
        .schedule-item:hover {
            background: #f1f5f9;
        }
        
        .schedule-info {
            flex: 1;
        }
        
        .schedule-datetime {
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 4px;
        }
        
        .schedule-details {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            align-items: center;
            margin-bottom: 4px;
        }
        
        .schedule-interviewer,
        .schedule-location {
            font-size: 12px;
            color: #6b7280;
        }
        
        .schedule-notes {
            font-size: 12px;
            color: #4b5563;
            font-style: italic;
            margin-top: 4px;
        }
        
        .schedule-actions {
            display: flex;
            gap: 4px;
            margin-left: 12px;
        }
        
        .schedule-actions .btn {
            min-width: auto;
            padding: 4px 8px;
        }
        
        .history-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        
        .history-list li:not(.schedule-item) {
            padding: 8px 0;
            border-bottom: 1px solid #e5e7eb;
        }
        
        .history-list li:last-child {
            border-bottom: none;
        }
    </style>
</head>
<body>

    <div id="sidebar">
        <h2>Stellar</h2>
        <ul>
            <li><a href="#" class="nav-link active" data-page="dashboard">대시보드</a></li>
            <li><a href="#" class="nav-link" data-page="manage-applicants">지원자 관리</a></li>
            <li><a href="#" class="nav-link" data-page="kanban-board">칸반 보드</a></li>
            <li><a href="#" class="nav-link" data-page="interview-schedule">인터뷰 일정</a></li>
            <li><a href="#" class="nav-link" data-page="evaluations">전체 평가 기록</a></li>
        </ul>
    </div>

    <div id="content">
        <div id="dashboard" class="page active">
            <div class="page-header">
                <h2>채용 현황 대시보드</h2>
                <button class="btn btn-outline" id="refresh-dashboard">새로고침</button>
            </div>
            
            <!-- 메인 통계 카드 -->
            <div class="stats-grid" id="stats-container"></div>
            
            <!-- 분석 섹션 -->
            <div class="dashboard-section">
                <h3 class="dashboard-section-title">📊 채용 분석</h3>
                <div class="analytics-grid">
                    <div class="chart-card">
                        <h4 style="margin: 0 0 20px 0; font-size: 16px; color: #374151;">지원자 현황 분석</h4>
                        <div id="status-analytics"></div>
                    </div>
                    <div class="chart-card">
                        <h4 style="margin: 0 0 16px 0; font-size: 16px; color: #374151;">주요 지표</h4>
                        <div class="metrics-list" id="key-metrics"></div>
                    </div>
                </div>
            </div>
            
            <!-- 포지션별 통계 -->
            <div class="dashboard-section">
                <h3 class="dashboard-section-title">💼 포지션별 현황</h3>
                <div class="chart-card">
                    <div id="position-stats"></div>
                </div>
            </div>
            
            <!-- 최근 활동 요약 -->
            <div class="dashboard-section">
                <h3 class="dashboard-section-title">📋 최근 활동</h3>
                <div class="analytics-grid">
                    <div class="simple-list">
                        <div class="simple-list-header">최근 지원자 (7일)</div>
                        <div id="recent-applicants-summary"></div>
                    </div>
                    <div class="simple-list">
                        <div class="simple-list-header">오늘 인터뷰 일정</div>
                        <div id="today-interviews-summary"></div>
                    </div>
                </div>
            </div>
        </div>

        <div id="manage-applicants" class="page">
            <div class="page-header">
                <h2>지원자 관리</h2>
                <div class="button-group">
                    <button class="btn btn-info" id="advanced-search-btn">📋 고급 검색</button>
                    <button class="btn btn-outline" id="reset-filters-btn">🔄 필터 초기화</button>
                </div>
            </div>
            
            <!-- 액션 버튼 섹션 -->
            <div class="card">
                <div class="card-header">
                    <span>📊 지원자 관리 도구</span>
                    <div style="margin-left: auto; color: #6c757d; font-size: 14px;">
                        총 <span id="total-applicants-count">0</span>명 | 선택된 <span id="selected-applicants-count">0</span>명
                    </div>
                </div>
                <div class="card-body">
                    <div class="action-buttons-grid">
                        <div class="action-group">
                            <h5>지원자 등록</h5>
                            <div class="button-group">
                                <button class="btn btn-primary" id="add-applicant-btn">
                                    <span>➕</span> 개별 등록
                                </button>
                                <label for="csv-upload" class="btn btn-success">
                                    <span>📁</span> CSV 일괄등록
                                </label>
                                <input type="file" id="csv-upload" accept=".csv" style="display: none;">
                            </div>
                        </div>
                        
                        <div class="action-group">
                            <h5>데이터 관리</h5>
                            <div class="button-group">
                                <button class="btn btn-outline" id="download-template-btn">
                                    <span>📄</span> 템플릿 다운로드
                                </button>
                                <button class="btn btn-outline" id="export-data-btn">
                                    <span>💾</span> 데이터 백업
                                </button>
                                <label for="import-data-input" class="btn btn-outline">
                                    <span>📂</span> 데이터 복구
                                </label>
                                <input type="file" id="import-data-input" accept=".json" style="display: none;">
                            </div>
                        </div>
                        
                        <div class="action-group bulk-actions" id="bulk-actions-group" style="display: none;">
                            <h5>일괄 작업</h5>
                            <div class="button-group">
                                <button class="btn btn-info" id="bulk-status-change-btn">
                                    <span>🔄</span> 상태 변경
                                </button>
                                <button class="btn btn-warning" id="bulk-schedule-btn">
                                    <span>📅</span> 인터뷰 등록
                                </button>
                                <button class="btn btn-danger" id="bulk-delete-btn">
                                    <span>🗑️</span> 삭제
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 검색 및 필터 섹션 -->
            <div class="card">
                <div class="card-header">
                    <span>🔍 검색 및 필터</span>
                    <div style="margin-left: auto;">
                        <button class="btn btn-sm btn-outline" id="clear-all-filters">모든 필터 지우기</button>
                    </div>
                </div>
                <div class="card-body">
                    <div class="search-filters-grid">
                        <div class="filter-item">
                            <label for="search-input">이름 검색</label>
                            <input type="text" id="search-input" placeholder="지원자 이름을 입력하세요..." class="form-control">
                        </div>
                        <div class="filter-item">
                            <label for="status-filter">상태 필터</label>
                            <select id="status-filter" class="form-control">
                                <option value="">모든 상태</option>
                                <option value="서류접수">📄 서류접수</option>
                                <option value="인터뷰">💬 인터뷰</option>
                                <option value="최종합격">✅ 최종합격</option>
                                <option value="불합격">❌ 불합격</option>
                            </select>
                        </div>
                        <div class="filter-item">
                            <label for="position-filter">포지션 필터</label>
                            <select id="position-filter" class="form-control">
                                <option value="">모든 포지션</option>
                            </select>
                        </div>
                        <div class="filter-item">
                            <label for="date-filter">등록일 필터</label>
                            <select id="date-filter" class="form-control">
                                <option value="">전체 기간</option>
                                <option value="today">오늘</option>
                                <option value="week">이번 주</option>
                                <option value="month">이번 달</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 지원자 테이블 -->
            <div class="card">
                <div class="card-header">
                    <span>👥 지원자 목록</span>
                    <div style="margin-left: auto; display: flex; align-items: center; gap: 12px;">
                        <select id="rows-per-page" style="padding: 4px 8px; border: 1px solid #ddd; border-radius: 4px;">
                            <option value="25">25개씩 보기</option>
                            <option value="50" selected>50개씩 보기</option>
                            <option value="100">100개씩 보기</option>
                        </select>
                    </div>
                </div>
                <div class="card-body" style="padding: 0; overflow: visible;">
                    <div class="table-container">
                        <table id="applicants-table" class="enhanced-table">
                            <thead>
                                <tr>
                                    <th style="width: 50px;" class="checkbox-column">
                                        <input type="checkbox" id="select-all-checkbox">
                                        <label for="select-all-checkbox" style="margin-left: 8px; font-size: 12px; color: #6c757d;"></label>
                                    </th>
                                    <th data-sort="name" class="sortable" style="width: 120px;">
                                        <div class="th-content">
                                            <span>이름</span>
                                            <span class="sort-arrow">⇅</span>
                                        </div>
                                    </th>
                                    <th data-sort="email" class="sortable" style="width: 200px;">
                                        <div class="th-content">
                                            <span>이메일</span>
                                            <span class="sort-arrow">⇅</span>
                                        </div>
                                    </th>
                                    <th data-sort="position" class="sortable" style="width: 150px;">
                                        <div class="th-content">
                                            <span>지원 포지션</span>
                                            <span class="sort-arrow">⇅</span>
                                        </div>
                                    </th>
                                    <th data-sort="status" class="sortable" style="width: 110px;">
                                        <div class="th-content">
                                            <span>상태</span>
                                            <span class="sort-arrow">⇅</span>
                                        </div>
                                    </th>
                                    <th data-sort="created" class="sortable" style="width: 120px;">
                                        <div class="th-content">
                                            <span>등록일</span>
                                            <span class="sort-arrow">⇅</span>
                                        </div>
                                    </th>
                                    <th style="width: 140px;">관리</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                        
                        <!-- 빈 상태 표시 -->
                        <div id="empty-state" class="empty-state" style="display: none;">
                            <div class="empty-state-icon">👤</div>
                            <div class="empty-state-title">표시할 지원자가 없습니다</div>
                            <div class="empty-state-description">
                                검색 조건을 변경하거나 새로운 지원자를 추가해보세요.
                            </div>
                            <button class="btn btn-primary" onclick="document.getElementById('add-applicant-btn').click()">
                                지원자 추가하기
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 페이지네이션 -->
            <div id="pagination-controls" class="pagination-container"></div>
        </div>

        <div id="kanban-board" class="page">
            <div class="page-header">
                <h2>🗂️ 칸반 보드</h2>
                <div class="kanban-controls">
                    <div class="kanban-search-group">
                        <input type="text" id="kanban-search" placeholder="지원자 이름 검색..." class="kanban-search-input">
                        <select id="kanban-position-filter" class="kanban-filter-select">
                            <option value="">모든 포지션</option>
                        </select>
                    </div>
                    <div class="kanban-action-group">
                        <button class="btn btn-outline" id="kanban-refresh">🔄 새로고침</button>
                        <button class="btn btn-info" id="kanban-view-toggle">📊 통계 보기</button>
                    </div>
                </div>
            </div>
            
            <!-- 칸반 통계 요약 -->
            <div id="kanban-stats" class="kanban-stats-container">
                <div class="kanban-stat-card">
                    <div class="kanban-stat-number" id="stat-total">0</div>
                    <div class="kanban-stat-label">총 지원자</div>
                </div>
                <div class="kanban-stat-card">
                    <div class="kanban-stat-number" id="stat-documents">0</div>
                    <div class="kanban-stat-label">서류접수</div>
                </div>
                <div class="kanban-stat-card">
                    <div class="kanban-stat-number" id="stat-interviews">0</div>
                    <div class="kanban-stat-label">인터뷰</div>
                </div>
                <div class="kanban-stat-card">
                    <div class="kanban-stat-number" id="stat-success">0</div>
                    <div class="kanban-stat-label">최종합격</div>
                </div>
                <div class="kanban-stat-card">
                    <div class="kanban-stat-number" id="stat-failed">0</div>
                    <div class="kanban-stat-label">불합격</div>
                </div>
            </div>
            
            <!-- 칸반 보드 컨테이너 -->
            <div id="kanban-container" class="kanban-board-container">
                <div class="kanban-column" data-status="서류접수">
                    <div class="kanban-column-header">
                        <div class="kanban-column-title">
                            <span class="kanban-column-icon">📄</span>
                            <span>서류접수</span>
                            <span class="kanban-column-count" id="count-서류접수">0</span>
                        </div>
                        <div class="kanban-column-actions">
                            <button class="kanban-add-btn" title="새 지원자 추가">➕</button>
                        </div>
                    </div>
                    <div class="kanban-column-body" id="column-서류접수">
                        <div class="kanban-empty-state">
                            <div class="kanban-empty-icon">📄</div>
                            <div class="kanban-empty-text">서류접수 상태인 지원자가 없습니다</div>
                        </div>
                    </div>
                </div>
                
                <div class="kanban-column" data-status="인터뷰">
                    <div class="kanban-column-header">
                        <div class="kanban-column-title">
                            <span class="kanban-column-icon">💬</span>
                            <span>인터뷰</span>
                            <span class="kanban-column-count" id="count-인터뷰">0</span>
                        </div>
                        <div class="kanban-column-actions">
                            <button class="kanban-add-btn" title="인터뷰 일정 추가">📅</button>
                        </div>
                    </div>
                    <div class="kanban-column-body" id="column-인터뷰">
                        <div class="kanban-empty-state">
                            <div class="kanban-empty-icon">💬</div>
                            <div class="kanban-empty-text">인터뷰 상태인 지원자가 없습니다</div>
                        </div>
                    </div>
                </div>
                
                <div class="kanban-column" data-status="최종합격">
                    <div class="kanban-column-header">
                        <div class="kanban-column-title">
                            <span class="kanban-column-icon">✅</span>
                            <span>최종합격</span>
                            <span class="kanban-column-count" id="count-최종합격">0</span>
                        </div>
                        <div class="kanban-column-actions">
                            <button class="kanban-add-btn" title="평가 추가">⭐</button>
                        </div>
                    </div>
                    <div class="kanban-column-body" id="column-최종합격">
                        <div class="kanban-empty-state">
                            <div class="kanban-empty-icon">✅</div>
                            <div class="kanban-empty-text">최종합격한 지원자가 없습니다</div>
                        </div>
                    </div>
                </div>
                
                <div class="kanban-column" data-status="불합격">
                    <div class="kanban-column-header">
                        <div class="kanban-column-title">
                            <span class="kanban-column-icon">❌</span>
                            <span>불합격</span>
                            <span class="kanban-column-count" id="count-불합격">0</span>
                        </div>
                        <div class="kanban-column-actions">
                            <button class="kanban-add-btn" title="피드백 추가">💭</button>
                        </div>
                    </div>
                    <div class="kanban-column-body" id="column-불합격">
                        <div class="kanban-empty-state">
                            <div class="kanban-empty-icon">❌</div>
                            <div class="kanban-empty-text">불합격한 지원자가 없습니다</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="interview-schedule" class="page">
            <div class="page-header">
                <h2>📅 인터뷰 일정 관리</h2>
                <div class="schedule-controls">
                    <div class="schedule-view-toggle">
                        <button id="schedule-list-btn" class="btn btn-primary view-btn active">📋 목록 보기</button>
                        <button id="schedule-calendar-btn" class="btn btn-outline view-btn">📅 캘린더 보기</button>
            </div>
                    <div class="schedule-actions">
                        <button id="add-schedule-btn" class="btn btn-success">➕ 일정 추가</button>
                        <button id="schedule-refresh-btn" class="btn btn-outline">🔄 새로고침</button>
            </div>
                </div>
            </div>
            
            <!-- 인터뷰 일정 통계 -->
            <div id="schedule-stats" class="schedule-stats-container">
                <div class="schedule-stat-card">
                    <div class="schedule-stat-number" id="stat-total-schedules">0</div>
                    <div class="schedule-stat-label">총 일정</div>
                </div>
                <div class="schedule-stat-card">
                    <div class="schedule-stat-number" id="stat-today-schedules">0</div>
                    <div class="schedule-stat-label">오늘 인터뷰</div>
                </div>
                <div class="schedule-stat-card">
                    <div class="schedule-stat-number" id="stat-upcoming-schedules">0</div>
                    <div class="schedule-stat-label">예정된 인터뷰</div>
                </div>
                <div class="schedule-stat-card">
                    <div class="schedule-stat-number" id="stat-completed-schedules">0</div>
                    <div class="schedule-stat-label">완료된 인터뷰</div>
                </div>
            </div>
            
            <!-- 검색 및 필터 -->
            <div class="card">
                <div class="card-header">
                    <span>🔍 검색 및 필터</span>
                    <div style="margin-left: auto;">
                        <button class="btn btn-sm btn-outline" id="clear-schedule-filters">모든 필터 지우기</button>
                    </div>
                </div>
                <div class="card-body">
                    <div class="schedule-filters-grid">
                        <div class="filter-item">
                            <label for="schedule-search-input">지원자/인터뷰관 검색</label>
                            <input type="text" id="schedule-search-input" placeholder="이름을 입력하세요..." class="form-control">
                        </div>
                        <div class="filter-item">
                            <label for="schedule-status-filter">상태 필터</label>
                            <select id="schedule-status-filter" class="form-control">
                                <option value="">모든 상태</option>
                                <option value="scheduled">예정</option>
                                <option value="completed">완료</option>
                                <option value="cancelled">취소</option>
                            </select>
                        </div>
                        <div class="filter-item">
                            <label for="schedule-date-filter">날짜 필터</label>
                            <select id="schedule-date-filter" class="form-control">
                                <option value="">전체 기간</option>
                                <option value="today">오늘</option>
                                <option value="tomorrow">내일</option>
                                <option value="week">이번 주</option>
                                <option value="month">이번 달</option>
                            </select>
                        </div>
                        <div class="filter-item">
                            <label for="schedule-interviewer-filter">인터뷰관 필터</label>
                            <select id="schedule-interviewer-filter" class="form-control">
                                <option value="">모든 인터뷰관</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 목록 보기 -->
            <div id="schedule-table-view" class="card">
                <div class="card-header">
                    <span>📋 인터뷰 일정 목록</span>
                    <div style="margin-left: auto; display: flex; align-items: center; gap: 12px;">
                        <select id="schedules-per-page" style="padding: 4px 8px; border: 1px solid #ddd; border-radius: 4px;">
                            <option value="25">25개씩 보기</option>
                            <option value="50" selected>50개씩 보기</option>
                            <option value="100">100개씩 보기</option>
                        </select>
                    </div>
                </div>
                <div class="card-body" style="padding: 0; overflow: visible;">
                    <div class="table-container">
                        <table id="schedule-table" class="enhanced-table">
                            <thead>
                                <tr>
                                    <th data-sort="applicant" class="sortable" style="width: 120px;">
                                        <div class="th-content">
                                            <span>지원자</span>
                                            <span class="sort-arrow">⇅</span>
                                        </div>
                                    </th>
                                    <th data-sort="datetime" class="sortable" style="width: 180px;">
                                        <div class="th-content">
                                            <span>인터뷰 일시</span>
                                            <span class="sort-arrow">⇅</span>
                                        </div>
                                    </th>
                                    <th data-sort="interviewer" class="sortable" style="width: 120px;">
                                        <div class="th-content">
                                            <span>인터뷰관</span>
                                            <span class="sort-arrow">⇅</span>
                                        </div>
                                    </th>
                                    <th data-sort="location" class="sortable" style="width: 150px;">
                                        <div class="th-content">
                                            <span>장소/링크</span>
                                            <span class="sort-arrow">⇅</span>
                                        </div>
                                    </th>
                                    <th data-sort="status" class="sortable" style="width: 100px;">
                                        <div class="th-content">
                                            <span>상태</span>
                                            <span class="sort-arrow">⇅</span>
                                        </div>
                                    </th>
                                    <th style="width: 140px;">관리</th>
                                </tr>
                            </thead>
                        <tbody></tbody>
                    </table>
                        
                        <!-- 빈 상태 표시 -->
                        <div id="schedule-empty-state" class="empty-state" style="display: none;">
                            <div class="empty-state-icon">📅</div>
                            <div class="empty-state-title">예정된 인터뷰가 없습니다</div>
                            <div class="empty-state-description">
                                새로운 인터뷰 일정을 추가하거나 필터 조건을 변경해보세요.
                </div>
                            <button class="btn btn-primary" onclick="document.getElementById('add-schedule-btn').click()">
                                인터뷰 일정 추가하기
                            </button>
            </div>
                    </div>
                </div>
            </div>
            
            <!-- 캘린더 보기 -->
            <div id="schedule-calendar-view" class="card" style="display:none;">
                <div class="card-header">
                    <span>📅 인터뷰 캘린더</span>
                    <div class="calendar-navigation">
                        <button id="prev-month" class="btn btn-outline">‹ 이전</button>
                        <h3 id="current-month" style="margin: 0; min-width: 150px; text-align: center;"></h3>
                        <button id="next-month" class="btn btn-outline">다음 ›</button>
                    </div>
                </div>
                <div class="card-body">
                    <div class="calendar-legend">
                        <div class="legend-item">
                            <div class="legend-color today"></div>
                            <span>오늘</span>
                    </div>
                        <div class="legend-item">
                            <div class="legend-color scheduled"></div>
                            <span>예정된 인터뷰</span>
                </div>
                        <div class="legend-item">
                            <div class="legend-color completed"></div>
                            <span>완료된 인터뷰</span>
                        </div>
                    </div>
                    <div id="calendar-grid" class="calendar-grid"></div>
            </div>
            </div>
            
            <!-- 페이지네이션 -->
            <div id="schedule-pagination-controls" class="pagination-container" style="display: none;"></div>
        </div>

        <div id="evaluations" class="page">
            <div class="page-header">
                <h2>📊 전체 평가 기록</h2>
                <div class="button-group">
                    <button class="btn btn-primary" id="add-evaluation-btn">➕ 평가 추가</button>
                    <button class="btn btn-outline" id="evaluation-export-btn">📊 데이터 내보내기</button>
                </div>
            </div>
            
            <!-- 평가 통계 대시보드 -->
            <div class="card">
                <div class="card-header">
                    <span>📈 평가 통계 요약</span>
                </div>
                <div class="card-body">
                    <div id="evaluation-stats-container" class="evaluation-stats-container">
                        <!-- 통계 카드들이 여기에 동적으로 렌더링됩니다 -->
                    </div>
                </div>
            </div>
            
            <!-- 검색 및 필터 -->
            <div class="card">
                <div class="card-header">
                    <span>🔍 검색 & 필터</span>
                </div>
                <div class="card-body">
                    <div class="evaluation-filters-grid">
                        <div class="filter-item">
                            <label for="eval-search-input">지원자 검색</label>
                            <input type="text" id="eval-search-input" placeholder="이름, 포지션, 평가 내용으로 검색..." class="form-control">
                        </div>
                        <div class="filter-item">
                            <label for="eval-score-filter">점수 필터</label>
                            <select id="eval-score-filter" class="form-control">
                                <option value="">모든 점수</option>
                                <option value="5">5점 (최상)</option>
                                <option value="4">4점 (우수)</option>
                                <option value="3">3점 (보통)</option>
                                <option value="2">2점 (미흡)</option>
                                <option value="1">1점 (매우 미흡)</option>
                            </select>
                        </div>
                        <div class="filter-item">
                            <label for="eval-position-filter">포지션 필터</label>
                            <select id="eval-position-filter" class="form-control">
                                <option value="">모든 포지션</option>
                            </select>
                        </div>
                        <div class="filter-item">
                            <label for="eval-date-filter">평가 기간</label>
                            <select id="eval-date-filter" class="form-control">
                                <option value="">전체 기간</option>
                                <option value="today">오늘</option>
                                <option value="week">최근 7일</option>
                                <option value="month">최근 30일</option>
                                <option value="quarter">최근 3개월</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 평가 목록 -->
            <div class="card">
                <div class="card-header">
                    <span>📋 평가 기록 목록</span>
                    <div style="margin-left: auto; display: flex; align-items: center; gap: 12px;">
                        <select id="evaluations-per-page" style="padding: 4px 8px; border: 1px solid #ddd; border-radius: 4px;">
                            <option value="25">25개씩 보기</option>
                            <option value="50" selected>50개씩 보기</option>
                            <option value="100">100개씩 보기</option>
                        </select>
                    </div>
                </div>
                <div class="card-body" style="padding: 0; overflow: visible;">
                    <div class="table-container">
                        <table id="all-evaluations-table" class="enhanced-table">
                            <thead>
                                <tr>
                                    <th data-sort="applicant" class="sortable" style="width: 120px;">
                                        <div class="th-content">
                                            <span>지원자</span>
                                            <span class="sort-arrow">⇅</span>
                                        </div>
                                    </th>
                                    <th data-sort="position" class="sortable" style="width: 140px;">
                                        <div class="th-content">
                                            <span>포지션</span>
                                            <span class="sort-arrow">⇅</span>
                                        </div>
                                    </th>
                                    <th data-sort="date" class="sortable" style="width: 160px;">
                                        <div class="th-content">
                                            <span>평가일</span>
                                            <span class="sort-arrow">⇅</span>
                                        </div>
                                    </th>
                                    <th data-sort="score" class="sortable" style="width: 100px;">
                                        <div class="th-content">
                                            <span>종합 점수</span>
                                            <span class="sort-arrow">⇅</span>
                                        </div>
                                    </th>
                                    <th data-sort="detail-scores" class="sortable" style="width: 100px;">
                                        <div class="th-content">
                                            <span>세부 점수</span>
                                            <span class="sort-arrow">⇅</span>
                                        </div>
                                    </th>
                                    <th data-sort="comment" class="sortable" style="width: 200px;">
                                        <div class="th-content">
                                            <span>평가 내용</span>
                                            <span class="sort-arrow">⇅</span>
                                        </div>
                                    </th>
                                    <th style="width: 120px;">관리</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                        
                        <!-- 빈 상태 표시 -->
                        <div id="evaluation-empty-state" class="empty-state" style="display: none;">
                            <div class="empty-state-icon">📝</div>
                            <div class="empty-state-title">평가 기록이 없습니다</div>
                            <div class="empty-state-description">
                                새로운 평가를 추가하거나 필터 조건을 변경해보세요.
                            </div>
                            <button class="btn btn-primary" onclick="document.getElementById('add-evaluation-btn').click()">
                                평가 추가하기
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 페이지네이션 -->
            <div id="evaluation-pagination-controls" class="pagination-container" style="display: none;"></div>
        </div>
    </div>
    
    <div id="applicant-modal" class="modal"><div class="modal-content"><div class="modal-header"><h3 id="modal-title"></h3><span class="close">&times;</span></div><form id="applicant-form"><input type="hidden" id="applicant-id"><div class="form-group"><label for="name">이름</label><input type="text" id="name" required></div><div class="form-group"><label for="email">이메일</label><input type="email" id="email" required></div><div class="form-group"><label for="phone">연락처</label><input type="tel" id="phone"></div><div class="form-group"><label for="position">지원 포지션</label><input type="text" id="position"></div><div class="form-group"><label for="status">상태</label><select id="status"></select></div><div class="form-group"><label for="notes">비고</label><textarea id="notes" rows="3" placeholder="추가 메모사항을 입력하세요."></textarea></div><div class="form-actions"><button type="submit" class="btn btn-primary">저장</button></div></form></div></div>
    <div id="applicant-detail-modal" class="modal"><div class="modal-content" id="detail-modal-content" style="max-width: 800px;"></div></div>
    <div id="schedule-modal" class="modal"><div class="modal-content"><div class="modal-header"><h3 id="schedule-modal-title"></h3><span class="close">&times;</span></div><form id="schedule-form"><input type="hidden" id="schedule-id"><div class="form-group"><label for="schedule-applicant">지원자</label><select id="schedule-applicant" required></select></div><div class="form-group"><label for="schedule-datetime">인터뷰 일시</label><input type="datetime-local" id="schedule-datetime" required></div><div class="form-group"><label for="schedule-interviewer">인터뷰관</label><input type="text" id="schedule-interviewer"></div><div class="form-group"><label for="schedule-location">인터뷰 장소</label><input type="text" id="schedule-location" placeholder="회의실명 또는 온라인 링크"></div><div class="form-group"><label for="schedule-notes">인터뷰 메모</label><textarea id="schedule-notes" rows="3" placeholder="인터뷰 관련 메모사항"></textarea></div><div class="form-actions"><button type="submit" class="btn btn-primary">저장</button></div></form></div></div>
    <div id="evaluation-modal" class="modal">
        <div class="modal-content" style="max-width: 600px;">
            <div class="modal-header">
                <h3 id="evaluation-modal-title">평가 작성</h3>
                <span class="close">&times;</span>
            </div>
            <form id="evaluation-form">
                <input type="hidden" id="eval-id">
                <input type="hidden" id="eval-applicant-id">
                
                <!-- 지원자 정보 표시 -->
                <div id="eval-applicant-info" class="form-section" style="display: none;">
                    <div class="applicant-summary">
                        <div class="applicant-summary-content">
                            <div class="applicant-name" id="eval-applicant-name"></div>
                            <div class="applicant-position" id="eval-applicant-position"></div>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="eval-score">종합 점수 *</label>
                    <select id="eval-score" class="form-control" required>
                        <option value="">선택해주세요</option>
                        <option value="5">5 - 최상 (매우 우수함)</option>
                        <option value="4">4 - 우수 (기대 이상)</option>
                        <option value="3">3 - 보통 (기대 수준)</option>
                        <option value="2">2 - 미흡 (기대 이하)</option>
                        <option value="1">1 - 매우 미흡 (부적합)</option>
                    </select>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="eval-technical">기술 점수</label>
                        <select id="eval-technical" class="form-control">
                            <option value="">선택안함</option>
                            <option value="5">5 - 최상</option>
                            <option value="4">4 - 우수</option>
                            <option value="3">3 - 보통</option>
                            <option value="2">2 - 미흡</option>
                            <option value="1">1 - 매우 미흡</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="eval-communication">소통 점수</label>
                        <select id="eval-communication" class="form-control">
                            <option value="">선택안함</option>
                            <option value="5">5 - 최상</option>
                            <option value="4">4 - 우수</option>
                            <option value="3">3 - 보통</option>
                            <option value="2">2 - 미흡</option>
                            <option value="1">1 - 매우 미흡</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="eval-comment">종합 평가 *</label>
                    <textarea id="eval-comment" rows="6" class="form-control" required 
                        placeholder="평가 내용을 상세히 입력해주세요. (예: 기술적 역량, 문제 해결 능력, 커뮤니케이션 스킬, 협업 능력 등)"></textarea>
                    <div class="form-help">
                        구체적이고 건설적인 피드백을 작성해주세요.
                    </div>
                </div>
                
                <div class="form-actions">
                    <button type="button" class="btn btn-outline" onclick="closeModal(UI.evaluationModal)">취소</button>
                    <button type="submit" class="btn btn-primary">평가 저장</button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- 평가 상세보기 모달 -->
    <div id="evaluation-detail-modal" class="modal">
        <div class="modal-content" style="max-width: 700px;">
            <div class="modal-header">
                <h3>📊 평가 상세보기</h3>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body" id="evaluation-detail-content">
                <!-- 동적으로 생성됩니다 -->
            </div>
        </div>
    </div>
    <div id="bulk-schedule-modal" class="modal"><div class="modal-content"><div class="modal-header"><h3>일괄 인터뷰 등록</h3><span class="close">&times;</span></div><form id="bulk-schedule-form"><p><span id="bulk-count"></span>명의 지원자에게 동일한 인터뷰를 등록합니다.</p><div class="form-group"><label for="bulk-schedule-datetime">인터뷰 일시</label><input type="datetime-local" id="bulk-schedule-datetime" required></div><div class="form-group"><label for="bulk-schedule-interviewer">인터뷰관</label><input type="text" id="bulk-schedule-interviewer"></div><div class="form-actions"><button type="submit" class="btn btn-primary">일괄 등록</button></div></form></div></div>
    <div id="bulk-status-modal" class="modal"><div class="modal-content"><div class="modal-header"><h3>상태 일괄 변경</h3><span class="close">&times;</span></div><form id="bulk-status-form"><p><span id="bulk-status-count"></span>명의 지원자 상태를 아래와 같이 변경합니다.</p><div class="form-group"><label for="bulk-new-status">변경할 상태</label><select id="bulk-new-status" required></select></div><div class="form-actions"><button type="submit" class="btn btn-primary">변경하기</button></div></form></div></div>
    <div id="advanced-search-modal" class="modal"><div class="modal-content"><div class="modal-header"><h3>고급 검색</h3><span class="close">&times;</span></div><form id="advanced-search-form"><div class="form-group"><label for="adv-name">이름</label><input type="text" id="adv-name"></div><div class="form-group"><label for="adv-email">이메일</label><input type="email" id="adv-email"></div><div class="form-group"><label for="adv-position">포지션</label><input type="text" id="adv-position"></div><div class="form-group"><label for="adv-status">상태</label><select id="adv-status"><option value="">모든 상태</option></select></div><div class="form-group"><label for="adv-date-from">등록일 시작</label><input type="date" id="adv-date-from"></div><div class="form-group"><label for="adv-date-to">등록일 종료</label><input type="date" id="adv-date-to"></div><div class="form-actions"><button type="submit" class="btn btn-primary">검색</button><button type="button" class="btn btn-outline" id="clear-advanced-search">초기화</button></div></form></div></div>

    <div id="notification" class="notification"></div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const DB_PREFIX = 'stellar_ats_final_';
            const DB_APPLICANTS = DB_PREFIX + 'applicants';
            const DB_SCHEDULES = DB_PREFIX + 'schedules';
            const DB_EVALUATIONS = DB_PREFIX + 'evaluations';
            // 안정적인 데이터 저장/불러오기 함수
            const getData = (key) => {
                try {
                    const item = localStorage.getItem(key);
                    if (item === null) return [];
                    return JSON.parse(item);
                } catch (error) {
                    console.error(`데이터 불러오기 오류 (${key}):`, error);
                    showNotification('데이터를 불러오는 중 오류가 발생했습니다. 빈 목록으로 시작합니다.', 'warning');
                    return [];
                }
            };
            
            const setData = (key, data) => {
                try {
                    const jsonString = JSON.stringify(data);
                    localStorage.setItem(key, jsonString);
                } catch (error) {
                    console.error(`데이터 저장 오류 (${key}):`, error);
                    
                    if (error.name === 'QuotaExceededError') {
                        showNotification('저장 공간이 부족합니다. 브라우저 데이터를 정리하거나 불필요한 데이터를 삭제해주세요.', 'error');
                    } else {
                        showNotification('데이터 저장에 실패했습니다. 페이지를 새로고침하고 다시 시도해주세요.', 'error');
                    }
                    
                    // 저장 실패시 사용자에게 재시도 옵션 제공
                    if (confirm('데이터 저장에 실패했습니다. 지금 다시 시도하시겠습니까?')) {
                        try {
                            localStorage.setItem(key, JSON.stringify(data));
                            showNotification('데이터가 성공적으로 저장되었습니다.', 'success');
                        } catch (retryError) {
                            console.error('재시도 저장 오류:', retryError);
                            showNotification('재시도에도 실패했습니다. 브라우저를 재시작해주세요.', 'error');
                        }
                    }
                }
            };

            let currentPage = 1, rowsPerPage = 50, sortColumn = 'created', sortDirection = 'desc', debounceTimer;
            let selectedApplicantIds = new Set();
            let advancedSearchActive = false, advancedSearchCriteria = {};
            const STATUS_OPTIONS = ['서류접수', '인터뷰', '최종합격', '불합격'];

            const UI = {
                navLinks: document.querySelectorAll('.nav-link'), pages: document.querySelectorAll('.page'),
                applicantModal: document.getElementById('applicant-modal'), scheduleModal: document.getElementById('schedule-modal'),
                applicantDetailModal: document.getElementById('applicant-detail-modal'), evaluationModal: document.getElementById('evaluation-modal'),
                bulkScheduleModal: document.getElementById('bulk-schedule-modal'), bulkStatusModal: document.getElementById('bulk-status-modal'),
                advancedSearchModal: document.getElementById('advanced-search-modal'),
                applicantsTableBody: document.querySelector('#applicants-table tbody'), applicantForm: document.getElementById('applicant-form'),
                searchInput: document.getElementById('search-input'), statusFilter: document.getElementById('status-filter'),
                positionFilter: document.getElementById('position-filter'),
                selectAllCheckbox: document.getElementById('select-all-checkbox'), bulkActionsDiv: document.getElementById('bulk-actions'),
                evalSearchInput: document.getElementById('eval-search-input'), evalScoreFilter: document.getElementById('eval-score-filter')
            };

            function showNotification(message, type = 'info', duration = 3000) {
                const notification = document.getElementById('notification');
                notification.textContent = message;
                notification.className = `notification ${type}`;
                notification.style.display = 'block';
                setTimeout(() => { notification.style.display = 'none'; }, duration);
            }

            function renderDashboard() {
                const applicants = getData(DB_APPLICANTS);
                const schedules = getData(DB_SCHEDULES);
                const evaluations = getData(DB_EVALUATIONS);

                const today = new Date();
                const todayStr = today.toDateString();
                const todaySchedules = schedules.filter(s => new Date(s.datetime).toDateString() === todayStr);
                
                // 이번 주 날짜 계산
                const thisWeekStart = new Date();
                thisWeekStart.setDate(thisWeekStart.getDate() - 7);
                const weeklyApplicants = applicants.filter(app => new Date(app.created) >= thisWeekStart);
                
                // 지난 주 날짜 계산 (비교용)
                const lastWeekStart = new Date();
                lastWeekStart.setDate(lastWeekStart.getDate() - 14);
                const lastWeekEnd = new Date();
                lastWeekEnd.setDate(lastWeekEnd.getDate() - 7);
                const lastWeekApplicants = applicants.filter(app => {
                    const created = new Date(app.created);
                    return created >= lastWeekStart && created < lastWeekEnd;
                });

                const statusCounts = STATUS_OPTIONS.reduce((acc, status) => {
                    acc[status] = applicants.filter(a => a.status === status).length;
                    return acc;
                }, {});

                // 변화율 계산
                const weeklyChange = lastWeekApplicants.length > 0 ? 
                    ((weeklyApplicants.length - lastWeekApplicants.length) / lastWeekApplicants.length * 100) : 0;
                const averageScore = evaluations.length > 0 ? 
                    (evaluations.reduce((sum, ev) => sum + parseInt(ev.score), 0) / evaluations.length).toFixed(1) : 0;

                // 메인 통계 카드
                document.getElementById('stats-container').innerHTML = `
                    <div class="stat-card">
                        <div class="stat-card-header">
                            <p class="stat-card-title">전체 지원자</p>
                            <div class="stat-card-icon" style="background: #dbeafe; color: #2563eb;">👥</div>
                        </div>
                        <div class="stat-card-value">${applicants.length}</div>
                        <div class="stat-card-change change-neutral">지금까지 등록된 총 지원자 수</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-card-header">
                            <p class="stat-card-title">이번 주 신규</p>
                            <div class="stat-card-icon" style="background: #dcfce7; color: #16a34a;">📈</div>
                        </div>
                        <div class="stat-card-value">${weeklyApplicants.length}</div>
                        <div class="stat-card-change ${weeklyChange >= 0 ? 'change-positive' : 'change-negative'}">
                            ${weeklyChange >= 0 ? '↗' : '↘'} 지난 주 대비 ${Math.abs(weeklyChange).toFixed(1)}%
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-card-header">
                            <p class="stat-card-title">오늘 인터뷰</p>
                            <div class="stat-card-icon" style="background: #fef3c7; color: #d97706;">📅</div>
                        </div>
                        <div class="stat-card-value">${todaySchedules.length}</div>
                        <div class="stat-card-change change-neutral">오늘 예정된 인터뷰 일정</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-card-header">
                            <p class="stat-card-title">평균 평가 점수</p>
                            <div class="stat-card-icon" style="background: #ede9fe; color: #7c3aed;">⭐</div>
                        </div>
                        <div class="stat-card-value">${averageScore}</div>
                        <div class="stat-card-change change-neutral">5점 만점 기준 평균 점수</div>
                    </div>`;

                // 지원자 현황 분석 (상태별 진행률)
                const totalApplicants = applicants.length;
                let statusAnalyticsHTML = '';
                STATUS_OPTIONS.forEach(status => {
                    const count = statusCounts[status];
                    const percentage = totalApplicants > 0 ? (count / totalApplicants * 100) : 0;
                    statusAnalyticsHTML += `
                        <div class="status-progress">
                            <div class="status-progress-header">
                                <span class="status-progress-label">${status}</span>
                                <span class="status-progress-value">${count}명 (${percentage.toFixed(1)}%)</span>
                            </div>
                            <div class="status-progress-bar">
                                <div class="status-progress-fill" style="width: ${percentage}%"></div>
                            </div>
                        </div>`;
                });
                document.getElementById('status-analytics').innerHTML = statusAnalyticsHTML;

                // 주요 지표
                const conversionRate = statusCounts['서류접수'] > 0 ? 
                    (statusCounts['인터뷰'] / statusCounts['서류접수'] * 100).toFixed(1) : 0;
                const successRate = statusCounts['인터뷰'] > 0 ? 
                    (statusCounts['최종합격'] / statusCounts['인터뷰'] * 100).toFixed(1) : 0;
                
                document.getElementById('key-metrics').innerHTML = `
                    <div class="metric-item">
                        <span class="metric-label">서류→인터뷰 전환율</span>
                        <span class="metric-value">${conversionRate}%</span>
                    </div>
                    <div class="metric-item">
                        <span class="metric-label">인터뷰→합격 성공률</span>
                        <span class="metric-value">${successRate}%</span>
                    </div>
                    <div class="metric-item">
                        <span class="metric-label">총 평가 완료</span>
                        <span class="metric-value">${evaluations.length}건</span>
                    </div>
                    <div class="metric-item">
                        <span class="metric-label">전체 인터뷰 일정</span>
                        <span class="metric-value">${schedules.length}건</span>
                    </div>`;

                // 포지션별 통계
                const positionStats = {};
                applicants.forEach(app => {
                    const position = app.position || '미지정';
                    if (!positionStats[position]) {
                        positionStats[position] = { total: 0, 서류접수: 0, 인터뷰: 0, 최종합격: 0, 불합격: 0 };
                    }
                    positionStats[position].total++;
                    positionStats[position][app.status]++;
                });

                let positionStatsHTML = '<table class="position-table"><thead><tr><th>포지션</th><th>총 지원</th><th>서류접수</th><th>인터뷰</th><th>합격</th><th>불합격</th></tr></thead><tbody>';
                Object.entries(positionStats).forEach(([position, stats]) => {
                    positionStatsHTML += `
                        <tr>
                            <td><strong>${position}</strong></td>
                            <td>${stats.total}</td>
                            <td>${stats.서류접수}</td>
                            <td>${stats.인터뷰}</td>
                            <td>${stats.최종합격}</td>
                            <td>${stats.불합격}</td>
                        </tr>`;
                });
                positionStatsHTML += '</tbody></table>';
                document.getElementById('position-stats').innerHTML = positionStatsHTML;

                // 최근 지원자 요약 (7일)
                const recentApplicants = weeklyApplicants.slice(-5).reverse();
                let recentApplicantsHTML = '';
                if (recentApplicants.length > 0) {
                    recentApplicants.forEach(app => {
                        const daysAgo = Math.floor((today - new Date(app.created)) / (1000 * 60 * 60 * 24));
                        recentApplicantsHTML += `
                            <div class="simple-list-item">
                                <div>
                                    <div class="simple-list-name">${app.name}</div>
                                    <div class="simple-list-meta">${app.position || '포지션 미지정'}</div>
                                </div>
                                <div class="simple-list-meta">${daysAgo === 0 ? '오늘' : daysAgo + '일 전'}</div>
                            </div>`;
                    });
                } else {
                    recentApplicantsHTML = '<div class="simple-list-empty">최근 7일간 신규 지원자가 없습니다.</div>';
                }
                document.getElementById('recent-applicants-summary').innerHTML = recentApplicantsHTML;

                // 오늘 인터뷰 일정 요약
                let todayInterviewsHTML = '';
                if (todaySchedules.length > 0) {
                    todaySchedules.forEach(schedule => {
                        const app = applicants.find(a => a.id == schedule.applicantId);
                        const time = new Date(schedule.datetime);
                        const timeStr = time.toLocaleTimeString('ko-KR', { hour: '2-digit', minute: '2-digit' });
                        todayInterviewsHTML += `
                            <div class="simple-list-item">
                                <div>
                                    <div class="simple-list-name">${app ? app.name : '알수없음'}</div>
                                    <div class="simple-list-meta">${schedule.interviewer || '인터뷰관 미지정'}</div>
                                </div>
                                <div class="simple-list-meta">${timeStr}</div>
                            </div>`;
                    });
                } else {
                    todayInterviewsHTML = '<div class="simple-list-empty">오늘 예정된 인터뷰가 없습니다.</div>';
                }
                document.getElementById('today-interviews-summary').innerHTML = todayInterviewsHTML;
            }

            // 시간 경과 표시 헬퍼 함수
            function getTimeAgo(date) {
                const now = new Date();
                const diff = now - date;
                const seconds = Math.floor(diff / 1000);
                const minutes = Math.floor(seconds / 60);
                const hours = Math.floor(minutes / 60);
                const days = Math.floor(hours / 24);

                if (days > 0) return `${days}일 전`;
                if (hours > 0) return `${hours}시간 전`;
                if (minutes > 0) return `${minutes}분 전`;
                return '방금 전';
            }



            const openModal = (modal) => modal.style.display = 'block';
            const closeModal = (modal) => { if(modal) { modal.style.display = 'none'; }};

            let isCalendarView = false; 

            UI.navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    UI.navLinks.forEach(l => l.classList.remove('active'));
                    link.classList.add('active');
                    const pageId = link.dataset.page;
                    UI.pages.forEach(p => p.classList.remove('active'));
                    document.getElementById(pageId).classList.add('active');
                    if (pageId === 'kanban-board') renderKanbanBoard();
                    if (pageId === 'evaluations') renderAllEvaluationsPage();
                    if (pageId === 'dashboard') renderDashboard();
                    if (pageId === 'interview-schedule') isCalendarView ? renderCalendar() : renderSchedules();
                });
            });

            document.body.addEventListener('click', (event) => { if (event.target.classList.contains('close')) closeModal(event.target.closest('.modal')); });
            window.onclick = (event) => { if (event.target.classList.contains('modal')) closeModal(event.target); };

            document.getElementById('advanced-search-btn').addEventListener('click', () => {
                const form = document.getElementById('advanced-search-form');
                form.querySelector('#adv-status').innerHTML = '<option value="">모든 상태</option>' + STATUS_OPTIONS.map(s => `<option value="${s}">${s}</option>`).join('');
                openModal(UI.advancedSearchModal);
            });

            document.getElementById('advanced-search-form').addEventListener('submit', (e) => {
                e.preventDefault();
                advancedSearchActive = true;
                advancedSearchCriteria = {
                    name: e.target.querySelector('#adv-name').value.toLowerCase(), email: e.target.querySelector('#adv-email').value.toLowerCase(),
                    position: e.target.querySelector('#adv-position').value.toLowerCase(), status: e.target.querySelector('#adv-status').value,
                    dateFrom: e.target.querySelector('#adv-date-from').value, dateTo: e.target.querySelector('#adv-date-to').value
                };
                currentPage = 1; selectedApplicantIds.clear(); renderApplicants(); closeModal(UI.advancedSearchModal);
                showNotification('고급 검색이 적용되었습니다.', 'success');
            });

            document.getElementById('clear-advanced-search').addEventListener('click', () => { document.getElementById('advanced-search-form').reset(); });

            document.getElementById('reset-filters-btn').addEventListener('click', () => {
                UI.searchInput.value = ''; UI.statusFilter.value = ''; UI.positionFilter.value = '';
                advancedSearchActive = false; advancedSearchCriteria = {}; currentPage = 1; selectedApplicantIds.clear();
                renderApplicants(); showNotification('모든 필터가 초기화되었습니다.', 'info');
            });

            document.getElementById('refresh-dashboard').addEventListener('click', function() { 
                const button = this;
                const originalText = button.textContent;
                button.innerHTML = '<span class="refresh-indicator">🔄</span> 새로고침 중...';
                button.disabled = true;
                
                setTimeout(() => {
                    renderDashboard(); 
                    button.textContent = originalText;
                    button.disabled = false;
                    showNotification('대시보드가 새로고침되었습니다.', 'success');
                }, 800);
            });
            
            function renderApplicants() {
                let allApplicants = getData(DB_APPLICANTS);
                let dataWasModified = false;

                // 데이터 무결성 확인 및 수정
                allApplicants.forEach(app => {
                    if (!app.created) {
                        app.created = new Date().toISOString().split('T')[0];
                        dataWasModified = true;
                    }
                });

                if (dataWasModified) {
                    setData(DB_APPLICANTS, allApplicants);
                }

                // 필터링 로직 개선 - 성능 최적화
                let filtered = allApplicants.filter(app => {
                    // 기본 검색 및 필터
                    const searchTerm = UI.searchInput.value.toLowerCase().trim();
                    
                    // 빈 검색어일 때 조기 반환 로직 추가
                    if (!searchTerm && !UI.statusFilter.value && !UI.positionFilter.value && !document.getElementById('date-filter').value && !advancedSearchActive) {
                        return true; // 모든 필터가 비어있으면 모든 지원자 반환
                    }
                    
                    // 검색어가 있을 때만 통합 검색 수행
                    let searchMatch = true;
                    if (searchTerm) {
                        // 통합 검색: 이름, 이메일, 포지션을 한 번에 검색
                        const appName = app.name.toLowerCase();
                        const appEmail = (app.email || '').toLowerCase();
                        const appPosition = (app.position || '').toLowerCase();
                        
                        searchMatch = appName.includes(searchTerm) || 
                                     appEmail.includes(searchTerm) || 
                                     appPosition.includes(searchTerm);
                    }
                    
                    const statusMatch = !UI.statusFilter.value || app.status === UI.statusFilter.value;
                    const positionMatch = !UI.positionFilter.value || (app.position && app.position.includes(UI.positionFilter.value));
                    
                    // 날짜 필터 추가
                    const dateFilter = document.getElementById('date-filter').value;
                    let dateMatch = true;
                    if (dateFilter) {
                        const appDate = new Date(app.created);
                        const today = new Date();
                        
                        switch(dateFilter) {
                            case 'today':
                                dateMatch = appDate.toDateString() === today.toDateString();
                                break;
                            case 'week':
                                const weekAgo = new Date();
                                weekAgo.setDate(weekAgo.getDate() - 7);
                                dateMatch = appDate >= weekAgo;
                                break;
                            case 'month':
                                const monthAgo = new Date();
                                monthAgo.setMonth(monthAgo.getMonth() - 1);
                                dateMatch = appDate >= monthAgo;
                                break;
                        }
                    }
                    
                    if (!searchMatch || !statusMatch || !positionMatch || !dateMatch) return false;

                    // 고급 검색 조건
                    if (advancedSearchActive) {
                        const c = advancedSearchCriteria;
                        if (c.name && !app.name.toLowerCase().includes(c.name)) return false;
                        if (c.email && !app.email.toLowerCase().includes(c.email)) return false;
                        if (c.position && !(app.position && app.position.toLowerCase().includes(c.position))) return false;
                        if (c.status && app.status !== c.status) return false;
                        if (c.dateFrom && app.created < c.dateFrom) return false;
                        if (c.dateTo && app.created > c.dateTo) return false;
                    }
                    return true;
                });

                // 정렬 로직 개선
                filtered.sort((a, b) => {
                    let valA = a[sortColumn] || '';
                    let valB = b[sortColumn] || '';
                    
                    // 날짜 정렬 특별 처리
                    if (sortColumn === 'created') {
                        valA = new Date(valA);
                        valB = new Date(valB);
                    }
                    
                    if (valA < valB) return sortDirection === 'asc' ? -1 : 1;
                    if (valA > valB) return sortDirection === 'asc' ? 1 : -1;
                    return 0;
                });

                // 통계 업데이트
                updateCounters(allApplicants.length, filtered.length);

                // 빈 상태 처리
                const emptyState = document.getElementById('empty-state');
                const tableContainer = document.querySelector('.table-container table');
                
                if (filtered.length === 0) {
                    emptyState.style.display = 'block';
                    tableContainer.style.display = 'none';
                    UI.applicantsTableBody.innerHTML = '';
                } else {
                    emptyState.style.display = 'none';
                    tableContainer.style.display = 'table';
                    
                    // 페이지네이션 적용
                const paginated = filtered.slice((currentPage - 1) * rowsPerPage, currentPage * rowsPerPage);
                    
                    // 향상된 테이블 렌더링
                    UI.applicantsTableBody.innerHTML = paginated.map(app => {
                        const isSelected = selectedApplicantIds.has(String(app.id));
                        const createdDate = new Date(app.created).toLocaleDateString('ko-KR', {
                            year: 'numeric',
                            month: 'short',
                            day: 'numeric'
                        });
                        
                        return `
                            <tr ${isSelected ? 'class="selected"' : ''}>
                                <td class="checkbox-column">
                                    <input type="checkbox" class="applicant-checkbox" data-id="${app.id}" ${isSelected ? 'checked' : ''}>
                                </td>
                                <td>
                                    <a href="#" class="view-details" data-id="${app.id}" title="상세 정보 보기">
                                        ${app.name}
                                    </a>
                        </td>
                                <td title="${app.email}">${app.email}</td>
                                <td title="${app.position || '포지션 미지정'}">${app.position || '-'}</td>
                                <td class="status-cell">
                                    <span class="status-badge ${getStatusBadgeClass(app.status)}" 
                                          data-id="${app.id}" 
                                          data-current-status="${app.status}"
                                          title="클릭하여 상태 변경">${app.status}</span>
                                </td>
                                <td title="${createdDate}">${createdDate}</td>
                                <td>
                                    <div class="button-group" style="gap: 4px;">
                                        <button class="btn btn-sm edit-applicant" data-id="${app.id}" title="수정">
                                            ✏️
                                        </button>
                                        <button class="btn btn-sm btn-danger delete-applicant" data-id="${app.id}" title="삭제">
                                            🗑️
                                        </button>
                                    </div>
                                </td>
                            </tr>`;
                    }).join('');
                }

                // UI 업데이트 함수들 호출
                updateApplicantDropdowns(allApplicants); 
                updatePositionFilter(allApplicants);
                renderPaginationControls(filtered.length); 
                updateSortHeaders();
                updateSelectAllCheckboxState(); 
                updateBulkActionUI();
            }
            
            // 카운터 업데이트 함수
            function updateCounters(total, filtered) {
                const totalCountElement = document.getElementById('total-applicants-count');
                const selectedCountElement = document.getElementById('selected-applicants-count');
                const filteredCountElement = document.getElementById('filtered-count');
                
                if (totalCountElement) totalCountElement.textContent = total;
                if (selectedCountElement) selectedCountElement.textContent = selectedApplicantIds.size;
                if (filteredCountElement) filteredCountElement.textContent = filtered;
            }

            function getStatusBadgeClass(status) {
                const statusMap = { '서류접수': 'badge-info', '인터뷰': 'badge-warning', '최종합격': 'badge-success', '불합격': 'badge-danger' };
                return statusMap[status] || 'badge-primary';
            }

            function updatePositionFilter(applicants) {
                const positions = [...new Set(applicants.map(app => app.position).filter(p => p))];
                const currentValue = UI.positionFilter.value;
                UI.positionFilter.innerHTML = '<option value="">모든 포지션</option>' + positions.map(pos => `<option value="${pos}">${pos}</option>`).join('');
                UI.positionFilter.value = currentValue;
            }

            UI.applicantsTableBody.addEventListener('click', (e) => {
                const target = e.target;
                const applicantId = target.dataset.id;
                
                if (target.classList.contains('edit-applicant')) {
                    const app = getData(DB_APPLICANTS).find(a => a.id == applicantId);
                    document.getElementById('modal-title').textContent = '지원자 정보 수정';
                    const form = UI.applicantForm; form.reset();
                    form.querySelector('#applicant-id').value = app.id; form.querySelector('#name').value = app.name;
                    form.querySelector('#email').value = app.email; form.querySelector('#phone').value = app.phone || '';
                    form.querySelector('#position').value = app.position || ''; form.querySelector('#notes').value = app.notes || '';
                    const statusSelect = form.querySelector('#status');
                    statusSelect.innerHTML = STATUS_OPTIONS.map(s => `<option value="${s}">${s}</option>`).join('');
                    statusSelect.value = app.status;
                    openModal(UI.applicantModal);
                }
                if (target.classList.contains('delete-applicant')) {
                    if (confirm('지원자를 삭제하면 관련 인터뷰 및 평가 기록도 모두 삭제됩니다. 정말 삭제하시겠습니까?')) {
                        setData(DB_APPLICANTS, getData(DB_APPLICANTS).filter(app => app.id != applicantId));
                        setData(DB_SCHEDULES, getData(DB_SCHEDULES).filter(s => s.applicantId != applicantId));
                        setData(DB_EVALUATIONS, getData(DB_EVALUATIONS).filter(ev => ev.applicantId != applicantId));
                        renderApplicants(); renderSchedules(); renderKanbanBoard(); renderAllEvaluationsPage(); renderDashboard();
                        showNotification('지원자 및 관련 데이터가 삭제되었습니다.', 'success');
                    }
                }
                if (target.classList.contains('status-badge')) {
                    e.stopPropagation();
                    showInlineStatusDropdown(target);
                }
            });

            function openApplicantDetailModal(applicantId) {
                const applicant = getData(DB_APPLICANTS).find(a => a.id == applicantId); if (!applicant) return;
                const schedules = getData(DB_SCHEDULES).filter(s => s.applicantId == applicantId).sort((a,b) => new Date(b.datetime) - new Date(a.datetime));
                const evaluations = getData(DB_EVALUATIONS).filter(ev => ev.applicantId == applicantId).reverse();
                const modalContent = document.getElementById('detail-modal-content');

                let schedulesHtml = schedules.length > 0 ? schedules.map(s => {
                    const status = new Date(s.datetime) > new Date() ? '예정' : '완료';
                    return `
                        <li class="schedule-item">
                            <div class="schedule-info">
                                <div class="schedule-datetime">${new Date(s.datetime).toLocaleString('ko-KR')}</div>
                                <div class="schedule-details">
                                    <span class="schedule-interviewer">인터뷰관: ${s.interviewer || 'N/A'}</span>
                                    ${s.location ? `<span class="schedule-location">장소: ${s.location}</span>` : ''}
                                    <span class="badge ${status === '예정' ? 'badge-warning' : 'badge-success'}">${status}</span>
                                </div>
                                ${s.notes ? `<div class="schedule-notes">${s.notes}</div>` : ''}
                            </div>
                            <div class="schedule-actions">
                                <button class="btn btn-sm btn-outline edit-schedule-from-detail" data-schedule-id="${s.id}" data-applicant-id="${applicant.id}" title="수정">
                                    ✏️
                                </button>
                                <button class="btn btn-sm btn-danger delete-schedule-from-detail" data-schedule-id="${s.id}" data-applicant-id="${applicant.id}" title="삭제">
                                    🗑️
                                </button>
                            </div>
                        </li>
                    `;
                }).join('') : '<li>인터뷰 일정이 없습니다.</li>';

                let evaluationsHtml = evaluations.length > 0 ? evaluations.map(ev => `
                    <div class="card" style="margin-bottom:10px;"><div class="card-header">
                        <span><strong>종합: ${ev.score}/5</strong> | 기술: ${ev.technical || 'N/A'}/5 | 소통: ${ev.communication || 'N/A'}/5</span>
                        <button class="btn btn-sm btn-danger delete-evaluation" data-eval-id="${ev.id}" data-applicant-id="${applicant.id}">삭제</button>
                    </div><div class="card-body" style="padding:15px;">
                        <p style="margin:0 0 10px 0;"><span style="color:var(--text-light);">${ev.date}</span></p>
                        <p style="margin:0;">${ev.comment.replace(/\n/g, '<br>')}</p>
                    </div></div>`).join('') : '<p>평가 기록이 없습니다.</p>';

                modalContent.innerHTML = `
                    <div class="modal-header"><h3>${applicant.name} <small style="color:var(--text-light); font-weight:normal;">(${applicant.position || 'N/A'})</small></h3><span class="close">&times;</span></div>
                    <div class="detail-grid" style="padding: 10px 0;"><div class="card"><div class="card-header"><span>기본 정보</span></div>
                        <div class="card-body">
                            <p><strong>이메일:</strong> ${applicant.email}</p><p><strong>연락처:</strong> ${applicant.phone||'N/A'}</p>
                            <p><strong>상태:</strong> <span class="status-badge ${getStatusBadgeClass(applicant.status)}">${applicant.status}</span></p>
                            <p><strong>등록일:</strong> ${new Date(applicant.created || new Date()).toLocaleDateString('ko-KR')}</p>
                            ${applicant.notes ? `<p><strong>비고:</strong> ${applicant.notes.replace(/\n/g, '<br>')}</p>` : ''}
                        </div></div><div class="card"><div class="card-header">
                        <span>인터뷰 일정</span><button class="btn btn-sm" id="add-interview-from-detail" data-id="${applicant.id}" data-name="${applicant.name}">새 인터뷰 등록</button>
                    </div><div class="card-body"><ul class="history-list">${schedulesHtml}</ul></div></div></div>
                    <div class="card"><div class="card-header">
                        <span>평가 기록</span><button class="btn btn-sm" id="add-evaluation-from-detail" data-id="${applicant.id}">새 평가 작성</button>
                    </div><div class="card-body" style="max-height: 300px; overflow-y: auto;">${evaluationsHtml}</div></div>`;
                openModal(UI.applicantDetailModal);
            }

            document.body.addEventListener('click', function(event) {
                const target = event.target;

                if (target.classList.contains('view-details')) {
                    event.preventDefault();
                    const applicantId = target.dataset.id;
                    if (applicantId) {
                        openApplicantDetailModal(applicantId);
                    }
                }
                
                if (target.id === 'add-interview-from-detail') {
                    const applicantId = target.dataset.id, applicantName = target.dataset.name;
                    const form = document.getElementById('schedule-form');
                    document.getElementById('schedule-modal-title').textContent = `${applicantName} - 신규 인터뷰 등록`;
                    form.reset(); form.querySelector('#schedule-id').value = '';
                    const applicantSelect = form.querySelector('#schedule-applicant');
                    applicantSelect.innerHTML = `<option value="${applicantId}">${applicantName}</option>`;
                    applicantSelect.value = applicantId; applicantSelect.disabled = true;
                    openModal(document.getElementById('schedule-modal'));
                }
                
                if (target.id === 'add-evaluation-from-detail') {
                    const applicantId = target.dataset.id;
                    const form = document.getElementById('evaluation-form'); form.reset();
                    form.querySelector('#eval-applicant-id').value = applicantId;
                    openModal(UI.evaluationModal);
                }

                if (target.classList.contains('delete-evaluation')) {
                    if (confirm('이 평가 기록을 삭제하시겠습니까?')) {
                        setData(DB_EVALUATIONS, getData(DB_EVALUATIONS).filter(ev => ev.id != target.dataset.evalId));
                        openApplicantDetailModal(target.dataset.applicantId);
                        renderKanbanBoard(); renderAllEvaluationsPage();
                        showNotification('평가 기록이 삭제되었습니다.', 'success');
                    }
                }
                
                // 지원자 상세 모달에서 인터뷰 일정 수정
                if (target.classList.contains('edit-schedule-from-detail')) {
                    const scheduleId = target.dataset.scheduleId || target.getAttribute('data-schedule-id');
                    const applicantId = target.dataset.applicantId || target.getAttribute('data-applicant-id');
                    
                    console.log('지원자 모달에서 수정 버튼 클릭 - scheduleId:', scheduleId);
                    
                    // 기존 editSchedule 함수 재사용
                    editSchedule(scheduleId);
                    
                    // 모달이 열린 후 지원자 상세 모달 닫기
                    UI.applicantDetailModal.style.display = 'none';
                }
                
                // 지원자 상세 모달에서 인터뷰 일정 삭제
                if (target.classList.contains('delete-schedule-from-detail')) {
                    const scheduleId = target.dataset.scheduleId || target.getAttribute('data-schedule-id');
                    const applicantId = target.dataset.applicantId || target.getAttribute('data-applicant-id');
                    
                    console.log('지원자 모달에서 삭제 버튼 클릭 - scheduleId:', scheduleId);
                    
                    if (confirm('이 인터뷰 일정을 삭제하시겠습니까?')) {
                        let schedules = getData(DB_SCHEDULES);
                        
                        // 문자열과 숫자 타입 모두 확인
                        schedules = schedules.filter(s => 
                            s.id !== scheduleId && 
                            s.id != scheduleId && 
                            String(s.id) !== String(scheduleId)
                        );
                        
                        setData(DB_SCHEDULES, schedules);
                        
                        // 지원자 상세 모달 새로고침
                        openApplicantDetailModal(applicantId);
                        
                        // 다른 UI 업데이트
                        renderSchedules();
                        renderDashboard();
                        renderKanbanBoard();
                        
                        showNotification('인터뷰 일정이 삭제되었습니다.', 'success');
                    }
                }
            });

            document.getElementById('evaluation-form').addEventListener('submit', (e) => {
                e.preventDefault();
                
                const applicantId = e.target.querySelector('#eval-applicant-id').value;
                const evaluationId = e.target.querySelector('#eval-id').value;
                
                if (!applicantId) {
                    showNotification('지원자 정보가 없습니다.', 'error');
                    return;
                }
                
                const evaluationData = {
                    applicantId,
                    score: e.target.querySelector('#eval-score').value,
                    technical: e.target.querySelector('#eval-technical').value || null,
                    communication: e.target.querySelector('#eval-communication').value || null,
                    comment: e.target.querySelector('#eval-comment').value
                };
                
                let evaluations = getData(DB_EVALUATIONS);
                
                if (evaluationId) {
                    // 수정 모드
                    const index = evaluations.findIndex(ev => ev.id == evaluationId);
                    if (index !== -1) {
                        evaluations[index] = {
                            ...evaluations[index],
                            ...evaluationData,
                            date: evaluations[index].date // 원본 날짜 유지
                        };
                        showNotification('평가가 수정되었습니다.', 'success');
                    }
                } else {
                    // 새로 추가
                    const newEval = {
                        id: Date.now() + '_' + Math.random().toString(36).substr(2, 9),
                        ...evaluationData,
                        date: new Date().toLocaleString('ko-KR')
                    };
                    evaluations.push(newEval);
                    showNotification('평가가 저장되었습니다.', 'success');
                }
                
                setData(DB_EVALUATIONS, evaluations);
                closeModal(UI.evaluationModal);
                
                // 폼 초기화
                e.target.reset();
                document.getElementById('eval-id').value = '';
                document.getElementById('eval-applicant-info').style.display = 'none';
                document.getElementById('evaluation-modal-title').textContent = '평가 작성';
                
                // UI 업데이트
                renderAllEvaluationsPage();
                renderDashboard();
                renderKanbanBoard();
                
                // 지원자 상세 모달이 열려있었다면 새로고침
                if (UI.applicantDetailModal.style.display === 'block') {
                    openApplicantDetailModal(applicantId);
                }
            });

            // 평가 기록 관련 변수들
            let evaluationCurrentPage = 1;
            let evaluationsPerPage = 50;
            let evaluationSortColumn = 'date';
            let evaluationSortDirection = 'desc';
            let evaluationSearchTerm = '';
            let evaluationScoreFilter = '';
            let evaluationPositionFilter = '';
            let evaluationDateFilter = '';
            let evaluationDebounceTimer = null;

            // 평가 통계 업데이트
            function updateEvaluationStats() {
                const evaluations = getData(DB_EVALUATIONS);
                const applicants = getData(DB_APPLICANTS);
                
                const totalEvaluations = evaluations.length;
                const excellentCount = evaluations.filter(e => parseInt(e.score) >= 4).length;
                const goodCount = evaluations.filter(e => parseInt(e.score) === 3).length;
                const poorCount = evaluations.filter(e => parseInt(e.score) <= 2).length;
                
                const averageScore = totalEvaluations > 0 ? 
                    (evaluations.reduce((sum, e) => sum + parseInt(e.score), 0) / totalEvaluations).toFixed(1) : 0;
                
                const excellentPercentage = totalEvaluations > 0 ? ((excellentCount / totalEvaluations) * 100).toFixed(1) : 0;
                const goodPercentage = totalEvaluations > 0 ? ((goodCount / totalEvaluations) * 100).toFixed(1) : 0;
                const poorPercentage = totalEvaluations > 0 ? ((poorCount / totalEvaluations) * 100).toFixed(1) : 0;
                
                document.getElementById('evaluation-stats-container').innerHTML = `
                    <div class="evaluation-stat-card total">
                        <div class="evaluation-stat-number">${totalEvaluations}</div>
                        <div class="evaluation-stat-label">총 평가 수</div>
                        <div class="evaluation-stat-percentage">평균 ${averageScore}점</div>
                    </div>
                    <div class="evaluation-stat-card excellent">
                        <div class="evaluation-stat-number">${excellentCount}</div>
                        <div class="evaluation-stat-label">우수 이상 (4-5점)</div>
                        <div class="evaluation-stat-percentage">${excellentPercentage}%</div>
                    </div>
                    <div class="evaluation-stat-card good">
                        <div class="evaluation-stat-number">${goodCount}</div>
                        <div class="evaluation-stat-label">보통 (3점)</div>
                        <div class="evaluation-stat-percentage">${goodPercentage}%</div>
                    </div>
                    <div class="evaluation-stat-card poor">
                        <div class="evaluation-stat-number">${poorCount}</div>
                        <div class="evaluation-stat-label">미흡 이하 (1-2점)</div>
                        <div class="evaluation-stat-percentage">${poorPercentage}%</div>
                    </div>
                `;
            }

            // 포지션 필터 업데이트
            function updateEvaluationPositionFilter() {
                const applicants = getData(DB_APPLICANTS);
                const positions = [...new Set(applicants.map(a => a.position).filter(p => p))];
                
                const positionFilter = document.getElementById('eval-position-filter');
                if (positionFilter) {
                    positionFilter.innerHTML = '<option value="">모든 포지션</option>' + 
                        positions.map(pos => `<option value="${pos}">${pos}</option>`).join('');
                }
            }

            // 필터링된 평가 목록 가져오기
            function getFilteredEvaluations() {
                const evaluations = getData(DB_EVALUATIONS);
                const applicants = getData(DB_APPLICANTS);
                const applicantMap = new Map(applicants.map(app => [String(app.id), app]));
                
                return evaluations.filter(evaluation => {
                    const applicant = applicantMap.get(String(evaluation.applicantId));
                    if (!applicant) return false;
                    
                    // 검색어 필터
                    const searchMatch = !evaluationSearchTerm || 
                        applicant.name.toLowerCase().includes(evaluationSearchTerm.toLowerCase()) ||
                        (applicant.position && applicant.position.toLowerCase().includes(evaluationSearchTerm.toLowerCase())) ||
                        evaluation.comment.toLowerCase().includes(evaluationSearchTerm.toLowerCase());
                    
                    // 점수 필터
                    const scoreMatch = !evaluationScoreFilter || evaluation.score === evaluationScoreFilter;
                    
                    // 포지션 필터
                    const positionMatch = !evaluationPositionFilter || applicant.position === evaluationPositionFilter;
                    
                    // 날짜 필터
                    let dateMatch = true;
                    if (evaluationDateFilter) {
                        const evalDate = new Date(evaluation.date);
                        const today = new Date();
                        
                        switch (evaluationDateFilter) {
                            case 'today':
                                dateMatch = evalDate.toDateString() === today.toDateString();
                                break;
                            case 'week':
                                const weekAgo = new Date();
                                weekAgo.setDate(today.getDate() - 7);
                                dateMatch = evalDate >= weekAgo;
                                break;
                            case 'month':
                                const monthAgo = new Date();
                                monthAgo.setDate(today.getDate() - 30);
                                dateMatch = evalDate >= monthAgo;
                                break;
                            case 'quarter':
                                const quarterAgo = new Date();
                                quarterAgo.setDate(today.getDate() - 90);
                                dateMatch = evalDate >= quarterAgo;
                                break;
                        }
                    }
                    
                    return searchMatch && scoreMatch && positionMatch && dateMatch;
                });
            }

            // 평가 정렬
            function sortEvaluations(evaluations) {
                const applicants = getData(DB_APPLICANTS);
                const applicantMap = new Map(applicants.map(app => [String(app.id), app]));
                
                return evaluations.sort((a, b) => {
                    let aVal, bVal;
                    
                    switch (evaluationSortColumn) {
                        case 'applicant':
                            const aApplicant = applicantMap.get(String(a.applicantId));
                            const bApplicant = applicantMap.get(String(b.applicantId));
                            aVal = aApplicant ? aApplicant.name : '';
                            bVal = bApplicant ? bApplicant.name : '';
                            break;
                        case 'position':
                            const aAppPos = applicantMap.get(String(a.applicantId));
                            const bAppPos = applicantMap.get(String(b.applicantId));
                            aVal = aAppPos ? (aAppPos.position || '') : '';
                            bVal = bAppPos ? (bAppPos.position || '') : '';
                            break;
                        case 'date':
                            aVal = new Date(a.date);
                            bVal = new Date(b.date);
                            break;
                        case 'score':
                            aVal = parseInt(a.score);
                            bVal = parseInt(b.score);
                            break;
                        case 'detail-scores':
                            aVal = (a.technical || 0) + (a.communication || 0);
                            bVal = (b.technical || 0) + (b.communication || 0);
                            break;
                        case 'comment':
                            aVal = a.comment || '';
                            bVal = b.comment || '';
                            break;
                        default:
                            return 0;
                    }
                    
                    if (aVal < bVal) return evaluationSortDirection === 'asc' ? -1 : 1;
                    if (aVal > bVal) return evaluationSortDirection === 'asc' ? 1 : -1;
                    return 0;
                });
            }
            
            // 평가 기록 테이블 정렬
            function sortEvaluationsTable(column) {
                if (evaluationSortColumn === column) {
                    evaluationSortDirection = evaluationSortDirection === 'asc' ? 'desc' : 'asc';
                } else {
                    evaluationSortColumn = column;
                    evaluationSortDirection = 'asc';
                }
                evaluationCurrentPage = 1;
                renderAllEvaluationsPage();
            }

            // 평가 목록 렌더링
            function renderAllEvaluationsPage() {
                const applicants = getData(DB_APPLICANTS);
                const filteredEvaluations = getFilteredEvaluations();
                const sortedEvaluations = sortEvaluations(filteredEvaluations);
                
                // 통계 및 필터 업데이트
                updateEvaluationStats();
                updateEvaluationPositionFilter();
                
                // 정렬 상태 시각적으로 업데이트
                document.querySelectorAll('#all-evaluations-table th.sortable').forEach(th => {
                    th.classList.remove('sorted');
                    if (th.dataset.sort === evaluationSortColumn) {
                        th.classList.add('sorted');
                        const arrow = th.querySelector('.sort-arrow');
                        if (arrow) {
                            arrow.textContent = evaluationSortDirection === 'asc' ? '↑' : '↓';
                        }
                    } else {
                        const arrow = th.querySelector('.sort-arrow');
                        if (arrow) {
                            arrow.textContent = '⇅';
                        }
                    }
                });
                
                // 카운터 업데이트
                const filteredCount = document.getElementById('filtered-evaluations-count');
                if (filteredCount) {
                    filteredCount.textContent = filteredEvaluations.length;
                }
                
                // 페이지네이션 계산
                const totalPages = Math.ceil(sortedEvaluations.length / evaluationsPerPage);
                const startIndex = (evaluationCurrentPage - 1) * evaluationsPerPage;
                const endIndex = startIndex + evaluationsPerPage;
                const pageEvaluations = sortedEvaluations.slice(startIndex, endIndex);
                
                // 테이블 렌더링
                const tbody = document.querySelector('#all-evaluations-table tbody');
                const emptyState = document.getElementById('evaluation-empty-state');
                
                if (!tbody) return;
                
                if (pageEvaluations.length === 0) {
                    tbody.innerHTML = '';
                    if (emptyState) emptyState.style.display = 'block';
                    return;
                }
                
                if (emptyState) emptyState.style.display = 'none';
                
                const applicantMap = new Map(applicants.map(app => [String(app.id), app]));
                
                tbody.innerHTML = pageEvaluations.map(evaluation => {
                    const applicant = applicantMap.get(String(evaluation.applicantId));
                    const applicantName = applicant ? applicant.name : '삭제된 지원자';
                    const applicantPosition = applicant ? (applicant.position || '-') : '-';
                    
                    const scoreClass = `score-${evaluation.score}`;
                    const scoreText = {
                        '5': '5 (최상)',
                        '4': '4 (우수)',
                        '3': '3 (보통)',
                        '2': '2 (미흡)',
                        '1': '1 (매우 미흡)'
                    }[evaluation.score] || evaluation.score;
                    
                    // 세부 점수 표시
                    let detailScoresHTML = '';
                    if (evaluation.technical || evaluation.communication) {
                        detailScoresHTML = '<div class="detail-scores">';
                        if (evaluation.technical) {
                            detailScoresHTML += `<span class="detail-score">기술 ${evaluation.technical}</span>`;
                        }
                        if (evaluation.communication) {
                            detailScoresHTML += `<span class="detail-score">소통 ${evaluation.communication}</span>`;
                        }
                        detailScoresHTML += '</div>';
                    }
                    
                    const formattedDate = new Date(evaluation.date).toLocaleDateString('ko-KR', {
                        year: 'numeric',
                        month: '2-digit',
                        day: '2-digit',
                        hour: '2-digit',
                        minute: '2-digit'
                    });
                    
                    return `
                        <tr>
                            <td>
                                <div style="font-weight: 500;">
                                    <a href="#" class="view-details" data-id="${applicant ? applicant.id : ''}">${applicantName}</a>
                                </div>
                            </td>
                            <td>${applicantPosition}</td>
                            <td>
                                <div style="font-size: 13px;">${formattedDate}</div>
                            </td>
                            <td>
                                <span class="score-badge ${scoreClass}">${scoreText}</span>
                            </td>
                            <td>
                                ${detailScoresHTML}
                            </td>
                            <td>
                                <div class="evaluation-comment-preview" title="${evaluation.comment}">
                                    ${evaluation.comment}
                                </div>
                            </td>
                            <td>
                                <div class="evaluation-actions">
                                    <button class="btn btn-sm btn-primary evaluation-view-btn" data-evaluation-id="${evaluation.id}" title="상세보기">
                                        👁️
                                    </button>
                                    <button class="btn btn-sm btn-outline evaluation-edit-btn" data-evaluation-id="${evaluation.id}" title="수정">
                                        ✏️
                                    </button>
                                    <button class="btn btn-sm btn-danger evaluation-delete-btn" data-evaluation-id="${evaluation.id}" title="삭제">
                                        🗑️
                                    </button>
                                </div>
                            </td>
                        </tr>
                    `;
                }).join('');
                
                // 정렬 헤더 업데이트
                updateEvaluationSortHeaders();
                
                // 페이지네이션 렌더링
                renderEvaluationPagination(totalPages);
            }

            // 평가 정렬 헤더 업데이트
            function updateEvaluationSortHeaders() {
                document.querySelectorAll('#all-evaluations-table .sortable').forEach(th => {
                    const arrow = th.querySelector('.sort-arrow');
                    const column = th.dataset.sort;
                    
                    if (column === evaluationSortColumn) {
                        arrow.textContent = evaluationSortDirection === 'asc' ? '↑' : '↓';
                        th.style.background = '#f8fafc';
                    } else {
                        arrow.textContent = '⇅';
                        th.style.background = '';
                    }
                });
            }

            // 평가 페이지네이션 렌더링
            function renderEvaluationPagination(totalPages) {
                const paginationControls = document.getElementById('evaluation-pagination-controls');
                if (!paginationControls) return;
                
                if (totalPages <= 1) {
                    paginationControls.style.display = 'none';
                    return;
                }
                
                paginationControls.style.display = 'flex';
                
                let paginationHTML = '<div class="pagination-wrapper">';
                
                // 이전 페이지 버튼
                paginationHTML += `
                    <button class="pagination-btn evaluation-page-btn ${evaluationCurrentPage === 1 ? 'disabled' : ''}" 
                            data-page="${evaluationCurrentPage - 1}" 
                            ${evaluationCurrentPage === 1 ? 'disabled' : ''}>
                        ‹ 이전
                    </button>
                `;
                
                // 페이지 번호들
                const startPage = Math.max(1, evaluationCurrentPage - 2);
                const endPage = Math.min(totalPages, evaluationCurrentPage + 2);
                
                for (let i = startPage; i <= endPage; i++) {
                    paginationHTML += `
                        <button class="pagination-btn evaluation-page-btn ${i === evaluationCurrentPage ? 'active' : ''}" 
                                data-page="${i}">
                            ${i}
                        </button>
                    `;
                }
                
                // 다음 페이지 버튼
                paginationHTML += `
                    <button class="pagination-btn evaluation-page-btn ${evaluationCurrentPage === totalPages ? 'disabled' : ''}" 
                            data-page="${evaluationCurrentPage + 1}" 
                            ${evaluationCurrentPage === totalPages ? 'disabled' : ''}>
                        다음 ›
                    </button>
                `;
                
                paginationHTML += '</div>';
                paginationControls.innerHTML = paginationHTML;
            }

            // 평가 페이지 변경
            function changeEvaluationPage(page) {
                const filteredEvaluations = getFilteredEvaluations();
                const totalPages = Math.ceil(filteredEvaluations.length / evaluationsPerPage);
                
                if (page >= 1 && page <= totalPages) {
                    evaluationCurrentPage = page;
                    renderAllEvaluationsPage();
                }
            }

            // 평가 테이블 정렬
            function sortEvaluationTable(column) {
                if (evaluationSortColumn === column) {
                    evaluationSortDirection = evaluationSortDirection === 'asc' ? 'desc' : 'asc';
                } else {
                    evaluationSortColumn = column;
                    evaluationSortDirection = 'asc';
                }
                evaluationCurrentPage = 1;
                renderAllEvaluationsPage();
            }

            // 기존 이벤트 리스너들을 새로운 변수로 업데이트
            UI.evalSearchInput.addEventListener('input', () => { 
                clearTimeout(evaluationDebounceTimer); 
                evaluationDebounceTimer = setTimeout(() => {
                    evaluationSearchTerm = UI.evalSearchInput.value;
                    evaluationCurrentPage = 1;
                    renderAllEvaluationsPage();
                }, 150); 
            });
            
            UI.evalScoreFilter.addEventListener('change', () => {
                evaluationScoreFilter = UI.evalScoreFilter.value;
                evaluationCurrentPage = 1;
                renderAllEvaluationsPage();
            });

            // 새로운 필터 이벤트 리스너들
            document.getElementById('eval-position-filter')?.addEventListener('change', () => {
                evaluationPositionFilter = document.getElementById('eval-position-filter').value;
                evaluationCurrentPage = 1;
                renderAllEvaluationsPage();
            });

            document.getElementById('eval-date-filter')?.addEventListener('change', () => {
                evaluationDateFilter = document.getElementById('eval-date-filter').value;
                evaluationCurrentPage = 1;
                renderAllEvaluationsPage();
            });

            document.getElementById('evaluations-per-page')?.addEventListener('change', () => {
                evaluationsPerPage = parseInt(document.getElementById('evaluations-per-page').value);
                evaluationCurrentPage = 1;
                renderAllEvaluationsPage();
            });

            // 평가 상세보기 함수
            function viewEvaluationDetail(evaluationId) {
                const evaluations = getData(DB_EVALUATIONS);
                const applicants = getData(DB_APPLICANTS);
                const evaluation = evaluations.find(e => e.id == evaluationId);
                
                if (!evaluation) {
                    showNotification('평가 기록을 찾을 수 없습니다.', 'error');
                    return;
                }
                
                const applicant = applicants.find(a => a.id == evaluation.applicantId);
                const applicantName = applicant ? applicant.name : '삭제된 지원자';
                const applicantPosition = applicant ? (applicant.position || '포지션 미정') : '포지션 미정';
                
                const scoreText = {
                    '5': '5점 - 최상 (매우 우수함)',
                    '4': '4점 - 우수 (기대 이상)',
                    '3': '3점 - 보통 (기대 수준)',
                    '2': '2점 - 미흡 (기대 이하)',
                    '1': '1점 - 매우 미흡 (부적합)'
                }[evaluation.score] || evaluation.score + '점';
                
                const formattedDate = new Date(evaluation.date).toLocaleDateString('ko-KR', {
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric',
                    weekday: 'long',
                    hour: '2-digit',
                    minute: '2-digit'
                });
                
                let detailScoresHTML = '';
                if (evaluation.technical || evaluation.communication) {
                    detailScoresHTML = `
                        <div class="detail-scores-section">
                            <h4>세부 평가 점수</h4>
                            <div class="detail-scores-grid">
                                ${evaluation.technical ? `<div class="detail-score-item">
                                    <span class="detail-score-label">기술 역량</span>
                                    <span class="detail-score-value">${evaluation.technical}점</span>
                                </div>` : ''}
                                ${evaluation.communication ? `<div class="detail-score-item">
                                    <span class="detail-score-label">소통 능력</span>
                                    <span class="detail-score-value">${evaluation.communication}점</span>
                                </div>` : ''}
                            </div>
                        </div>
                    `;
                }
                
                document.getElementById('evaluation-detail-content').innerHTML = `
                    <div class="evaluation-detail-header">
                        <div class="evaluation-applicant-info">
                            <div class="evaluation-applicant-name">${applicantName}</div>
                            <div class="evaluation-applicant-position">${applicantPosition}</div>
                        </div>
                        <div class="evaluation-overall-score">
                            <div class="score-badge score-${evaluation.score} large">${scoreText}</div>
                        </div>
                    </div>
                    
                    <div class="evaluation-meta">
                        <div class="evaluation-date">
                            <span class="meta-label">평가일시</span>
                            <span class="meta-value">${formattedDate}</span>
                        </div>
                    </div>
                    
                    ${detailScoresHTML}
                    
                    <div class="evaluation-comment-section">
                        <h4>종합 평가 의견</h4>
                        <div class="evaluation-comment-full">
                            ${evaluation.comment.replace(/\n/g, '<br>')}
                        </div>
                    </div>
                    
                    <div class="evaluation-detail-actions">
                        <button class="btn btn-outline" onclick="editEvaluation('${evaluation.id}')">
                            ✏️ 수정하기
                        </button>
                        <button class="btn btn-danger" onclick="deleteEvaluation('${evaluation.id}')">
                            🗑️ 삭제하기
                        </button>
                        ${applicant ? `<button class="btn btn-primary" onclick="openApplicantDetailModal('${applicant.id}')">
                            👤 지원자 상세보기
                        </button>` : ''}
                    </div>
                `;
                
                document.getElementById('evaluation-detail-modal').style.display = 'block';
            }

            // 평가 수정 함수
            function editEvaluation(evaluationId) {
                const evaluations = getData(DB_EVALUATIONS);
                const applicants = getData(DB_APPLICANTS);
                const evaluation = evaluations.find(e => e.id == evaluationId);
                
                if (!evaluation) {
                    showNotification('평가 기록을 찾을 수 없습니다.', 'error');
                    return;
                }
                
                const applicant = applicants.find(a => a.id == evaluation.applicantId);
                
                // 모달 제목 변경
                document.getElementById('evaluation-modal-title').textContent = '평가 수정';
                
                // 지원자 정보 표시
                if (applicant) {
                    document.getElementById('eval-applicant-name').textContent = applicant.name;
                    document.getElementById('eval-applicant-position').textContent = applicant.position || '포지션 미정';
                    document.getElementById('eval-applicant-info').style.display = 'block';
                }
                
                // 폼 필드 채우기
                document.getElementById('eval-id').value = evaluation.id;
                document.getElementById('eval-applicant-id').value = evaluation.applicantId;
                document.getElementById('eval-score').value = evaluation.score;
                document.getElementById('eval-technical').value = evaluation.technical || '';
                document.getElementById('eval-communication').value = evaluation.communication || '';
                document.getElementById('eval-comment').value = evaluation.comment;
                
                // 상세보기 모달 닫기
                document.getElementById('evaluation-detail-modal').style.display = 'none';
                
                // 편집 모달 열기
                document.getElementById('evaluation-modal').style.display = 'block';
            }

            // 평가 삭제 함수
            function deleteEvaluation(evaluationId) {
                if (confirm('이 평가 기록을 정말 삭제하시겠습니까?')) {
                    let evaluations = getData(DB_EVALUATIONS);
                    evaluations = evaluations.filter(e => e.id != evaluationId);
                    setData(DB_EVALUATIONS, evaluations);
                    
                    renderAllEvaluationsPage();
                    renderDashboard();
                    renderKanbanBoard();
                    
                    // 상세보기 모달 닫기
                    document.getElementById('evaluation-detail-modal').style.display = 'none';
                    
                    showNotification('평가 기록이 삭제되었습니다.', 'success');
                }
            }

            // 평가 관련 이벤트 델리게이션
            document.body.addEventListener('click', (e) => {
                // 평가 테이블 정렬
                if (e.target.closest('#all-evaluations-table .sortable')) {
                    const th = e.target.closest('.sortable');
                    const column = th.dataset.sort;
                    sortEvaluationTable(column);
                }
                
                // 평가 액션 버튼들
                else if (e.target.classList.contains('evaluation-view-btn') || e.target.closest('.evaluation-view-btn')) {
                    const button = e.target.classList.contains('evaluation-view-btn') ? e.target : e.target.closest('.evaluation-view-btn');
                    const evaluationId = button.dataset.evaluationId;
                    e.preventDefault();
                    e.stopPropagation();
                    viewEvaluationDetail(evaluationId);
                }
                
                else if (e.target.classList.contains('evaluation-edit-btn') || e.target.closest('.evaluation-edit-btn')) {
                    const button = e.target.classList.contains('evaluation-edit-btn') ? e.target : e.target.closest('.evaluation-edit-btn');
                    const evaluationId = button.dataset.evaluationId;
                    e.preventDefault();
                    e.stopPropagation();
                    editEvaluation(evaluationId);
                }
                
                else if (e.target.classList.contains('evaluation-delete-btn') || e.target.closest('.evaluation-delete-btn')) {
                    const button = e.target.classList.contains('evaluation-delete-btn') ? e.target : e.target.closest('.evaluation-delete-btn');
                    const evaluationId = button.dataset.evaluationId;
                    e.preventDefault();
                    e.stopPropagation();
                    deleteEvaluation(evaluationId);
                }
                
                // 평가 페이지네이션
                else if ((e.target.classList.contains('evaluation-page-btn') || e.target.closest('.evaluation-page-btn')) && !e.target.disabled) {
                    const button = e.target.classList.contains('evaluation-page-btn') ? e.target : e.target.closest('.evaluation-page-btn');
                    if (!button.disabled) {
                        const page = parseInt(button.dataset.page);
                        changeEvaluationPage(page);
                    }
                }
            });

            // 평가 추가 버튼
            document.getElementById('add-evaluation-btn')?.addEventListener('click', () => {
                // 폼 초기화
                document.getElementById('evaluation-form').reset();
                document.getElementById('eval-id').value = '';
                document.getElementById('eval-applicant-info').style.display = 'none';
                document.getElementById('evaluation-modal-title').textContent = '평가 작성';
                
                // 지원자 선택 (임시)
                const applicants = getData(DB_APPLICANTS);
                if (applicants.length > 0) {
                    // 첫 번째 지원자를 기본으로 설정 (추후 개선 가능)
                    document.getElementById('eval-applicant-id').value = applicants[0].id;
                    document.getElementById('eval-applicant-name').textContent = applicants[0].name;
                    document.getElementById('eval-applicant-position').textContent = applicants[0].position || '포지션 미정';
                    document.getElementById('eval-applicant-info').style.display = 'block';
                }
                
                openModal(UI.evaluationModal);
            });

            // 전역 함수로 등록
            window.viewEvaluationDetail = viewEvaluationDetail;
            window.editEvaluation = editEvaluation;
            window.deleteEvaluation = deleteEvaluation;
            window.changeEvaluationPage = changeEvaluationPage;
            window.sortEvaluationTable = sortEvaluationTable;

            function updateBulkActionUI() { 
                const bulkActionsGroup = document.getElementById('bulk-actions-group');
                if (bulkActionsGroup) {
                    bulkActionsGroup.style.display = selectedApplicantIds.size > 0 ? 'block' : 'none';
                }
                
                // 기존 UI 호환성 유지
                if (UI.bulkActionsDiv) {
                    UI.bulkActionsDiv.style.display = selectedApplicantIds.size > 0 ? 'flex' : 'none';
                }
            }
            function updateSelectAllCheckboxState() {
                const visible = [...UI.applicantsTableBody.querySelectorAll('.applicant-checkbox')]; if (visible.length === 0) { UI.selectAllCheckbox.checked = UI.selectAllCheckbox.indeterminate = false; return; }
                const allSelected = visible.every(cb => cb.checked);
                UI.selectAllCheckbox.checked = allSelected;
                UI.selectAllCheckbox.indeterminate = !allSelected && [...selectedApplicantIds].some(id => visible.find(cb => cb.dataset.id === id));
            }
            UI.selectAllCheckbox.addEventListener('change', (e) => {
                UI.applicantsTableBody.querySelectorAll('.applicant-checkbox').forEach(cb => {
                    cb.checked = e.target.checked;
                    if (e.target.checked) selectedApplicantIds.add(cb.dataset.id); else selectedApplicantIds.delete(cb.dataset.id);
                }); updateBulkActionUI();
            });
            UI.applicantsTableBody.addEventListener('change', (e) => {
                if (e.target.classList.contains('applicant-checkbox')) {
                    if (e.target.checked) selectedApplicantIds.add(e.target.dataset.id); else selectedApplicantIds.delete(e.target.dataset.id);
                    updateSelectAllCheckboxState(); updateBulkActionUI();
                }
            });
            document.getElementById('bulk-delete-btn').addEventListener('click', () => {
                if (selectedApplicantIds.size > 0 && confirm(`${selectedApplicantIds.size}명의 지원자를 정말 삭제하시겠습니까? 관련 데이터가 모두 삭제됩니다.`)) {
                    const numDeleted = selectedApplicantIds.size;
                    setData(DB_APPLICANTS, getData(DB_APPLICANTS).filter(app => !selectedApplicantIds.has(String(app.id))));
                    setData(DB_SCHEDULES, getData(DB_SCHEDULES).filter(s => !selectedApplicantIds.has(String(s.applicantId))));
                    setData(DB_EVALUATIONS, getData(DB_EVALUATIONS).filter(ev => !selectedApplicantIds.has(String(ev.applicantId))));
                    selectedApplicantIds.clear();
                    renderApplicants(); renderSchedules(); renderKanbanBoard(); renderAllEvaluationsPage(); renderDashboard();
                    showNotification(`${numDeleted}명의 지원자 및 관련 데이터가 삭제되었습니다.`, 'success');
                }
            });
            document.getElementById('bulk-schedule-btn').addEventListener('click', () => {
                if (selectedApplicantIds.size > 0) { document.getElementById('bulk-count').textContent = selectedApplicantIds.size; openModal(UI.bulkScheduleModal); }
            });
            document.getElementById('bulk-schedule-form').addEventListener('submit', (e) => {
                e.preventDefault(); let schedules = getData(DB_SCHEDULES); let applicants = getData(DB_APPLICANTS);
                const info = { datetime: e.target.querySelector('#bulk-schedule-datetime').value, interviewer: e.target.querySelector('#bulk-schedule-interviewer').value };
                selectedApplicantIds.forEach(id => {
                    schedules.push({ id: Date.now() + Math.random(), applicantId: id, ...info });
                    applicants = applicants.map(app => app.id == id ? { ...app, status: '인터뷰' } : app);
                });
                setData(DB_SCHEDULES, schedules); setData(DB_APPLICANTS, applicants); selectedApplicantIds.clear();
                closeModal(UI.bulkScheduleModal);
                renderSchedules(); renderApplicants(); renderKanbanBoard(); renderCalendar();
                showNotification('일괄 인터뷰 등록 및 상태 변경 완료.', 'success');
            });
            document.getElementById('bulk-status-change-btn').addEventListener('click', () => {
                if (selectedApplicantIds.size === 0) return; document.getElementById('bulk-status-count').textContent = selectedApplicantIds.size;
                document.getElementById('bulk-new-status').innerHTML = STATUS_OPTIONS.map(s => `<option value="${s}">${s}</option>`).join('');
                openModal(UI.bulkStatusModal);
            });
            document.getElementById('bulk-status-form').addEventListener('submit', (e) => {
                e.preventDefault(); const newStatus = document.getElementById('bulk-new-status').value; if (!newStatus) return;
                let apps = getData(DB_APPLICANTS).map(app => selectedApplicantIds.has(String(app.id)) ? { ...app, status: newStatus } : app);
                setData(DB_APPLICANTS, apps); selectedApplicantIds.clear();
                closeModal(UI.bulkStatusModal); renderApplicants(); renderKanbanBoard();
                showNotification('상태가 일괄 변경되었습니다.', 'success');
            });

            function renderPaginationControls(totalItems) {
                const pageControls = document.getElementById('pagination-controls'); pageControls.innerHTML = ''; const totalPages = Math.ceil(totalItems / rowsPerPage); if (totalPages <= 1) return;
                pageControls.innerHTML = `<button class="btn btn-outline" id="prev-page">이전</button><span style="margin: 0 10px; vertical-align: middle;"> ${currentPage} / ${totalPages} </span><button class="btn btn-outline" id="next-page">다음</button>`;
                const prev = document.getElementById('prev-page'), next = document.getElementById('next-page');
                prev.disabled = currentPage === 1; next.disabled = currentPage === totalPages;
                prev.onclick = () => { currentPage--; renderApplicants(); }; next.onclick = () => { currentPage++; renderApplicants(); };
            }

            UI.searchInput.addEventListener('input', () => { clearTimeout(debounceTimer); debounceTimer = setTimeout(() => { currentPage = 1; selectedApplicantIds.clear(); renderApplicants(); }, 150); });
            UI.statusFilter.addEventListener('change', () => { currentPage = 1; selectedApplicantIds.clear(); renderApplicants(); });
            UI.positionFilter.addEventListener('change', () => { currentPage = 1; selectedApplicantIds.clear(); renderApplicants(); });

            document.querySelectorAll('#applicants-table th[data-sort]').forEach(header => {
                header.addEventListener('click', () => {
                    const newSort = header.dataset.sort;
                    sortDirection = sortColumn === newSort ? (sortDirection === 'asc' ? 'desc' : 'asc') : 'asc';
                    sortColumn = newSort; renderApplicants();
                });
            });

            function updateSortHeaders() {
                document.querySelectorAll('#applicants-table th[data-sort]').forEach(header => {
                    const arrow = header.querySelector('.sort-arrow');
                    const isSorted = header.dataset.sort === sortColumn;
                    
                    header.classList.toggle('sorted', isSorted);
                    
                    if (isSorted) {
                        arrow.textContent = sortDirection === 'asc' ? '↑' : '↓';
                        arrow.style.opacity = '1';
                    } else {
                        arrow.textContent = '⇅';
                        arrow.style.opacity = '0.6';
                    }
                });
            }

            document.getElementById('add-applicant-btn').addEventListener('click', () => {
                document.getElementById('modal-title').textContent = '신규 지원자 추가'; UI.applicantForm.reset();
                UI.applicantForm.querySelector('#applicant-id').value = '';
                UI.applicantForm.querySelector('#status').innerHTML = STATUS_OPTIONS.map(s => `<option value="${s}">${s}</option>`).join('');
                openModal(UI.applicantModal);
            });
            
            // --- [수정] 지원자 추가/수정 시 연락처 중복 확인 ---
            UI.applicantForm.addEventListener('submit', (e) => {
                e.preventDefault(); 
                const id = e.target.querySelector('#applicant-id').value;
                const phone = e.target.querySelector('#phone').value.trim();
                let apps = getData(DB_APPLICANTS);

                // 새 지원자 등록 시에만 연락처 중복 검사 (연락처가 비어있지 않은 경우)
                if (!id && phone) {
                    if (apps.some(app => app.phone === phone)) {
                        showNotification('이미 등록된 연락처입니다.', 'error');
                        return; // 함수 종료
                    }
                }

                const applicantData = apps.find(a => a.id == id);
                const appData = {
                    id: id || Date.now(), 
                    name: e.target.querySelector('#name').value, 
                    email: e.target.querySelector('#email').value, 
                    phone: phone,
                    position: e.target.querySelector('#position').value, 
                    status: e.target.querySelector('#status').value, 
                    notes: e.target.querySelector('#notes').value,
                    created: id ? applicantData.created : new Date().toISOString().split('T')[0]
                };

                if (id) { 
                    apps = apps.map(app => app.id == id ? appData : app); 
                    showNotification('지원자 정보가 수정되었습니다.', 'success');
                } else { 
                    apps.push(appData); 
                    showNotification('새 지원자가 추가되었습니다.', 'success'); 
                }
                setData(DB_APPLICANTS, apps); 
                if(!id) currentPage=1;
                renderApplicants(); 
                renderKanbanBoard();
                closeModal(UI.applicantModal);
            });

            // --- [수정] CSV 업로드 시 지원 포지션 N/A 문제 수정 및 에러 처리 강화 ---
            document.getElementById('csv-upload').addEventListener('change', (event) => {
                const file = event.target.files[0]; 
                if (!file) return; 
                
                // 파일 크기 검증 (1MB 제한)
                if (file.size > 1000000) {
                    showNotification('파일 크기가 1MB를 초과합니다. 더 작은 파일을 선택해주세요.', 'error');
                    event.target.value = ''; // input 필드 초기화
                    return;
                }
                
                // 파일 타입 검증
                if (!file.name.toLowerCase().endsWith('.csv')) {
                    showNotification('CSV 파일만 업로드 가능합니다.', 'error');
                    event.target.value = ''; // input 필드 초기화
                    return;
                }
                
                const reader = new FileReader();
                reader.onload = (e) => {
                    try {
                        // 파일 내용 크기 검증
                        if (e.target.result.length > 1000000) {
                            showNotification('파일 내용이 너무 큽니다. 1MB 이하의 파일을 사용해주세요.', 'error');
                            event.target.value = ''; // input 필드 초기화
                            return;
                        }
                        
                        const lines = e.target.result.split('\n').filter(l => l.trim()); 
                        if (lines.length === 0) { 
                            showNotification('CSV 파일이 비어있습니다.', 'error'); 
                            event.target.value = ''; // input 필드 초기화
                            return; 
                        }
                        
                        const header = lines.shift().trim().split(',').map(h => h.trim().toLowerCase());
                        console.log('CSV 헤더:', header); // 디버깅용
                        
                        // CSV 헤더 유효성 검사
                        if (header.length < 2) {
                            showNotification('CSV 헤더가 올바르지 않습니다. 최소 2개 이상의 컬럼이 필요합니다.', 'error');
                            event.target.value = ''; // input 필드 초기화
                            return;
                        }
                        
                        // 헤더 인덱스 찾기 - 더 유연하게 처리
                        const nameIdx = header.findIndex(h => h.includes('name') || h.includes('이름'));
                        const emailIdx = header.findIndex(h => h.includes('email') || h.includes('이메일'));
                        const phoneIdx = header.findIndex(h => h.includes('phone') || h.includes('연락'));
                        const positionIdx = header.findIndex(h => h.includes('position') || h.includes('포지션'));
                        const statusIdx = header.findIndex(h => h.includes('status') || h.includes('상태'));
                        
                        console.log('인덱스들:', {nameIdx, emailIdx, phoneIdx, positionIdx, statusIdx}); // 디버깅용
                        
                        if (nameIdx === -1 || emailIdx === -1) { 
                            showNotification('CSV에 name/이름, email/이메일 헤더는 필수입니다.', 'error'); 
                            event.target.value = ''; // input 필드 초기화
                            return; 
                        }
                        
                        let apps = getData(DB_APPLICANTS); 
                        let successCount = 0;
                        let skippedCount = 0;

                        lines.forEach((line, index) => {
                            const data = line.trim().split(',').map(d => d.trim());
                            console.log(`라인 ${index + 1} 데이터:`, data); // 디버깅용
                            
                            if (data.length < Math.max(nameIdx, emailIdx) + 1) {
                                console.log(`라인 ${index + 1} 건너뛰기: 데이터 부족`);
                                return;
                            }

                            const name = data[nameIdx] || '';
                            const email = data[emailIdx] || '';
                            const phone = phoneIdx !== -1 ? (data[phoneIdx] || '').trim() : '';
                            const position = positionIdx !== -1 ? (data[positionIdx] || '').trim() : '';
                            const status = statusIdx !== -1 ? (data[statusIdx] || '').trim() : '서류접수';

                            console.log(`처리된 데이터:`, {name, email, phone, position, status}); // 디버깅용

                            // 이름이나 이메일이 없으면 건너뛰기
                            if (!name || !email) {
                                skippedCount++;
                                console.log(`라인 ${index + 1} 건너뛰기: 이름 또는 이메일 없음`);
                                return;
                            }

                            // 연락처가 있고, 이미 등록된 연락처라면 건너뛰기
                            if (phone && apps.some(app => app.phone === phone)) {
                                skippedCount++;
                                console.log(`라인 ${index + 1} 건너뛰기: 연락처 중복`);
                                return;
                            }
                            
                            apps.push({
                                id: Date.now() + Math.random() + index, 
                                name, 
                                email, 
                                phone,
                                position: position, // position 값 그대로 사용
                                status: status || '서류접수', 
                                notes: '',
                                created: new Date().toISOString().split('T')[0]
                            }); 
                            successCount++;
                            console.log(`라인 ${index + 1} 성공적으로 추가됨`);
                        });
                        
                        setData(DB_APPLICANTS, apps); 
                        currentPage = 1; 
                        renderApplicants(); 
                        renderKanbanBoard();
                        let message = `${successCount}명 등록 완료.`;
                        if (skippedCount > 0) {
                            message += ` (중복 및 필수 정보 누락으로 ${skippedCount}명 제외)`;
                        }
                        showNotification(message, 'success');
                    } catch (error) { 
                        console.error('CSV 처리 오류:', error);
                        showNotification('CSV 파일 처리 중 오류가 발생했습니다. 파일 형식을 확인해주세요.', 'error'); 
                        event.target.value = ''; // input 필드 초기화
                    }
                };
                reader.readAsText(file, "UTF-8"); 
                event.target.value = '';
            });

            document.getElementById('export-data-btn').addEventListener('click', () => {
                const allData = { applicants: getData(DB_APPLICANTS), schedules: getData(DB_SCHEDULES), evaluations: getData(DB_EVALUATIONS), exportDate: new Date().toISOString(), version: "2.0" };
                const blob = new Blob([JSON.stringify(allData, null, 2)], {type: "application/json"});
                const link = document.createElement('a'); link.href = URL.createObjectURL(blob);
                link.download = `ats_backup_${new Date().toISOString().slice(0, 10)}.json`; link.click(); URL.revokeObjectURL(link.href);
                showNotification('데이터 백업이 완료되었습니다.', 'success');
            });

            document.getElementById('import-data-input').addEventListener('change', (event) => {
                const file = event.target.files[0]; if (!file || !confirm("주의! 현재 모든 데이터가 복구 파일로 대체됩니다. 계속하시겠습니까?")) { event.target.value = ''; return; }
                const reader = new FileReader();
                reader.onload = (e) => {
                    try {
                        const data = JSON.parse(e.target.result);
                        setData(DB_APPLICANTS, data.applicants || []); setData(DB_SCHEDULES, data.schedules || []); setData(DB_EVALUATIONS, data.evaluations || []);
                        currentPage = 1; renderApplicants(); renderSchedules(); renderKanbanBoard(); renderAllEvaluationsPage(); renderDashboard();
                        showNotification('데이터 복구 완료.', 'success');
                    } catch (err) { showNotification('파일 형식이 잘못되었습니다.', 'error'); } finally { event.target.value = ''; }
                };
                reader.readAsText(file);
            });

            document.getElementById('download-template-btn').addEventListener('click', () => {
                const csvContent = `name,email,phone,position,status\n홍길동,gildong@example.com,010-1234-5678,프론트엔드 개발자,서류접수\n김영희,younghee@example.com,010-9876-5432,백엔드 개발자,서류접수`;
                const blob = new Blob(["\uFEFF" + csvContent], { type: 'text/csv;charset=utf-8;' });
                const link = document.createElement('a'); link.href = URL.createObjectURL(blob); link.download = 'applicant_template.csv'; link.click(); URL.revokeObjectURL(link.href);
                showNotification('템플릿 파일이 다운로드되었습니다.', 'success');
            });

            function renderKanbanBoard() { 
                const applicants = getData(DB_APPLICANTS); 
                const schedules = getData(DB_SCHEDULES);
                const evaluations = getData(DB_EVALUATIONS);
                
                // 검색 및 필터 적용
                const searchTerm = document.getElementById('kanban-search')?.value.toLowerCase() || '';
                const positionFilter = document.getElementById('kanban-position-filter')?.value || '';
                
                let filteredApplicants = applicants.filter(app => {
                    const nameMatch = !searchTerm || app.name.toLowerCase().includes(searchTerm);
                    const positionMatch = !positionFilter || (app.position && app.position === positionFilter);
                    return nameMatch && positionMatch;
                });
                
                // 통계 업데이트
                updateKanbanStats(filteredApplicants);
                
                // 포지션 필터 업데이트
                updateKanbanPositionFilter(applicants);
                
                // 각 상태별 칸반 컬럼 렌더링
                STATUS_OPTIONS.forEach(status => { 
                    const statusApplicants = filteredApplicants.filter(app => app.status === status);
                    const columnBody = document.getElementById(`column-${status}`);
                    const countElement = document.getElementById(`count-${status}`);
                    
                    // 카운트 업데이트
                    if (countElement) {
                        countElement.textContent = statusApplicants.length;
                        countElement.style.background = statusApplicants.length > 0 ? 'var(--primary-color)' : '#e5e7eb';
                        countElement.style.color = statusApplicants.length > 0 ? 'white' : '#6b7280';
                    }
                    
                    if (!columnBody) return;
                    
                    // 빈 상태 처리
                    if (statusApplicants.length === 0) {
                        const emptyState = columnBody.querySelector('.kanban-empty-state');
                        if (emptyState) {
                            emptyState.style.display = 'block';
                        }
                        // 기존 카드들 제거
                        const existingCards = columnBody.querySelectorAll('.kanban-card');
                        existingCards.forEach(card => card.remove());
                        return;
                    }
                    
                    // 빈 상태 숨기기
                    const emptyState = columnBody.querySelector('.kanban-empty-state');
                    if (emptyState) {
                        emptyState.style.display = 'none';
                    }
                    
                    // 기존 카드들 제거
                    const existingCards = columnBody.querySelectorAll('.kanban-card');
                    existingCards.forEach(card => card.remove());
                    
                    // 새 카드들 생성
                    statusApplicants.forEach(app => {
                        const card = createKanbanCard(app, schedules, evaluations);
                        columnBody.appendChild(card);
                    });
                });
                
                // 드래그 앤 드롭 기능 설정
                setupKanbanDragAndDrop();
            }
            
            // 칸반 카드 생성 함수
            function createKanbanCard(app, schedules, evaluations) {
                const card = document.createElement('div');
                card.className = 'kanban-card';
                card.setAttribute('data-applicant-id', app.id);
                card.setAttribute('draggable', 'true');
                
                // 관련 일정과 평가 찾기
                            const recentSchedule = schedules
                                .filter(s => s.applicantId == app.id)
                                .sort((a, b) => new Date(b.datetime) - new Date(a.datetime))[0];
                            
                            const recentEvaluation = evaluations
                                .filter(e => e.applicantId == app.id)
                                .sort((a, b) => new Date(b.date) - new Date(a.date))[0];
                            
                // 메타 정보 구성
                let metaInfo = '';
                
                            if (recentSchedule) {
                                const scheduleDate = new Date(recentSchedule.datetime);
                                const isUpcoming = scheduleDate > new Date();
                    const dateStr = scheduleDate.toLocaleDateString('ko-KR', {
                        month: 'short',
                        day: 'numeric',
                        hour: '2-digit',
                        minute: '2-digit'
                    });
                    metaInfo += `
                        <div class="kanban-card-info schedule">
                            <span>📅</span>
                            <span>${dateStr} ${isUpcoming ? '예정' : '완료'}</span>
                        </div>`;
                }
                
                            if (recentEvaluation) {
                    const score = parseInt(recentEvaluation.score);
                    metaInfo += `
                        <div class="kanban-card-info evaluation">
                            <span>⭐</span>
                            <span>${score}/5점</span>
                        </div>`;
                }
                
                if (app.notes && app.notes.trim()) {
                    const shortNote = app.notes.substring(0, 30) + (app.notes.length > 30 ? '...' : '');
                    metaInfo += `
                        <div class="kanban-card-info note">
                            <span>💭</span>
                            <span>${shortNote}</span>
                        </div>`;
                }
                
                card.innerHTML = `
                    <div class="kanban-card-header">
                        <div class="kanban-card-name">${app.name}</div>
                                    </div>
                    <div class="kanban-card-position">${app.position || '포지션 미지정'}</div>
                    <div class="kanban-card-meta">
                        ${metaInfo}
                                        </div>
                    <div class="kanban-card-date">
                        등록: ${new Date(app.created || new Date()).toLocaleDateString('ko-KR')}
                                </div>`;
                            
                // 클릭 이벤트
                card.addEventListener('click', (e) => {
                    if (!e.target.closest('.kanban-card').classList.contains('dragging')) {
                        openApplicantDetailModal(app.id);
                    }
                });
                
                return card;
            }
            
            // 칸반 통계 업데이트
            function updateKanbanStats(applicants) {
                const statusCounts = STATUS_OPTIONS.reduce((acc, status) => {
                    acc[status] = applicants.filter(a => a.status === status).length;
                    return acc;
                }, {});
                
                const elements = {
                    'stat-total': applicants.length,
                    'stat-documents': statusCounts['서류접수'],
                    'stat-interviews': statusCounts['인터뷰'],
                    'stat-success': statusCounts['최종합격'],
                    'stat-failed': statusCounts['불합격']
                };
                
                Object.entries(elements).forEach(([id, value]) => {
                    const element = document.getElementById(id);
                    if (element) {
                        element.textContent = value;
                        // 숫자 변화 애니메이션 효과
                        element.style.transform = 'scale(1.1)';
                        setTimeout(() => {
                            element.style.transform = 'scale(1)';
                        }, 200);
                    }
                });
            }
            
            // 칸반 포지션 필터 업데이트
            function updateKanbanPositionFilter(applicants) {
                const positionFilter = document.getElementById('kanban-position-filter');
                if (!positionFilter) return;
                
                const positions = [...new Set(applicants.map(app => app.position).filter(p => p))];
                const currentValue = positionFilter.value;
                
                positionFilter.innerHTML = '<option value="">모든 포지션</option>' +
                    positions.map(pos => `<option value="${pos}">${pos}</option>`).join('');
                
                positionFilter.value = currentValue;
            }
            
            // 드래그 앤 드롭 설정
            function setupKanbanDragAndDrop() {
                const cards = document.querySelectorAll('.kanban-card');
                const columns = document.querySelectorAll('.kanban-column');
                
                cards.forEach(card => {
                    card.addEventListener('dragstart', (e) => {
                        card.classList.add('dragging');
                        e.dataTransfer.setData('text/plain', card.dataset.applicantId);
                    });
                    
                    card.addEventListener('dragend', () => {
                        card.classList.remove('dragging');
                    });
                });
                
                columns.forEach(column => {
                    column.addEventListener('dragover', (e) => {
                        e.preventDefault();
                        column.classList.add('drag-over');
                    });
                    
                    column.addEventListener('dragleave', () => {
                        column.classList.remove('drag-over');
                    });
                    
                    column.addEventListener('drop', (e) => {
                        e.preventDefault();
                        column.classList.remove('drag-over');
                        
                        const applicantId = e.dataTransfer.getData('text/plain');
                        const newStatus = column.dataset.status;
                        
                        // 상태 변경
                        changeApplicantStatusFromKanban(applicantId, newStatus);
                    });
                });
            }
            
            // 칸반에서 상태 변경
            function changeApplicantStatusFromKanban(applicantId, newStatus) {
                let applicants = getData(DB_APPLICANTS);
                const applicantIndex = applicants.findIndex(app => app.id == applicantId);
                
                if (applicantIndex !== -1) {
                    const oldStatus = applicants[applicantIndex].status;
                    if (oldStatus === newStatus) return; // 같은 상태면 무시
                    
                    applicants[applicantIndex].status = newStatus;
                    setData(DB_APPLICANTS, applicants);
                    
                    // UI 업데이트
                    renderKanbanBoard();
                    renderApplicants();
                    renderDashboard();
                    
                    // 성공 메시지
                    showNotification(`${applicants[applicantIndex].name}님의 상태가 "${oldStatus}"에서 "${newStatus}"로 변경되었습니다.`, 'success');
                }
            }

            let currentCalendarDate = new Date();
            function renderCalendar() {
                const schedules = getData(DB_SCHEDULES); const applicants = getData(DB_APPLICANTS);
                const calendarGrid = document.getElementById('calendar-grid'); const currentMonthElement = document.getElementById('current-month');
                const year = currentCalendarDate.getFullYear(); const month = currentCalendarDate.getMonth();
                currentMonthElement.textContent = `${year}년 ${month + 1}월`;
                calendarGrid.innerHTML = '';
                ['일', '월', '화', '수', '목', '금', '토'].forEach(day => {
                    const dayHeader = document.createElement('div'); dayHeader.className = 'calendar-header'; dayHeader.textContent = day; calendarGrid.appendChild(dayHeader);
                });
                const firstDay = new Date(year, month, 1); const startDate = new Date(firstDay); startDate.setDate(startDate.getDate() - firstDay.getDay());
                for (let i = 0; i < 42; i++) {
                    const currentDate = new Date(startDate); currentDate.setDate(startDate.getDate() + i);
                    const dayElement = document.createElement('div'); dayElement.className = 'calendar-day';
                    if (currentDate.getMonth() !== month) dayElement.classList.add('other-month');
                    if (currentDate.toDateString() === new Date().toDateString()) dayElement.classList.add('today');
                    dayElement.innerHTML = `<div class="calendar-day-number">${currentDate.getDate()}</div>`;
                    const daySchedules = schedules.filter(s => new Date(s.datetime).toDateString() === currentDate.toDateString());
                    daySchedules.forEach(schedule => {
                        const applicant = applicants.find(a => a.id == schedule.applicantId);
                        const eventElement = document.createElement('div'); eventElement.className = 'calendar-event';
                        const time = new Date(schedule.datetime);
                        eventElement.textContent = `${time.getHours().toString().padStart(2, '0')}:${time.getMinutes().toString().padStart(2, '0')} ${applicant ? applicant.name : ''}`;
                        eventElement.title = `${applicant ? applicant.name : '알수없음'} - 인터뷰 (${schedule.interviewer || 'N/A'})`;
                        eventElement.addEventListener('click', (e) => { e.stopPropagation(); if (applicant) openApplicantDetailModal(applicant.id); });
                        dayElement.appendChild(eventElement);
                    });
                    calendarGrid.appendChild(dayElement);
                }
            }
            document.getElementById('schedule-calendar-btn').addEventListener('click', () => {
                isCalendarView = true; document.getElementById('schedule-table-view').style.display = 'none'; document.getElementById('schedule-calendar-view').style.display = 'block';
                document.getElementById('schedule-calendar-btn').style.display = 'none'; document.getElementById('schedule-list-btn').style.display = 'inline-flex'; renderCalendar();
            });
            document.getElementById('schedule-list-btn').addEventListener('click', () => {
                isCalendarView = false; document.getElementById('schedule-table-view').style.display = 'block'; document.getElementById('schedule-calendar-view').style.display = 'none';
                document.getElementById('schedule-calendar-btn').style.display = 'inline-flex'; document.getElementById('schedule-list-btn').style.display = 'none'; renderSchedules();
            });
            document.getElementById('prev-month').addEventListener('click', () => { currentCalendarDate.setMonth(currentCalendarDate.getMonth() - 1); renderCalendar(); });
            document.getElementById('next-month').addEventListener('click', () => { currentCalendarDate.setMonth(currentCalendarDate.getMonth() + 1); renderCalendar(); });

            function renderSchedules() {
                const schedules = getData(DB_SCHEDULES); const applicants = getData(DB_APPLICANTS);
                const scheduleTableBody = document.querySelector('#schedule-table tbody'); scheduleTableBody.innerHTML = '';
                schedules.sort((a,b) => new Date(b.datetime) - new Date(a.datetime)).forEach(sc => {
                    const applicant = applicants.find(a => a.id == sc.applicantId) || {name: '알수없음', id: 'unknown'};
                    const isPast = new Date(sc.datetime) < new Date();
                    scheduleTableBody.innerHTML += `<tr>
                        <td><a href="#" class="view-details" data-id="${applicant.id}">${applicant.name}</a></td>
                        <td>${new Date(sc.datetime).toLocaleString('ko-KR')}</td>
                        <td>${sc.interviewer || 'N/A'}</td>
                        <td><span class="badge ${isPast ? 'badge-success' : 'badge-warning'}">${isPast ? '완료' : '예정'}</span></td>
                        <td><button class="btn btn-sm edit-schedule" data-id="${sc.id}">수정</button> <button class="btn btn-sm btn-danger delete-schedule" data-id="${sc.id}">삭제</button></td>
                    </tr>`;
                });
            }
            document.getElementById('add-schedule-btn').addEventListener('click', () => {
                document.getElementById('schedule-modal-title').textContent = '신규 인터뷰 일정';
                const form = document.getElementById('schedule-form'); form.reset(); form.querySelector('#schedule-id').value = '';
                updateApplicantDropdowns(getData(DB_APPLICANTS)); document.querySelector('#schedule-applicant').disabled = false;
                openModal(document.getElementById('schedule-modal'));
            });
            document.getElementById('schedule-form').addEventListener('submit', (e) => {
                e.preventDefault(); const id = e.target.querySelector('#schedule-id').value; const applicantId = e.target.querySelector('#schedule-applicant').value;
                const scheduleData = {
                    id: id || Date.now(), applicantId, datetime: e.target.querySelector('#schedule-datetime').value,
                    interviewer: e.target.querySelector('#schedule-interviewer').value, location: e.target.querySelector('#schedule-location').value || '', notes: e.target.querySelector('#schedule-notes').value || ''
                };
                let schedules = getData(DB_SCHEDULES);
                if (id) { schedules = schedules.map(sc => sc.id == id ? scheduleData : sc); showNotification('인터뷰 일정이 수정되었습니다.', 'success');
                } else {
                    schedules.push(scheduleData);
                    let applicants = getData(DB_APPLICANTS).map(app => app.id == applicantId ? { ...app, status: '인터뷰' } : app);
                    setData(DB_APPLICANTS, applicants); showNotification('새 인터뷰 일정이 등록되고 지원자 상태가 변경되었습니다.', 'success');
                }
                setData(DB_SCHEDULES, schedules);
                renderSchedules(); renderApplicants(); renderKanbanBoard(); renderCalendar();
                closeModal(document.getElementById('schedule-modal'));
                if (document.getElementById('applicant-detail-modal').style.display === 'block') openApplicantDetailModal(applicantId);
            });
            document.querySelector('#schedule-table tbody').addEventListener('click', (e) => {
                const target = e.target;
                if (target.classList.contains('edit-schedule')) {
                    const sc = getData(DB_SCHEDULES).find(s => s.id == target.dataset.id);
                    document.getElementById('schedule-modal-title').textContent = '인터뷰 일정 수정';
                    updateApplicantDropdowns(getData(DB_APPLICANTS));
                    const form = document.getElementById('schedule-form');
                    form.querySelector('#schedule-id').value = sc.id; form.querySelector('#schedule-applicant').value = sc.applicantId;
                    form.querySelector('#schedule-datetime').value = sc.datetime; form.querySelector('#schedule-interviewer').value = sc.interviewer || '';
                    form.querySelector('#schedule-location').value = sc.location || ''; form.querySelector('#schedule-notes').value = sc.notes || '';
                    document.querySelector('#schedule-applicant').disabled = false;
                    openModal(document.getElementById('schedule-modal'));
                }
                if (target.classList.contains('delete-schedule')) {
                    if (confirm('인터뷰 일정을 삭제하시겠습니까?')) {
                        setData(DB_SCHEDULES, getData(DB_SCHEDULES).filter(s => s.id != target.dataset.id));
                        renderSchedules(); renderKanbanBoard(); renderCalendar();
                        showNotification('인터뷰 일정이 삭제되었습니다.', 'success');
                    }
                }
            });

            function setupDragAndDrop() {
                const csvUploadLabel = document.querySelector('label[for="csv-upload"]'); if (!csvUploadLabel) return;
                ['dragover', 'dragleave', 'drop'].forEach(eventName => csvUploadLabel.addEventListener(eventName, e => e.preventDefault()));
                csvUploadLabel.addEventListener('dragover', () => csvUploadLabel.classList.add('drag-over'));
                csvUploadLabel.addEventListener('dragleave', () => csvUploadLabel.classList.remove('drag-over'));
                csvUploadLabel.addEventListener('drop', (e) => {
                    csvUploadLabel.classList.remove('drag-over');
                    const files = e.dataTransfer.files;
                    if (files.length > 0 && files[0].name.endsWith('.csv')) {
                        const csvInput = document.getElementById('csv-upload');
                        csvInput.files = files; csvInput.dispatchEvent(new Event('change'));
                    } else { showNotification('CSV 파일만 업로드 가능합니다.', 'error'); }
                });
            }

            function setupKeyboardShortcuts() {
                document.addEventListener('keydown', (e) => {
                    if (e.ctrlKey && e.key === 'n' && document.querySelector('#manage-applicants').classList.contains('active')) {
                        e.preventDefault(); document.getElementById('add-applicant-btn').click();
                    }
                    if (e.key === 'Escape') document.querySelectorAll('.modal[style*="block"]').forEach(closeModal);
                });
            }

            function updateApplicantDropdowns(applicants) {
                const scheduleSelect = document.getElementById('schedule-applicant'); const currentVal = scheduleSelect.value;
                scheduleSelect.innerHTML = '<option value="">-- 지원자를 선택하세요 --</option>';
                applicants.forEach(app => {
                    const option = document.createElement('option'); option.value = app.id;
                    option.textContent = `${app.name} (${app.position || 'N/A'})`; scheduleSelect.appendChild(option);
                });
                scheduleSelect.value = currentVal;
            }

            // 인라인 상태 편집 기능
            function showInlineStatusDropdown(statusBadge) {
                // 이미 열린 드롭다운이 있다면 닫기
                closeAllInlineDropdowns();
                
                const applicantId = statusBadge.dataset.id;
                const currentStatus = statusBadge.dataset.currentStatus;
                
                // 상태 배지의 화면상 위치 계산
                const rect = statusBadge.getBoundingClientRect();
                
                // 드롭다운 생성
                const dropdown = document.createElement('div');
                dropdown.className = 'inline-status-dropdown';
                dropdown.setAttribute('data-dropdown', 'true');
                
                // 화면상 위치 설정 (fixed positioning)
                dropdown.style.left = rect.left + 'px';
                dropdown.style.top = (rect.bottom + 5) + 'px';
                
                // 상태 옵션들 생성
                STATUS_OPTIONS.forEach(status => {
                    const option = document.createElement('button');
                    option.className = `inline-status-option ${status === currentStatus ? 'current' : ''}`;
                    option.textContent = status;
                    option.onclick = (e) => {
                        e.stopPropagation();
                        changeApplicantStatus(applicantId, status);
                        closeAllInlineDropdowns();
                    };
                    dropdown.appendChild(option);
                });
                
                // body에 직접 추가 (테이블 밖으로)
                document.body.appendChild(dropdown);
                
                // ESC 키나 외부 클릭 시 닫기
                setTimeout(() => {
                    document.addEventListener('click', closeAllInlineDropdowns);
                    document.addEventListener('keydown', handleEscapeKey);
                }, 0);
            }
            
            function changeApplicantStatus(applicantId, newStatus) {
                let applicants = getData(DB_APPLICANTS);
                const applicantIndex = applicants.findIndex(app => app.id == applicantId);
                
                if (applicantIndex !== -1) {
                    const oldStatus = applicants[applicantIndex].status;
                    applicants[applicantIndex].status = newStatus;
                    setData(DB_APPLICANTS, applicants);
                    
                    // UI 업데이트
                    renderApplicants();
                    renderKanbanBoard();
                    renderDashboard();
                    
                    // 성공 메시지
                    showNotification(`상태가 "${oldStatus}"에서 "${newStatus}"로 변경되었습니다.`, 'success');
                }
            }
            
            function closeAllInlineDropdowns() {
                document.querySelectorAll('.inline-status-dropdown').forEach(dropdown => {
                    dropdown.remove();
                });
                document.removeEventListener('click', closeAllInlineDropdowns);
                document.removeEventListener('keydown', handleEscapeKey);
            }
            
            function handleEscapeKey(e) {
                if (e.key === 'Escape') {
                    closeAllInlineDropdowns();
                }
            }

            function initialize() {
                setupDragAndDrop();
                setupKeyboardShortcuts();
                setupNewEventListeners();
                setupScheduleEventListeners(); // 인터뷰 일정 이벤트 리스너 추가
                
                UI.navLinks.forEach(l => l.classList.remove('active'));
                UI.pages.forEach(p => p.classList.remove('active'));
                document.querySelector('[data-page="dashboard"]').classList.add('active');
                document.getElementById('dashboard').classList.add('active');
                
                renderDashboard();
                renderApplicants();
                renderSchedules();
                renderAllEvaluationsPage();
                renderKanbanBoard();
            }
            
            // 새로운 UI 요소들을 위한 이벤트 리스너 설정
            function setupNewEventListeners() {
                // 날짜 필터 이벤트 리스너
                const dateFilter = document.getElementById('date-filter');
                if (dateFilter) {
                    dateFilter.addEventListener('change', () => {
                        currentPage = 1;
                        renderApplicants();
                    });
                }
                
                // 모든 필터 지우기 버튼
                const clearAllFilters = document.getElementById('clear-all-filters');
                if (clearAllFilters) {
                    clearAllFilters.addEventListener('click', () => {
                        UI.searchInput.value = '';
                        UI.statusFilter.value = '';
                        UI.positionFilter.value = '';
                        if (dateFilter) dateFilter.value = '';
                        
                        advancedSearchActive = false;
                        advancedSearchCriteria = {};
                        currentPage = 1;
                        selectedApplicantIds.clear();
                        
                        renderApplicants();
                        showNotification('모든 필터가 초기화되었습니다.', 'info');
                    });
                }
                
                // 페이지당 행 수 변경
                const rowsPerPageSelect = document.getElementById('rows-per-page');
                if (rowsPerPageSelect) {
                    rowsPerPageSelect.addEventListener('change', (e) => {
                        rowsPerPage = parseInt(e.target.value);
                        currentPage = 1;
                        renderApplicants();
                        showNotification(`페이지당 ${rowsPerPage}개씩 표시합니다.`, 'info');
                    });
                }
                
                // 검색 입력 개선 (실시간 검색 with debounce)
                if (UI.searchInput) {
                    UI.searchInput.addEventListener('input', (e) => {
                        clearTimeout(debounceTimer);
                        debounceTimer = setTimeout(() => {
                            currentPage = 1;
                            renderApplicants();
                        }, 150);
                    });
                }
                
                // 상태 및 포지션 필터 개선
                if (UI.statusFilter) {
                    UI.statusFilter.addEventListener('change', () => {
                        currentPage = 1;
                        renderApplicants();
                    });
                }
                
                if (UI.positionFilter) {
                    UI.positionFilter.addEventListener('change', () => {
                        currentPage = 1;
                        renderApplicants();
                    });
                }
                
                // 키보드 단축키 개선
                document.addEventListener('keydown', (e) => {
                    // Ctrl+F: 검색 박스에 포커스
                    if (e.ctrlKey && e.key === 'f') {
                        e.preventDefault();
                        if (UI.searchInput) {
                            UI.searchInput.focus();
                            UI.searchInput.select();
                        }
                    }
                    
                    // Escape: 선택 해제
                    if (e.key === 'Escape') {
                        selectedApplicantIds.clear();
                        updateBulkActionUI();
                        updateSelectAllCheckboxState();
                        renderApplicants();
                    }
                });
                
                // 지원자 관리 테이블 헤더 정렬 이벤트 리스너
                document.addEventListener('click', (e) => {
                    if (e.target.closest('#applicants-table th.sortable')) {
                        const th = e.target.closest('#applicants-table th.sortable');
                        const column = th.dataset.sort;
                        sortApplicantsTable(column);
                    }
                });
                
                // 평가 기록 테이블 헤더 정렬 이벤트 리스너
                document.addEventListener('click', (e) => {
                    if (e.target.closest('#all-evaluations-table th.sortable')) {
                        const th = e.target.closest('#all-evaluations-table th.sortable');
                        const column = th.dataset.sort;
                        sortEvaluationsTable(column);
                    }
                });
                
                // 평가 기록 페이지당 항목 수 변경
                const evaluationsPerPageSelect = document.getElementById('evaluations-per-page');
                if (evaluationsPerPageSelect) {
                    evaluationsPerPageSelect.addEventListener('change', (e) => {
                        evaluationsPerPage = parseInt(e.target.value);
                        evaluationCurrentPage = 1;
                        renderAllEvaluationsPage();
                        showNotification(`페이지당 ${evaluationsPerPage}개씩 표시합니다.`, 'info');
                    });
                }
                
                // 칸반보드 이벤트 리스너
                setupKanbanEventListeners();
            }
            
            // 인터뷰 일정 이벤트 리스너 설정
            function setupScheduleEventListeners() {
                // 검색 필터
                const searchInput = document.getElementById('schedule-search-input');
                if (searchInput) {
                    searchInput.addEventListener('input', (e) => {
                        clearTimeout(scheduleDebounceTimer);
                        scheduleSearchTerm = e.target.value;
                        scheduleDebounceTimer = setTimeout(() => {
                            scheduleCurrentPage = 1;
                            renderSchedules();
                        }, 150);
                    });
                }
                
                // 상태 필터
                const statusFilter = document.getElementById('schedule-status-filter');
                if (statusFilter) {
                    statusFilter.addEventListener('change', (e) => {
                        scheduleStatusFilter = e.target.value;
                        scheduleCurrentPage = 1;
                        renderSchedules();
                    });
                }
                
                // 날짜 필터
                const dateFilter = document.getElementById('schedule-date-filter');
                if (dateFilter) {
                    dateFilter.addEventListener('change', (e) => {
                        scheduleDateFilter = e.target.value;
                        scheduleCurrentPage = 1;
                        renderSchedules();
                    });
                }
                
                // 인터뷰관 필터
                const interviewerFilter = document.getElementById('schedule-interviewer-filter');
                if (interviewerFilter) {
                    interviewerFilter.addEventListener('change', (e) => {
                        scheduleInterviewerFilter = e.target.value;
                        scheduleCurrentPage = 1;
                        renderSchedules();
                    });
                }
                
                // 모든 필터 지우기
                const clearFilters = document.getElementById('clear-schedule-filters');
                if (clearFilters) {
                    clearFilters.addEventListener('click', () => {
                        scheduleSearchTerm = '';
                        scheduleStatusFilter = '';
                        scheduleDateFilter = '';
                        scheduleInterviewerFilter = '';
                        
                        if (searchInput) searchInput.value = '';
                        if (statusFilter) statusFilter.value = '';
                        if (dateFilter) dateFilter.value = '';
                        if (interviewerFilter) interviewerFilter.value = '';
                        
                        scheduleCurrentPage = 1;
                        renderSchedules();
                        showNotification('모든 필터가 초기화되었습니다.', 'info');
                    });
                }
                
                // 페이지당 일정 수 변경
                const perPageSelect = document.getElementById('schedules-per-page');
                if (perPageSelect) {
                    perPageSelect.addEventListener('change', (e) => {
                        schedulesPerPage = parseInt(e.target.value);
                        scheduleCurrentPage = 1;
                        renderSchedules();
                    });
                }
                
                // 새로고침 버튼
                const refreshBtn = document.getElementById('schedule-refresh-btn');
                if (refreshBtn) {
                    refreshBtn.addEventListener('click', () => {
                        renderSchedules();
                        showNotification('인터뷰 일정이 새로고침되었습니다.', 'success');
                    });
                }
                
                // 인터뷰 일정 테이블 헤더 정렬 이벤트 리스너
                document.addEventListener('click', (e) => {
                    if (e.target.closest('#schedule-table th.sortable')) {
                        const th = e.target.closest('#schedule-table th.sortable');
                        const column = th.dataset.sort;
                        sortScheduleTable(column);
                    }
                });
                
                // 일정 추가 버튼
                const addScheduleBtn = document.getElementById('add-schedule-btn');
                if (addScheduleBtn) {
                    addScheduleBtn.addEventListener('click', () => {
                        const applicants = getData(DB_APPLICANTS);
                        const modal = UI.scheduleModal;
                        const title = document.getElementById('schedule-modal-title');
                        const applicantSelect = document.getElementById('schedule-applicant');
                        
                        // 모달 제목 설정
                        title.textContent = '인터뷰 일정 추가';
                        
                        // 지원자 목록 업데이트
                        applicantSelect.innerHTML = '<option value="">지원자를 선택하세요</option>';
                        applicants.forEach(app => {
                            const option = document.createElement('option');
                            option.value = app.id;
                            option.textContent = `${app.name} (${app.position || '포지션 미정'})`;
                            applicantSelect.appendChild(option);
                        });
                        
                        // 폼 필드 초기화
                        document.getElementById('schedule-id').value = '';
                        document.getElementById('schedule-applicant').value = '';
                        document.getElementById('schedule-datetime').value = '';
                        document.getElementById('schedule-interviewer').value = '';
                        document.getElementById('schedule-location').value = '';
                        document.getElementById('schedule-notes').value = '';
                        
                        // 모달 표시
                        modal.style.display = 'block';
                    });
                }
                
                // 목록/캘린더 보기 토글
                const listBtn = document.getElementById('schedule-list-btn');
                const calendarBtn = document.getElementById('schedule-calendar-btn');
                const tableView = document.getElementById('schedule-table-view');
                const calendarView = document.getElementById('schedule-calendar-view');
                const paginationControls = document.getElementById('schedule-pagination-controls');
                
                if (listBtn && calendarBtn && tableView && calendarView) {
                    listBtn.addEventListener('click', () => {
                        listBtn.classList.add('active');
                        listBtn.classList.remove('btn-outline');
                        listBtn.classList.add('btn-primary');
                        
                        calendarBtn.classList.remove('active');
                        calendarBtn.classList.add('btn-outline');
                        calendarBtn.classList.remove('btn-primary');
                        
                        tableView.style.display = 'block';
                        calendarView.style.display = 'none';
                        if (paginationControls) paginationControls.style.display = 'flex';
                        
                        renderSchedules();
                    });
                    
                    calendarBtn.addEventListener('click', () => {
                        calendarBtn.classList.add('active');
                        calendarBtn.classList.remove('btn-outline');
                        calendarBtn.classList.add('btn-primary');
                        
                        listBtn.classList.remove('active');
                        listBtn.classList.add('btn-outline');
                        listBtn.classList.remove('btn-primary');
                        
                        tableView.style.display = 'none';
                        calendarView.style.display = 'block';
                        if (paginationControls) paginationControls.style.display = 'none';
                        
                        renderScheduleCalendar();
                    });
                }
                
                // 인터뷰 일정 관련 이벤트 위임 (통합)
                document.addEventListener('click', (e) => {
                    // 테이블 정렬 클릭
                    if (e.target.closest('#schedule-table .sortable')) {
                        const th = e.target.closest('.sortable');
                        const column = th.dataset.sort;
                        sortScheduleTable(column);
                    }
                    // 액션 버튼들 (버튼 자체나 내부 요소 클릭 처리)
                    else if (e.target.classList.contains('schedule-edit-btn') || e.target.closest('.schedule-edit-btn')) {
                        const button = e.target.classList.contains('schedule-edit-btn') ? e.target : e.target.closest('.schedule-edit-btn');
                        const scheduleId = button.dataset.scheduleId || button.getAttribute('data-schedule-id');
                        console.log('수정 버튼 클릭 - button:', button);
                        console.log('scheduleId from dataset:', button.dataset.scheduleId);
                        console.log('scheduleId from getAttribute:', button.getAttribute('data-schedule-id'));
                        console.log('최종 scheduleId:', scheduleId);
                        e.preventDefault();
                        e.stopPropagation();
                        editSchedule(scheduleId);
                    } else if (e.target.classList.contains('schedule-delete-btn') || e.target.closest('.schedule-delete-btn')) {
                        const button = e.target.classList.contains('schedule-delete-btn') ? e.target : e.target.closest('.schedule-delete-btn');
                        const scheduleId = button.dataset.scheduleId || button.getAttribute('data-schedule-id');
                        e.preventDefault();
                        e.stopPropagation();
                        deleteSchedule(scheduleId);
                    } else if ((e.target.classList.contains('schedule-page-btn') || e.target.closest('.schedule-page-btn')) && !e.target.disabled) {
                        const button = e.target.classList.contains('schedule-page-btn') ? e.target : e.target.closest('.schedule-page-btn');
                        if (!button.disabled) {
                            const page = parseInt(button.dataset.page);
                            changeSchedulePage(page);
                        }
                    }
                });
                
                // 인터뷰 일정 수정 폼 제출 이벤트
                const scheduleForm = document.getElementById('schedule-form');
                if (scheduleForm) {
                    scheduleForm.addEventListener('submit', (e) => {
                        e.preventDefault();
                        
                        const scheduleId = document.getElementById('schedule-id').value;
                        const applicantId = document.getElementById('schedule-applicant').value;
                        const datetime = document.getElementById('schedule-datetime').value;
                        const interviewer = document.getElementById('schedule-interviewer').value;
                        const location = document.getElementById('schedule-location').value;
                        const notes = document.getElementById('schedule-notes').value;
                        
                        if (!applicantId || !datetime) {
                            showNotification('지원자와 인터뷰 일시는 필수 입력 항목입니다.', 'error');
                            return;
                        }
                        
                        const schedules = getData(DB_SCHEDULES);
                        const schedule = schedules.find(s => s.id === scheduleId);
                        
                        if (schedule) {
                            // 수정
                            schedule.applicantId = applicantId;
                            schedule.datetime = datetime;
                            schedule.interviewer = interviewer;
                            schedule.location = location;
                            schedule.notes = notes;
                            
                            setData(DB_SCHEDULES, schedules);
                            showNotification('인터뷰 일정이 수정되었습니다.', 'success');
                        } else {
                            // 새로 추가
                            const newSchedule = {
                                id: 'schedule_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9),
                                applicantId,
                                datetime,
                                interviewer,
                                location,
                                notes,
                                status: 'scheduled'
                            };
                            schedules.push(newSchedule);
                            setData(DB_SCHEDULES, schedules);
                            showNotification('인터뷰 일정이 추가되었습니다.', 'success');
                        }
                        
                        // 모달 닫기 및 데이터 다시 렌더링
                        UI.scheduleModal.style.display = 'none';
                        renderSchedules();
                        renderDashboard(); // 대시보드도 업데이트
                        
                        // 지원자 상세 모달이 열려있었던 경우 다시 열기
                        const scheduleApplicantId = document.getElementById('schedule-applicant').value;
                        if (scheduleApplicantId && UI.applicantDetailModal.style.display === 'none') {
                            // 일정 수정 후 지원자 상세 모달 다시 열기
                            setTimeout(() => {
                                openApplicantDetailModal(scheduleApplicantId);
                            }, 100);
                        }
                    });
                }
                
                // 모달 닫기 버튼 이벤트
                const scheduleModalCloseBtn = UI.scheduleModal?.querySelector('.close');
                if (scheduleModalCloseBtn) {
                    scheduleModalCloseBtn.addEventListener('click', () => {
                        UI.scheduleModal.style.display = 'none';
                    });
                }
                
                // 모달 배경 클릭 시 닫기
                if (UI.scheduleModal) {
                    UI.scheduleModal.addEventListener('click', (e) => {
                        if (e.target === UI.scheduleModal) {
                            UI.scheduleModal.style.display = 'none';
                        }
                    });
                }
            }
            
            // 칸반보드 이벤트 리스너 설정
            function setupKanbanEventListeners() {
                // 칸반 검색
                const kanbanSearch = document.getElementById('kanban-search');
                if (kanbanSearch) {
                    kanbanSearch.addEventListener('input', () => {
                        clearTimeout(debounceTimer);
                        debounceTimer = setTimeout(renderKanbanBoard, 300);
                    });
                }
                
                // 칸반 포지션 필터
                const kanbanPositionFilter = document.getElementById('kanban-position-filter');
                if (kanbanPositionFilter) {
                    kanbanPositionFilter.addEventListener('change', renderKanbanBoard);
                }
                
                // 칸반 새로고침
                const kanbanRefresh = document.getElementById('kanban-refresh');
                if (kanbanRefresh) {
                    kanbanRefresh.addEventListener('click', () => {
                        const button = kanbanRefresh;
                        const originalText = button.innerHTML;
                        button.innerHTML = '🔄 새로고침 중...';
                        button.disabled = true;
                        
                        setTimeout(() => {
                            renderKanbanBoard();
                            button.innerHTML = originalText;
                            button.disabled = false;
                            showNotification('칸반보드가 새로고침되었습니다.', 'success');
                        }, 500);
                    });
                }
                
                // 통계 보기 토글
                const kanbanViewToggle = document.getElementById('kanban-view-toggle');
                const kanbanStats = document.getElementById('kanban-stats');
                if (kanbanViewToggle && kanbanStats) {
                    kanbanViewToggle.addEventListener('click', () => {
                        const isVisible = kanbanStats.style.display !== 'none';
                        kanbanStats.style.display = isVisible ? 'none' : 'flex';
                        kanbanViewToggle.innerHTML = isVisible ? '📊 통계 보기' : '📊 통계 숨기기';
                    });
                }
                
                // 칸반 컬럼 액션 버튼들
                document.addEventListener('click', (e) => {
                    if (e.target.classList.contains('kanban-add-btn')) {
                        const column = e.target.closest('.kanban-column');
                        const status = column?.dataset.status;
                        
                        if (status === '서류접수') {
                            // 새 지원자 추가
                            document.getElementById('add-applicant-btn').click();
                        } else if (status === '인터뷰') {
                            // 인터뷰 일정 추가
                            document.getElementById('add-schedule-btn')?.click();
                        } else if (status === '최종합격') {
                            // 평가 추가 (지원자 관리 페이지로 이동)
                            document.querySelector('[data-page="manage-applicants"]').click();
                        } else if (status === '불합격') {
                            // 피드백 추가 (지원자 관리 페이지로 이동)
                            document.querySelector('[data-page="manage-applicants"]').click();
                        }
                    }
                });
            }

            // 인터뷰 일정 관련 변수들
            let scheduleCurrentPage = 1;
            let schedulesPerPage = 50;
            let scheduleSortColumn = 'datetime';
            let scheduleSortDirection = 'asc';
            let scheduleSearchTerm = '';
            let scheduleStatusFilter = '';
            let scheduleDateFilter = '';
            let scheduleInterviewerFilter = '';
            let scheduleDebounceTimer;
            
            // 인터뷰 일정 통계 업데이트
            function updateScheduleStats() {
                const schedules = getData(DB_SCHEDULES);
                const today = new Date();
                today.setHours(0, 0, 0, 0);
                
                const tomorrow = new Date(today);
                tomorrow.setDate(tomorrow.getDate() + 1);
                
                const todaySchedules = schedules.filter(s => {
                    const scheduleDate = new Date(s.datetime);
                    scheduleDate.setHours(0, 0, 0, 0);
                    return scheduleDate.getTime() === today.getTime();
                });
                
                const upcomingSchedules = schedules.filter(s => {
                    return new Date(s.datetime) > new Date() && (!s.status || s.status === 'scheduled');
                });
                
                const completedSchedules = schedules.filter(s => s.status === 'completed');
                
                document.getElementById('stat-total-schedules').textContent = schedules.length;
                document.getElementById('stat-today-schedules').textContent = todaySchedules.length;
                document.getElementById('stat-upcoming-schedules').textContent = upcomingSchedules.length;
                document.getElementById('stat-completed-schedules').textContent = completedSchedules.length;
            }
            
            // 인터뷰관 필터 업데이트
            function updateInterviewerFilter() {
                const schedules = getData(DB_SCHEDULES);
                const interviewers = [...new Set(schedules.map(s => s.interviewer).filter(Boolean))];
                const filter = document.getElementById('schedule-interviewer-filter');
                
                if (filter) {
                    const currentValue = filter.value;
                    filter.innerHTML = '<option value="">모든 인터뷰관</option>';
                    interviewers.forEach(interviewer => {
                        filter.innerHTML += `<option value="${interviewer}">${interviewer}</option>`;
                    });
                    filter.value = currentValue;
                }
            }
            
            // 인터뷰 일정 필터링
            function getFilteredSchedules() {
                const schedules = getData(DB_SCHEDULES);
                const applicants = getData(DB_APPLICANTS);
                
                return schedules.filter(schedule => {
                    const applicant = applicants.find(a => a.id === schedule.applicantId);
                    const applicantName = applicant ? applicant.name : '';
                    
                    // 검색 필터
                    const searchMatch = !scheduleSearchTerm || 
                        applicantName.toLowerCase().includes(scheduleSearchTerm.toLowerCase()) ||
                        (schedule.interviewer && schedule.interviewer.toLowerCase().includes(scheduleSearchTerm.toLowerCase()));
                    
                    // 상태 필터
                    const statusMatch = !scheduleStatusFilter || 
                        (schedule.status || 'scheduled') === scheduleStatusFilter;
                    
                    // 날짜 필터
                    let dateMatch = true;
                    if (scheduleDateFilter) {
                        const scheduleDate = new Date(schedule.datetime);
                        const today = new Date();
                        today.setHours(0, 0, 0, 0);
                        
                        switch (scheduleDateFilter) {
                            case 'today':
                                const todayEnd = new Date(today);
                                todayEnd.setHours(23, 59, 59, 999);
                                dateMatch = scheduleDate >= today && scheduleDate <= todayEnd;
                                break;
                            case 'tomorrow':
                                const tomorrow = new Date(today);
                                tomorrow.setDate(tomorrow.getDate() + 1);
                                const tomorrowEnd = new Date(tomorrow);
                                tomorrowEnd.setHours(23, 59, 59, 999);
                                dateMatch = scheduleDate >= tomorrow && scheduleDate <= tomorrowEnd;
                                break;
                            case 'week':
                                const weekEnd = new Date(today);
                                weekEnd.setDate(weekEnd.getDate() + 7);
                                dateMatch = scheduleDate >= today && scheduleDate <= weekEnd;
                                break;
                            case 'month':
                                const monthEnd = new Date(today);
                                monthEnd.setMonth(monthEnd.getMonth() + 1);
                                dateMatch = scheduleDate >= today && scheduleDate <= monthEnd;
                                break;
                        }
                    }
                    
                    // 인터뷰관 필터
                    const interviewerMatch = !scheduleInterviewerFilter || 
                        schedule.interviewer === scheduleInterviewerFilter;
                    
                    return searchMatch && statusMatch && dateMatch && interviewerMatch;
                });
            }
            
            // 인터뷰 일정 정렬
            function sortSchedules(schedules) {
                return schedules.sort((a, b) => {
                    let aVal, bVal;
                    
                    switch (scheduleSortColumn) {
                        case 'applicant':
                            const applicants = getData(DB_APPLICANTS);
                            const aApplicant = applicants.find(app => app.id === a.applicantId);
                            const bApplicant = applicants.find(app => app.id === b.applicantId);
                            aVal = aApplicant ? aApplicant.name : '';
                            bVal = bApplicant ? bApplicant.name : '';
                            break;
                        case 'datetime':
                            aVal = new Date(a.datetime);
                            bVal = new Date(b.datetime);
                            break;
                        case 'interviewer':
                            aVal = a.interviewer || '';
                            bVal = b.interviewer || '';
                            break;
                        case 'location':
                            aVal = a.location || '';
                            bVal = b.location || '';
                            break;
                        case 'status':
                            aVal = a.status || 'scheduled';
                            bVal = b.status || 'scheduled';
                            break;
                        default:
                            return 0;
                    }
                    
                    if (aVal < bVal) return scheduleSortDirection === 'asc' ? -1 : 1;
                    if (aVal > bVal) return scheduleSortDirection === 'asc' ? 1 : -1;
                    return 0;
                });
            }
            
            // 인터뷰 일정 렌더링
            function renderSchedules() {
                const applicants = getData(DB_APPLICANTS);
                
                let schedules = getData(DB_SCHEDULES);
                
                const filteredSchedules = getFilteredSchedules();
                const sortedSchedules = sortSchedules(filteredSchedules);
                
                // 통계 및 필터 업데이트
                updateScheduleStats();
                updateInterviewerFilter();
                
                // 정렬 상태 시각적으로 업데이트
                document.querySelectorAll('#schedule-table th.sortable').forEach(th => {
                    th.classList.remove('sorted');
                    if (th.dataset.sort === scheduleSortColumn) {
                        th.classList.add('sorted');
                        const arrow = th.querySelector('.sort-arrow');
                        if (arrow) {
                            arrow.textContent = scheduleSortDirection === 'asc' ? '↑' : '↓';
                        }
                    } else {
                        const arrow = th.querySelector('.sort-arrow');
                        if (arrow) {
                            arrow.textContent = '⇅';
                        }
                    }
                });
                
                // 카운터 업데이트
                const filteredCount = document.getElementById('filtered-schedules-count');
                if (filteredCount) {
                    filteredCount.textContent = filteredSchedules.length;
                }
                
                // 페이지네이션 계산
                const totalPages = Math.ceil(sortedSchedules.length / schedulesPerPage);
                const startIndex = (scheduleCurrentPage - 1) * schedulesPerPage;
                const endIndex = startIndex + schedulesPerPage;
                const pageSchedules = sortedSchedules.slice(startIndex, endIndex);
                
                // 테이블 렌더링
                const tbody = document.querySelector('#schedule-table tbody');
                const emptyState = document.getElementById('schedule-empty-state');
                
                if (!tbody) return;
                
                if (pageSchedules.length === 0) {
                    tbody.innerHTML = '';
                    if (emptyState) emptyState.style.display = 'block';
                    return;
                }
                
                if (emptyState) emptyState.style.display = 'none';
                
                tbody.innerHTML = pageSchedules.map(schedule => {
                    const applicant = applicants.find(a => a.id === schedule.applicantId);
                    const applicantName = applicant ? applicant.name : '삭제된 지원자';
                    const scheduleDate = new Date(schedule.datetime);
                    const formattedDate = scheduleDate.toLocaleDateString('ko-KR', {
                        year: 'numeric',
                        month: '2-digit',
                        day: '2-digit'
                    });
                    const formattedTime = scheduleDate.toLocaleTimeString('ko-KR', {
                        hour: '2-digit',
                        minute: '2-digit',
                        hour12: false
                    });
                    
                    const status = schedule.status || 'scheduled';
                    const statusText = {
                        'scheduled': '예정',
                        'completed': '완료',
                        'cancelled': '취소'
                    }[status] || '예정';
                    
                    return `
                        <tr>
                            <td>
                                <div style="font-weight: 500;">${applicantName}</div>
                                ${applicant ? `<div style="font-size: 12px; color: #6b7280;">${applicant.position || ''}</div>` : ''}
                            </td>
                            <td>
                                <div style="font-weight: 500;">${formattedDate}</div>
                                <div style="font-size: 12px; color: #6b7280;">${formattedTime}</div>
                            </td>
                            <td>${schedule.interviewer || '-'}</td>
                            <td style="max-width: 150px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;" title="${schedule.location || '-'}">
                                ${schedule.location || '-'}
                            </td>
                            <td>
                                <span class="schedule-status-badge ${status}">${statusText}</span>
                            </td>
                            <td>
                                <div class="btn-group">
                                    <button class="btn btn-sm btn-primary schedule-edit-btn" data-schedule-id="${schedule.id}" title="수정">
                                        ✏️ 수정
                                    </button>
                                    <button class="btn btn-sm btn-danger schedule-delete-btn" data-schedule-id="${schedule.id}" title="삭제">
                                        🗑️ 삭제
                                    </button>
                                </div>
                            </td>
                        </tr>
                    `;
                }).join('');
                
                // 정렬 헤더 업데이트
                updateScheduleSortHeaders();
                
                // 페이지네이션 렌더링
                renderSchedulePagination(totalPages);
            }
            
            // 인터뷰 일정 정렬 헤더 업데이트
            function updateScheduleSortHeaders() {
                document.querySelectorAll('#schedule-table .sortable').forEach(th => {
                    const arrow = th.querySelector('.sort-arrow');
                    const column = th.dataset.sort;
                    
                    if (column === scheduleSortColumn) {
                        arrow.textContent = scheduleSortDirection === 'asc' ? '↑' : '↓';
                        th.style.background = '#f8fafc';
                    } else {
                        arrow.textContent = '⇅';
                        th.style.background = '';
                    }
                });
            }
            
            // 인터뷰 일정 페이지네이션
            function renderSchedulePagination(totalPages) {
                const paginationControls = document.getElementById('schedule-pagination-controls');
                if (!paginationControls || totalPages <= 1) {
                    if (paginationControls) paginationControls.style.display = 'none';
                    return;
                }
                
                paginationControls.style.display = 'flex';
                
                let paginationHTML = `
                    <div class="pagination-info">
                        페이지 ${scheduleCurrentPage} / ${totalPages}
                    </div>
                    <div class="pagination-buttons">
                `;
                
                // 이전 페이지 버튼
                paginationHTML += `
                    <button class="pagination-btn schedule-page-btn ${scheduleCurrentPage === 1 ? 'disabled' : ''}" 
                            data-page="${scheduleCurrentPage - 1}" 
                            ${scheduleCurrentPage === 1 ? 'disabled' : ''}>
                        ‹ 이전
                    </button>
                `;
                
                // 페이지 번호들
                const startPage = Math.max(1, scheduleCurrentPage - 2);
                const endPage = Math.min(totalPages, scheduleCurrentPage + 2);
                
                for (let i = startPage; i <= endPage; i++) {
                    paginationHTML += `
                        <button class="pagination-btn schedule-page-btn ${i === scheduleCurrentPage ? 'active' : ''}" 
                                data-page="${i}">
                            ${i}
                        </button>
                    `;
                }
                
                // 다음 페이지 버튼
                paginationHTML += `
                    <button class="pagination-btn schedule-page-btn ${scheduleCurrentPage === totalPages ? 'disabled' : ''}" 
                            data-page="${scheduleCurrentPage + 1}" 
                            ${scheduleCurrentPage === totalPages ? 'disabled' : ''}>
                        다음 ›
                    </button>
                `;
                
                paginationHTML += '</div>';
                paginationControls.innerHTML = paginationHTML;
            }
            
            // 인터뷰 일정 페이지 변경
            function changeSchedulePage(page) {
                const filteredSchedules = getFilteredSchedules();
                const totalPages = Math.ceil(filteredSchedules.length / schedulesPerPage);
                
                if (page >= 1 && page <= totalPages) {
                    scheduleCurrentPage = page;
                    renderSchedules();
                }
            }
            
            // 인터뷰 일정 정렬
            function sortScheduleTable(column) {
                if (scheduleSortColumn === column) {
                    scheduleSortDirection = scheduleSortDirection === 'asc' ? 'desc' : 'asc';
                } else {
                    scheduleSortColumn = column;
                    scheduleSortDirection = 'asc';
                }
                scheduleCurrentPage = 1;
                renderSchedules();
            }
            
            // 인터뷰 일정 수정
            function editSchedule(scheduleId) {
                console.log('editSchedule 호출됨 - scheduleId:', scheduleId, '타입:', typeof scheduleId);
                
                const schedules = getData(DB_SCHEDULES);
                const applicants = getData(DB_APPLICANTS);
                
                console.log('모든 일정 목록:', schedules);
                console.log('일정 ID들:', schedules.map(s => ({ id: s.id, type: typeof s.id })));
                
                // 문자열과 숫자 타입 모두 확인
                const schedule = schedules.find(s => s.id === scheduleId || s.id == scheduleId || String(s.id) === String(scheduleId));
                
                console.log('찾은 일정:', schedule);
                
                if (!schedule) {
                    console.error('일정을 찾을 수 없음 - 찾는 ID:', scheduleId);
                    showNotification('해당 일정을 찾을 수 없습니다.', 'error');
                    return;
                }
                
                const modal = UI.scheduleModal;
                if (!modal) {
                    showNotification('모달을 찾을 수 없습니다.', 'error');
                    return;
                }
                
                const title = document.getElementById('schedule-modal-title');
                const applicantSelect = document.getElementById('schedule-applicant');
                
                // 모달 제목 설정
                if (title) title.textContent = '인터뷰 일정 수정';
                
                // 지원자 목록 업데이트
                if (applicantSelect) {
                    applicantSelect.innerHTML = '';
                    applicants.forEach(app => {
                        const option = document.createElement('option');
                        option.value = app.id;
                        option.textContent = `${app.name} (${app.position || '포지션 미정'})`;
                        applicantSelect.appendChild(option);
                    });
                }
                
                // 폼 필드에 기존 데이터 설정
                const scheduleIdField = document.getElementById('schedule-id');
                const applicantField = document.getElementById('schedule-applicant');
                const datetimeField = document.getElementById('schedule-datetime');
                const interviewerField = document.getElementById('schedule-interviewer');
                const locationField = document.getElementById('schedule-location');
                const notesField = document.getElementById('schedule-notes');
                
                if (scheduleIdField) scheduleIdField.value = schedule.id;
                if (applicantField) applicantField.value = schedule.applicantId;
                if (datetimeField) datetimeField.value = schedule.datetime;
                if (interviewerField) interviewerField.value = schedule.interviewer || '';
                if (locationField) locationField.value = schedule.location || '';
                if (notesField) notesField.value = schedule.notes || '';
                
                // 모달 표시
                modal.style.display = 'block';
            }
            

            
            // 인터뷰 일정 삭제
            function deleteSchedule(scheduleId) {
                console.log('deleteSchedule 호출됨 - scheduleId:', scheduleId, '타입:', typeof scheduleId);
                
                if (confirm('정말로 이 인터뷰 일정을 삭제하시겠습니까?')) {
                    const schedules = getData(DB_SCHEDULES);
                    console.log('삭제 전 일정 목록:', schedules);
                    
                    // 문자열과 숫자 타입 모두 확인
                    const filteredSchedules = schedules.filter(s => 
                        s.id !== scheduleId && 
                        s.id != scheduleId && 
                        String(s.id) !== String(scheduleId)
                    );
                    
                    console.log('삭제 후 일정 목록:', filteredSchedules);
                    console.log('삭제된 일정 수:', schedules.length - filteredSchedules.length);
                    
                    setData(DB_SCHEDULES, filteredSchedules);
                    renderSchedules();
                    showNotification('인터뷰 일정이 삭제되었습니다.', 'success');
                }
            }
            
            // 특정 날짜의 모든 일정 보기
            function showDaySchedules(dateString) {
                const schedules = getData(DB_SCHEDULES);
                const applicants = getData(DB_APPLICANTS);
                
                // 해당 날짜의 모든 일정 필터링
                const daySchedules = schedules.filter(s => {
                    const scheduleDate = new Date(s.datetime);
                    return scheduleDate.toISOString().split('T')[0] === dateString;
                });
                
                if (daySchedules.length === 0) {
                    showNotification('해당 날짜에 일정이 없습니다.', 'info');
                    return;
                }
                
                // 모달 내용 생성
                const date = new Date(dateString);
                const formattedDate = date.toLocaleDateString('ko-KR', {
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric',
                    weekday: 'long'
                });
                
                let scheduleListHTML = '';
                daySchedules.sort((a, b) => new Date(a.datetime) - new Date(b.datetime)).forEach(schedule => {
                    const applicant = applicants.find(a => a.id === schedule.applicantId);
                    const applicantName = applicant ? applicant.name : '삭제된 지원자';
                    const applicantPosition = applicant ? (applicant.position || '포지션 미정') : '포지션 미정';
                    const scheduleDate = new Date(schedule.datetime);
                    const timeString = scheduleDate.toLocaleTimeString('ko-KR', {
                        hour: '2-digit',
                        minute: '2-digit',
                        hour12: false
                    });
                    const status = schedule.status || 'scheduled';
                    const statusText = {
                        'scheduled': '예정',
                        'completed': '완료',
                        'cancelled': '취소'
                    }[status] || '예정';
                    
                    scheduleListHTML += `
                        <div class="day-schedule-item" onclick="editSchedule('${schedule.id}')">
                            <div class="schedule-time">${timeString}</div>
                            <div class="schedule-info">
                                <div class="schedule-name">${applicantName}</div>
                                <div class="schedule-position">${applicantPosition}</div>
                                <div class="schedule-details">
                                    <span>면접관: ${schedule.interviewer || 'N/A'}</span>
                                    ${schedule.location ? `<span>장소: ${schedule.location}</span>` : ''}
                                    <span class="badge ${status === 'scheduled' ? 'badge-warning' : status === 'completed' ? 'badge-success' : 'badge-danger'}">${statusText}</span>
                                </div>
                            </div>
                        </div>
                    `;
                });
                
                // 임시 모달 생성 및 표시
                const modalHTML = `
                    <div id="day-schedules-modal" class="modal" style="display: block;">
                        <div class="modal-content" style="max-width: 600px;">
                            <div class="modal-header">
                                <h3>${formattedDate} 면접 일정</h3>
                                <span class="close" onclick="closeDaySchedulesModal()">&times;</span>
                            </div>
                            <div class="modal-body">
                                <div class="day-schedules-list">
                                    ${scheduleListHTML}
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                
                // 기존 모달이 있으면 제거
                const existingModal = document.getElementById('day-schedules-modal');
                if (existingModal) {
                    existingModal.remove();
                }
                
                // 새 모달 추가
                document.body.insertAdjacentHTML('beforeend', modalHTML);
                
                // 배경 클릭 시 닫기
                document.getElementById('day-schedules-modal').addEventListener('click', (e) => {
                    if (e.target.id === 'day-schedules-modal') {
                        closeDaySchedulesModal();
                    }
                });
            }
            
            // 날짜별 일정 모달 닫기
            function closeDaySchedulesModal() {
                const modal = document.getElementById('day-schedules-modal');
                if (modal) {
                    modal.remove();
                }
            }

            // 인터뷰 일정 캘린더 렌더링
            function renderScheduleCalendar() {
                // 캘린더 구현은 여기에 추가할 수 있습니다
                const calendarGrid = document.getElementById('calendar-grid');
                if (!calendarGrid) return;
                
                // 간단한 캘린더 구현
                const today = new Date();
                const year = today.getFullYear();
                const month = today.getMonth();
                
                const firstDay = new Date(year, month, 1);
                const lastDay = new Date(year, month + 1, 0);
                const startDate = new Date(firstDay);
                startDate.setDate(startDate.getDate() - firstDay.getDay());
                
                const monthNames = ['1월', '2월', '3월', '4월', '5월', '6월', 
                                  '7월', '8월', '9월', '10월', '11월', '12월'];
                
                const currentMonthElement = document.getElementById('current-month');
                if (currentMonthElement) {
                    currentMonthElement.textContent = `${year}년 ${monthNames[month]}`;
                }
                
                // 요일 헤더
                const weekDays = ['일', '월', '화', '수', '목', '금', '토'];
                let calendarHTML = '';
                
                weekDays.forEach(day => {
                    calendarHTML += `<div class="calendar-header">${day}</div>`;
                });
                
                // 날짜 셀들
                const schedules = getData(DB_SCHEDULES);
                const applicants = getData(DB_APPLICANTS);
                
                for (let i = 0; i < 42; i++) {
                    const cellDate = new Date(startDate);
                    cellDate.setDate(startDate.getDate() + i);
                    
                    const isToday = cellDate.toDateString() === today.toDateString();
                    const isOtherMonth = cellDate.getMonth() !== month;
                    
                    const daySchedules = schedules.filter(s => {
                        const scheduleDate = new Date(s.datetime);
                        return scheduleDate.toDateString() === cellDate.toDateString();
                    });
                    
                    let cellClass = 'calendar-day';
                    if (isToday) cellClass += ' today';
                    if (isOtherMonth) cellClass += ' other-month';
                    
                    let eventsHTML = '';
                    const maxVisibleEvents = 3; // 최대 3개까지만 표시
                    const visibleSchedules = daySchedules.slice(0, maxVisibleEvents);
                    const hiddenCount = daySchedules.length - maxVisibleEvents;
                    
                    visibleSchedules.forEach(schedule => {
                        const applicant = applicants.find(a => a.id === schedule.applicantId);
                        const applicantName = applicant ? applicant.name : '삭제된 지원자';
                        const applicantPosition = applicant ? (applicant.position || '포지션 미정') : '포지션 미정';
                        const status = schedule.status || 'scheduled';
                        const eventClass = status === 'completed' ? 'calendar-event completed' : 'calendar-event';
                        
                        // 시간 추출 (HH:MM 형식)
                        const scheduleDate = new Date(schedule.datetime);
                        const timeString = scheduleDate.toLocaleTimeString('ko-KR', {
                            hour: '2-digit',
                            minute: '2-digit',
                            hour12: false
                        });
                        
                        eventsHTML += `
                            <div class="${eventClass}" 
                                 data-schedule-id="${schedule.id}"
                                 title="시간: ${timeString}\n포지션: ${applicantPosition}\n이름: ${applicantName}\n면접관: ${schedule.interviewer || 'N/A'}">
                                <div class="event-time">${timeString}</div>
                                <div class="event-position">${applicantPosition}</div>
                                <div class="event-name">${applicantName}</div>
                            </div>
                        `;
                    });
                    
                    // 숨겨진 일정이 있으면 "더보기" 표시
                    if (hiddenCount > 0) {
                        const dateString = cellDate.toISOString().split('T')[0];
                        eventsHTML += `
                            <div class="calendar-more-events" onclick="showDaySchedules('${dateString}')" title="클릭하여 모든 일정 보기">
                                +${hiddenCount}개 더보기
                            </div>
                        `;
                    }
                    
                    calendarHTML += `
                        <div class="${cellClass}">
                            <div class="calendar-day-number">${cellDate.getDate()}</div>
                            ${eventsHTML}
                        </div>
                    `;
                }
                
                calendarGrid.innerHTML = calendarHTML;
            }

            // 글로벌 함수들을 로컬 함수와 연결
            globalScheduleFunctions = {
                changeSchedulePage: changeSchedulePage,
                editSchedule: editSchedule,
                deleteSchedule: deleteSchedule,
                sortScheduleTable: sortScheduleTable
            };
            
            // 캘린더 관련 글로벌 함수들
            window.showDaySchedules = showDaySchedules;
            window.closeDaySchedulesModal = closeDaySchedulesModal;

            initialize();
        });
        
        // 글로벌 변수들
        let globalScheduleFunctions = {};
        
        // 글로벌 함수들 (이벤트 위임으로 호출됨)
        function changeSchedulePage(page) {
            if (globalScheduleFunctions.changeSchedulePage) {
                globalScheduleFunctions.changeSchedulePage(page);
            }
        }
        
        function editSchedule(scheduleId) {
            if (globalScheduleFunctions.editSchedule) {
                globalScheduleFunctions.editSchedule(scheduleId);
            }
        }
        

        
        function deleteSchedule(scheduleId) {
            if (globalScheduleFunctions.deleteSchedule) {
                globalScheduleFunctions.deleteSchedule(scheduleId);
            }
        }
        
        function sortScheduleTable(column) {
            if (globalScheduleFunctions.sortScheduleTable) {
                globalScheduleFunctions.sortScheduleTable(column);
            }
        }
    </script>
</body>
</html> 
                